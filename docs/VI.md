---
hide:
  - toc
---

<p align="center"><img src="../images/logo.png#gh-light-mode-only" alt=""><img src="../images/logo-dark.png#gh-dark-mode-only" alt=""></p>
<h1 align="center">What the f*ck Python! üò±</h1>
<p align="center">
<a href="https://github.com/satwikkansal/wtfpython">English</a>
| <a href="#">Ti·∫øng Vi·ªát</a>
</p>
<p align="center">C√πng kh√°m ph√° v√† t√¨m hi·ªÉu Python th√¥ng qua c√°c ƒëo·∫°n m√£ khi·∫øn b·∫°n b·∫•t ng·ªù.</p>



C√°c b·∫£n d·ªãch ti·∫øng n∆∞·ªõc ngo√†i kh√°c: [Ti·∫øng Trung ‰∏≠Êñá](https://github.com/leisurelicht/wtfpython-cn) | [Th√™m b·∫£n d·ªãch](https://github.com/satwikkansal/wtfpython/issues/new?title=Add%20translation%20for%20[LANGUAGE]&body=Expected%20time%20to%20finish:%20[X]%20weeks.%20I%27ll%20start%20working%20on%20it%20from%20[Y].)

B·∫°n c√≥ th·ªÉ tham kh·∫£o c√°c ƒëo·∫°n m√£ v·ªõi: [Ch·∫ø ƒë·ªô tr·ª±c quan](https://colab.research.google.com/github/vuduclyunitn/wtfptyhon-vi/blob/master/irrelevant/wtf.ipynb) | [Giao di·ªán d√≤ng l·ªánh](https://pypi.python.org/pypi/wtfpython)


Python l√† m·ªôt ng√¥n ng·ªØ c·∫•p cao, v·ªõi c√°c m√£ ƒë∆∞·ª£c th√¥ng d·ªãch thay v√¨ bi√™n d·ªãch nh∆∞ c√°c ng√¥n ng·ªØ kh√°c nh∆∞ C hay Java. Python c√≥ r·∫•t nhi·ªÅu c√°c t√≠nh nƒÉng gi√∫p vi·ªác l·∫≠p tr√¨nh d·ªÖ d√†ng, thu·∫≠n ti·ªán. Tuy nhi√™n, c√°c ƒëo·∫°n m√£ vi·∫øt b·∫±ng Python th·ªânh tho·∫£ng cho ra k·∫øt qu·∫£ kh√¥ng r√µ r√†ng, g√¢y kh√≥ hi·ªÉu khi m·ªõi nh√¨n v√†o.


wtfpython ƒë∆∞·ª£c t·∫°o ra v·ªõi mong mu·ªën gi·∫£i th√≠ch ch√≠nh x√°c c√°ch ho·∫°t ƒë·ªông c·ªßa c√°c ƒëo·∫°n m√£ tho·∫°t nh√¨n kh√≥ hi·ªÉu v√† c√°c t√≠nh nƒÉng √≠t ƒë∆∞·ª£c bi·∫øt t·ªõi trong Python.


M·ªôt v√†i v√≠ d·ª• c√≥ th·ªÉ kh√¥ng l√†m b·∫°n qu√° ng·∫°c nhi√™n, tuy v·∫≠y b·∫°n s·∫Ω kh√°m ph√° ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu hay ho v·ªÅ Python m√† c√≥ th·ªÉ b·∫°n ch∆∞a t·ª´ng bi·∫øt t·ªõi. H·ªçc l·∫≠p tr√¨nh th√¥ng qua nh·ªØng v√≠ d·ª• nh∆∞ v·∫≠y gi√∫p b·∫°n hi·ªÉu s√¢u h∆°n nh·ªØng th·ª© n·∫±m b√™n trong c·ªßa m·ªôt ng√¥n ng·ªØ l·∫≠p tr√¨nh, khi ƒë√≥ b·∫°n s·∫Ω th·∫•y h·ª©ng th√∫ h∆°n trong qu√° tr√¨nh h·ªçc.


N·∫øu ƒë·ªôc gi·∫£ l√† m·ªôt l·∫≠p tr√¨nh vi√™n c√≥ th√¢m ni√™n, h√£y th·ª≠ th·ª©c m√¨nh v·ªõi c√°c ƒëo·∫°n m√£ s·∫Øp t·ªõi, c·ªë g·∫Øng l√†m ƒë√∫ng m·ªói th·ª≠ th√°ch ngay trong l·∫ßn ƒë·∫ßu ti√™n. ƒê·ªôc gi·∫£ c√≥ th·ªÉ ƒë√£ th·ª≠ qu·∫£ m·ªôt v√†i trong s·ªë c√°c b√†i to√°n tr∆∞·ªõc ƒë√≥, ƒë·ªçc v√† l√†m c√°c b√†i to√°n d∆∞·ªõi ƒë√¢y c√≥ th·ªÉ gi√∫p b·∫°n √¥n l·∫°i ch√∫ng.


PS: N·∫øu b·∫°n ƒë√£ ƒë·ªçc b√†i n√†y tr∆∞·ªõc ƒë√≥, b·∫°n c√≥ th·ªÉ mu·ªën xem nh·ªØng thay ƒë·ªïi m·ªõi [·ªü ƒë√¢y](https://github.com/satwikkansal/wtfpython/releases/).



N√†o ta b·∫Øt ƒë·∫ßu ...

# Nh·ªØng n·ªôi dung ch√≠nh
<!-- Generated using "markdown-toc -i README.md --maxdepth 3"-->

<!-- toc -->

- [C·∫•u tr√∫c c·ªßa c√°c v√≠ d·ª•](#structure-of-the-examples)
    + [‚ñ∂ Some fancy Title](#-some-fancy-title)
- [C√°ch s·ª≠ d·ª•ng](#usage)
- [üëÄ C√°c v√≠ d·ª•](#-examples)
  * [Section: Strain your brain!](#section-strain-your-brain)
    + [‚ñ∂ First things first! *](#-first-things-first-)
    + [‚ñ∂ Strings can be tricky sometimes](#-strings-can-be-tricky-sometimes)
    + [‚ñ∂ Be careful with chained operations](#-be-careful-with-chained-operations)
    + [‚ñ∂ How not to use `is` operator](#-how-not-to-use-is-operator)
    + [‚ñ∂ Hash brownies](#-hash-brownies)
    + [‚ñ∂ Deep down, we're all the same.](#-deep-down-were-all-the-same)
    + [‚ñ∂ Disorder within order *](#-disorder-within-order-)
    + [‚ñ∂ Keep trying... *](#-keep-trying-)
    + [‚ñ∂ For what?](#-for-what)
    + [‚ñ∂ Evaluation time discrepancy](#-evaluation-time-discrepancy)
    + [‚ñ∂ `is not ...` is not `is (not ...)`](#-is-not--is-not-is-not-)
    + [‚ñ∂ A tic-tac-toe where X wins in the first attempt!](#-a-tic-tac-toe-where-x-wins-in-the-first-attempt)
    + [‚ñ∂ The sticky output function](#-the-sticky-output-function)
    + [‚ñ∂ The chicken-egg problem *](#-the-chicken-egg-problem-)
    + [‚ñ∂ Subclass relationships](#-subclass-relationships)
    + [‚ñ∂ All-true-ation *](#-all-true-ation-)
    + [‚ñ∂ The surprising comma](#-the-surprising-comma)
    + [‚ñ∂ Strings and the backslashes](#-strings-and-the-backslashes)
    + [‚ñ∂ not knot!](#-not-knot)
    + [‚ñ∂ Half triple-quoted strings](#-half-triple-quoted-strings)
    + [‚ñ∂ What's wrong with booleans?](#-whats-wrong-with-booleans)
    + [‚ñ∂ Class attributes and instance attributes](#-class-attributes-and-instance-attributes)
    + [‚ñ∂ Non-reflexive class method *](#-non-reflexive-class-method-)
    + [‚ñ∂ yielding None](#-yielding-none)
    + [‚ñ∂ Yielding from... return! *](#-yielding-from-return-)
    + [‚ñ∂ Nan-reflexivity *](#-nan-reflexivity-)
    + [‚ñ∂ Mutating the immutable!](#-mutating-the-immutable)
    + [‚ñ∂ The disappearing variable from outer scope](#-the-disappearing-variable-from-outer-scope)
    + [‚ñ∂ The mysterious key type conversion](#-the-mysterious-key-type-conversion)
    + [‚ñ∂ Let's see if you can guess this?](#-lets-see-if-you-can-guess-this)
  * [Section: Slippery Slopes](#section-slippery-slopes)
    + [‚ñ∂ Modifying a dictionary while iterating over it](#-modifying-a-dictionary-while-iterating-over-it)
    + [‚ñ∂ Stubborn `del` operation](#-stubborn-del-operation)
    + [‚ñ∂ The out of scope variable](#-the-out-of-scope-variable)
    + [‚ñ∂ Deleting a list item while iterating](#-deleting-a-list-item-while-iterating)
    + [‚ñ∂ Lossy zip of iterators *](#-lossy-zip-of-iterators-)
    + [‚ñ∂ Loop variables leaking out!](#-loop-variables-leaking-out)
    + [‚ñ∂ Beware of default mutable arguments!](#-beware-of-default-mutable-arguments)
    + [‚ñ∂ Catching the Exceptions](#-catching-the-exceptions)
    + [‚ñ∂ Same operands, different story!](#-same-operands-different-story)
    + [‚ñ∂ Name resolution ignoring class scope](#-name-resolution-ignoring-class-scope)
    + [‚ñ∂ Needles in a Haystack *](#-needles-in-a-haystack-)
    + [‚ñ∂ Splitsies *](#-splitsies-)
    + [‚ñ∂ Wild imports *](#-wild-imports-)
    + [‚ñ∂ All sorted? *](#-all-sorted-)
    + [‚ñ∂ Midnight time doesn't exist?](#-midnight-time-doesnt-exist)
  * [Section: The Hidden treasures!](#section-the-hidden-treasures)
    + [‚ñ∂ Okay Python, Can you make me fly?](#-okay-python-can-you-make-me-fly)
    + [‚ñ∂ `goto`, but why?](#-goto-but-why)
    + [‚ñ∂ Brace yourself!](#-brace-yourself)
    + [‚ñ∂ Let's meet Friendly Language Uncle For Life](#-lets-meet-friendly-language-uncle-for-life)
    + [‚ñ∂ Even Python understands that love is complicated](#-even-python-understands-that-love-is-complicated)
    + [‚ñ∂ Yes, it exists!](#-yes-it-exists)
    + [‚ñ∂ Ellipsis *](#-ellipsis-)
    + [‚ñ∂ Inpinity](#-inpinity)
    + [‚ñ∂ Let's mangle](#-lets-mangle)
  * [Section: Appearances are deceptive!](#section-appearances-are-deceptive)
    + [‚ñ∂ Skipping lines?](#-skipping-lines)
    + [‚ñ∂ Teleportation](#-teleportation)
    + [‚ñ∂ Well, something is fishy...](#-well-something-is-fishy)
  * [Section: Miscellaneous](#section-miscellaneous)
    + [‚ñ∂ `+=` is faster](#--is-faster)
    + [‚ñ∂ Let's make a giant string!](#-lets-make-a-giant-string)
    + [‚ñ∂ Minor Ones *](#-minor-ones-)
- [Contributing](#contributing)
- [Acknowledgements](#acknowledgements)
- [üéì License](#-license)
  * [Surprise your friends as well!](#surprise-your-friends-as-well)
  * [More content like this?](#more-content-like-this)

<!-- tocstop -->

# C·∫•u tr√∫c c·ªßa c√°c v√≠ d·ª•

T·∫•t c·∫£ c√°c c√°c v√≠ d·ª• ƒë∆∞·ª£c tr√¨nh b√†y v·ªõi c·∫•u tr√∫c nh∆∞ sau:
> ### ‚ñ∂ M·ªôt ti√™u ƒë·ªÅ h·∫•p d·∫´n
>
> ```py
> # ƒêo·∫°n m√£ t·∫°o d·ª±ng v√≠ d·ª•.
> # ƒêo·∫°n m√£ ch·ªß th·ªÉ c·∫ßn kh√°m ph√°...
> ```
>
> **K·∫øt qu·∫£ (C√°c phi√™n b·∫£n Python):**
>
> ```py
> >>> c√¢u l·ªánh k√≠ch ho·∫°t?
> M·ªôt v√†i k·∫øt qu·∫£ b·∫•t ng·ªù, kh√¥ng nh∆∞ mong ƒë·ª£i
> ```
> (C√≥ th·ªÉ c√≥ hay kh√¥ng): M·ªôt d√≤ng m√¥ t·∫£ k·∫øt qu·∫£
>
>
> #### üí° Gi·∫£i th√≠ch:
>
> * Gi·∫£i th√≠ch nh·ªØng ƒëi·ªÅu ƒëang di·ªÖn ra v√† t·∫°i sao.
> ```py
> # ƒêo·∫°n m√£ t·∫°o d·ª±ng v√≠ d·ª•
> # Trong tr∆∞·ªùng h·ª£p c·∫ßn thi·∫øt, ch√∫ng t√¥i li·ªát k√™ th√™m nhi·ªÅu v√≠ d·ª• kh√°c ƒë·ªÉ gi√∫p b·∫°n hi·ªÉu r√µ h∆°n
> ```
> **K·∫øt qu·∫£ (C√°c phi√™n b·∫£n Python):**
>
> ```py
> >>> trigger # some example that makes it easy to unveil the magic
> >>> trigger # M·ªôt v√†i v√≠ d·ª• gi√∫p b·∫°n hi·ªÉu c√°c ƒëo·∫°n m√£
> # some justified output
> ```

**L∆∞u √Ω:** T·∫•t c·∫£ c√°c v√≠ d·ª• ƒë√£ ƒë∆∞·ª£c ch·ª©ng minh ch·∫°y th√†nh c√¥ng tr√™n tr√¨nh th√¥ng d·ªãch Python 3.5.2 ch·∫ø ƒë·ªô t∆∞∆°ng t√°c, v·ªõi c√°c phi√™n b·∫£n Python kh√°c c√°c v√≠ d·ª• s·∫Ω v·∫´n ch·∫°y b√¨nh th∆∞·ªùng, ngo·∫°i tr·ª´ m·ªôt s·ªë v√≠ d·ª• ch√∫ng t√¥i s·∫Ω l∆∞u √Ω tr∆∞·ªõc ph·∫ßn k·∫øt qu·∫£.
# C√°ch d√πng c√°c v√≠ d·ª•

Theo t√¥i, ƒë·ªÉ h·ªçc c√°c v√≠ d·ª• trong b√†i, b·∫°n n√™n ƒë·ªçc theo tr√¨nh t·ª± th·ªùi gian, v√† ƒë·ªëi v·ªõi m·ªói v√≠ d·ª• h√£y:
- ƒê·ªçc kƒ© ƒëo·∫°n m√£ t·∫°o d·ª±ng n√™n v√≠ d·ª•. N·∫øu b·∫°n ƒë√£ l·∫≠p tr√¨nh l√¢u r·ªìi, b·∫°n s·∫Ω ƒëo√°n ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu s·∫Øp t·ªõi ngay.
- ƒê·ªçc k·∫øt qu·∫£ c·ªßa c√°c v√≠ d·ª• v√† th·ª±c hi·ªán hai vi·ªác sau:
  + Ki·ªÉm tra xem k·∫øt qu·∫£ c√≥ gi·ªëng nh∆∞ b·∫°n nghƒ© hay kh√¥ng.
  + M·ªôt khi ƒë·ªçc xong, h√£y h·ªèi ch√≠nh b·∫°n xem m√¨nh ƒë√£ hi·ªÉu th√¥ng su·ªët l√Ω do m√† c√≥ k·∫øt qu·∫£ nh∆∞ v·∫≠y ch∆∞a.
    - N·∫øu c√¢u tr·∫£ l·ªùi l√† "ch∆∞a, t√¥i ch∆∞a hi·ªÉu" (kh√¥ng sao c·∫£), h√≠t m·ªôt h∆°i th·∫≠t sau, v√† ƒë·ªçc ph·∫ßn gi·∫£i th√≠ch (n·∫øu b·∫°n v·∫´n ch∆∞a hi·ªÉu, h√£y t·∫°o m·ªôt issue [·ªü d√¢y](https://github.com/satwikkansal/wtfpython/issues/new)).
    - N·∫øu c√¢u tr·∫£ l·ªùi l√† "c√≥, t√¥i ƒë√£ hi·ªÉu", b·∫°n c√≥ th·ªÉ ƒë·ªçc v√≠ d·ª• ti·∫øp theo.
PS: B·∫°n c√≥ th·ªÉ ƒë·ªçc WTFPython d√πng ch·∫ø ƒë·ªô d√≤ng l·ªánh s·ª≠ d·ª•ng [pypi package](https://pypi.python.org/pypi/wtfpython),
```sh
$ pip install wtfpython -U
$ wtfpython
```
---

# üëÄ C√°c v√≠ d·ª•

## Ch∆∞∆°ng 1: Hack n√£o!

### ‚ñ∂ M√≥n khai v·ªã! *

<!-- Example ID: d3d73936-3cf1-4632-b5ab-817981338863 -->
<!-- read-only -->

K√≠ hi·ªáu "con h√† m√£" ("Walrus" operator), ƒë∆∞·ª£c gi·ªõi thi·ªáu trong phi√™n b·∫£n Python 3.8 ƒë√£ tr·ªü n√™n kh√° ph·ªï bi·∫øn v√¨ m·ªôt v√†i l√Ω do. H√£y th·ª≠ qua n√≥ xem
1\.

```py
# Phi√™n b·∫£n Python 3.8+

>>> a = "wtf_walrus"
>>> a
'wtf_walrus'

>>> a := "wtf_walrus"
File "<stdin>", line 1
    a := "wtf_walrus"
      ^
SyntaxError: invalid syntax (L·ªói v·ªÅ c√∫ ph√°p: C√∫ ph√°p kh√¥ng h·ª£p l·ªá)

>>> (a := "wtf_walrus") # This works though
>>> a
'wtf_walrus'
```

2 \.

```py
# Phi√™n b·∫£n Python 3.8+

>>> a = 6, 9
>>> a
(6, 9)

>>> (a := 6, 9)
>>> a
6

>>> a, b = 6, 9 # Ph√¢n r√£ (unpacking) c√°c gi√° tr·ªã, hay c√≤n g·ªçi l√† c√¢u l·ªánh g√°n ƒëa gi√° tr·ªã (multiple assignments)
>>> a, b
(6, 9)
>>> (a, b = 16, 19) # C√≥ 
  File "<stdin>", line 1
    (a, b = 6, 9)
          ^
SyntaxError: invalid syntax (L·ªói c√∫ ph√°p: c√∫ ph√°p kh√¥ng h·ª£p l·ªá)

>>> (a, b := 16, 19) # C√¢u l·ªánh n√†y in ra m·ªôt tuple c√≥ 3 ph·∫ßn t·ª≠ kh√¥ng nh∆∞ mong ƒë·ª£i (ƒë√°ng l·∫Ω l√† 2 ph·∫ßn t·ª≠ 16 v√† 19)
(6, 16, 19)

>>> a # a ƒë∆∞·ª£c ƒë∆∞·ª£c g√°n l·∫°i gi√° tr·ªã tr∆∞·ªõc ƒë√≥, nh∆∞ng gi√° tr·ªã ph√≠a d∆∞·ªõi v·∫´n gi·ªØ nguy√™n, l√† sao?
6

>>> b 
16
```



#### üí° Gi·∫£i th√≠ch

**√în l·∫°i m·ªôt ch√∫t v·ªÅ k√≠ hi·ªáu "con h√† m√£"**

K√≠ hi·ªáu con h√† m√£ (`:=`) l·∫ßn ƒë·∫ßu ti√™n ƒë∆∞·ª£c gi·ªõi thi·ªáu trong phi√™n b·∫£n Python 3.8, n√≥ h·ªØu d·ª•ng khi b·∫°n mu·ªën g√°n gi√° tr·ªã cho c√°c bi·∫øn b√™n trong m·ªôt bi·ªÉu di·ªÖn (expression).

```py
def some_func():
        # Gi·∫£ ƒë·ªãnh r·∫±ng ta th·ª±c hi·ªán m·ªôt v√†i ph√©p t√≠nh t·ªën nhi·ªÅu t√†i nguy√™n (th·ªùi gian, I/O) ·ªü ƒë√¢y
        # time.sleep(1000)
        return 5

# Thay v√¨ th·ª±c hi·ªán vi·ªác ki·ªÉm tra k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa h√†m tr√™n,
if some_func():
        print(some_func()) # V√† g·ªçi l·∫°i h√†m ƒë√≥ trong th√¢n ƒëi·ªÅu ki·ªán, nghƒ©a l√† th·ª±c hi·ªán c√°c t√≠nh to√°n trong h√†m 2 l·∫ßn.
# Hay t·ªët h∆°n, ta c√≥ th·ªÉ ti·∫øt ki·ªám m·ªôt l·ªùi g·ªçi h√†m th√¥ng qua vi·ªác l·∫•y v·ªÅ gi√° tr·ªã tr·∫£ v·ªÅ ·ªü m·ªôt l·∫ßn g·ªçi v√† th·ª±c hi·ªán so s√°nh tr√™n gi√° tr·ªã ƒë√≥:
a = some_func()
if a:
    print(a)

# D√πng kƒ© hi·ªáu con h√† m√£ b·∫°n c√≥ th·ªÉ vi·∫øt ng·∫Øn g·ªçn h∆°n nh∆∞ d∆∞·ªõi ƒë√¢y, ph√©p g√°n ƒë∆∞·ª£c s·ª≠ d·ª•ng nh∆∞ m·ªánh ƒë·ªÅ ƒëi·ªÅu ki·ªán v√† ta c√≥ th·ªÉ s·ª≠ d·ª•ng bi·∫øn ƒë∆∞·ª£c g√°n gi√° tr·ªã trong th√¢n c√¢u ƒëi·ªÅu ki·ªán if:
if a := some_func():
        print(a)
```

**K·∫øt qu·∫£ (> 3.8):**

```py
5
5
5
```

S·ª≠ d·ª•ng k√≠ hi·ªáu con h√† m√£ gi√∫p ta r√∫t ng·∫Øn ƒë∆∞·ª£c ƒëo·∫°n m√£ ƒëi m·ªôt d√≤ng v√† tr√°nh ƒë∆∞·ª£c vi·ªác g·ªçi `some_func` hai l·∫ßn.
  
- Ta ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng ph√©p g√°n c√≥ k√≠ hi·ªáu h√† m√£ ·ªü c·∫•p ƒë·ªô cao nh·∫•t do ƒë√≥ l·ªói c√∫ ph√°p (`SyntaxError`) trong c√¢u l·ªánh `a := "wtf_walrus"` x·∫£y ra. Khi ta cho ph√©p g√°n n√†y v√†o hai d·∫•u ngo·∫∑c ƒë∆°n `()` th√¨ s·∫Ω kh√¥ng b·ªã l·ªói n·ªØa.  

- Th√¥ng th∆∞·ªùng, c√¢u l·ªánh c√≥ d·∫•u b·∫±ng `=` s·∫Ω kh√¥ng ƒë∆∞·ª£c ph√©p ƒë·∫∑t trong d·∫•u ngo·∫∑c ƒë∆°n. Do v·∫≠y c√¢u l·ªánh `(a, b = 6, 9)` b·ªã l·ªói c√∫ ph√°p. 

- C√∫ ph√°p c·ªßa k√≠ hi·ªáu g√°n con h√† m√£ nh∆∞ sau: `NAME:= expr`, ·ªü ƒë√≥ `NAME` l√† m·ªôt t√™n bi·∫øn h·ª£p l·ªá, v√† `expr` l√† m·ªôt bi·ªÉu di·ªÖn h·ª£p l·ªá. Do v·∫≠y, vi·ªác s·ª≠ d·ª•ng c√°c ph√©p g·ªôp (packing) hay ph√¢n r√£ trong tr∆∞·ªùng h·ª£p n√†y s·∫Ω kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£, ngh√£i l√† 
  - `(a := 6, 9)` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `((a := 6), 9)` v√† bu·ªïi di·ªÖn cu·ªëi c√πng l√†  `(a, 9) ` (·ªü ƒë√≥ gi√° tr·ªã c·ªßa  `a` l√† 6). B·∫°n c√≥ th·ªÉ ki·ªÉm tra l·∫°i v·ªõi c√°c d√≤ng l·ªánh d∆∞·ªõi ƒë√¢y

    ```py
    >>> (a := 6, 9) == ((a := 6), 9)
    True # Bi·ªÉu di·ªÖn b√™n tr√°i b·∫±ng b√™n ph·∫£i do ph√©p ph√¢n r√£ kh√¥ng ƒë∆∞·ª£c ph√©p (nh∆∞ ƒë√£ gi·∫£i th√≠ch ph√≠a tr√™n)
    >>> x = (a := 696, 9)
    >>> x
    (696, 9)
    >>> x[0] is a # C·∫£ x[0] v√† a c√πng tr·ªè v·ªÅ chung m·ªôt ƒë·ªãa ch·ªâ trong b·ªô nh·ªõ 
    True
    ```

  - T∆∞∆°ng t·ª±, `(a, b := 16, 19)` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `(a, (b := 16), 19)` khi ta c√≥ 3 gi√° tr·ªã trong m·ªôt tuple. 

---

### ‚ñ∂ Strings th·ªânh tho·∫£ng c√≥ th·ªÉ kh√° o√°i oƒÉm

<!-- Example ID: 30f1d3fc-e267-4b30-84ef-4d9e7091ac1a --->
1\.

```py
>>> a = "some_string"
>>> id(a)
140420665652016
>>> id("some" + "_" + "string") # ƒê·ªÉ √Ω r·∫±ng c·∫£ hai gi√° tr·ªã id ƒë·ªÅu gi·ªëng nhau (140420665652016).
140420665652016
```

2\.
```py
>>> a = "wtf"
>>> b = "wtf"
>>> a is b
True # a v√† b c√πng tr·ªè t·ªõi m·ªôt ƒë·ªãa ch·ªâ trong b·ªô nh·ªõ

>>> a = "wtf!"
>>> b = "wtf!"
>>> a is b
False # a v√† b kh√¥ng c√πng tr·ªè t·ªõi m·ªôt ƒë·ªãa ch·ªâ trong b·ªô nh·ªõ

```

3\.

```py
>>> a, b = "wtf!", "wtf!"
>>> a is b # √Åp d·ª•ng cho t·∫•t c·∫£ c√°c phi√™n b·∫£n Python, ngo·∫°i tr·ª´ c√°c phi√™n b·∫£n 3.7.x
True # a v√† b c√πng tr·ªè t·ªõi m·ªôt ƒë·ªãa ch·ªâ trong b·ªô nh·ªõ

>>> a = "wtf!"; b = "wtf!"
>>> a is b # K·∫øt qu·∫£ l√† True ho·∫∑c False tu·ª≥ thu·ªôc v√†o m√¥i tr∆∞·ªùng b√™n ch·∫°y ƒëo·∫°n m√£ (python shell / ipython / as a script)
False
```

```py
# T·∫°o m·ªôt file t√™n some_file.py, ch·ª©a ba d√≤ng code d∆∞·ªõi ƒë√¢y:
a = "wtf!"
b = "wtf!"
print(a is b)

# Khi file n√†y ƒë∆∞·ª£c ch·∫°y k·∫øt qu·∫£ in ra l√† True

```

4\.

**K·∫øt qu·∫£ (< Python3.7 )**

```py
>>> 'a' * 20 is 'aaaaaaaaaaaaaaaaaaaa'
True
>>> 'a' * 21 is 'aaaaaaaaaaaaaaaaaaaaa'
False
```

C√≥ g√¨ ƒë√≥ sai sai?

#### üí°Gi·∫£i th√≠ch:
+ Nh·ªØng ƒëi·ªÅu x·∫£y ra trong c√°c ƒëo·∫°n m√£ ƒë·∫ßu ti√™n v√† th·ª© hai ƒë·∫øn t·ª´ m·ªôt t·ªëi ∆∞u c·ªßa CPython (ƒë∆∞·ª£c g·ªçi l√† string interning), t·ªëi ∆∞u n√†y c·ªë g·∫Øng s·ª≠ d·ª•ng c√°c ƒë·ªëi t∆∞·ª£ng kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã hi·ªán t·ªìn t·∫°i trong m·ªôt v√†i tr∆∞·ªùng h·ª£p thay v√¨ vi·ªác t·∫°o ra m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi m·ªói l·∫ßn.
+ Sau khi ƒë∆∞·ª£c "interned," nhi·ªÅu bi·∫øn c√≥ th·ªÉ tham chi·∫øu t·ªõi c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng string trong b·ªô nh·ªõ (do v·∫≠y m√† ti·∫øt ki·ªám b·ªô nh·ªõ).
+ Trong c√°c ƒëo·∫°n m√£ ph√≠a tr√™n, c√°c strings ƒë∆∞·ª£c interned m·ªôt c√°ch ng·∫ßm. Quy·∫øt ƒë·ªãnh ki n√†o th√¨ intern m·ªôt c√°ch ng·∫ßm l√† ph·ª• thu·ªôc v√†o m·ªói tri·ªÉn khai Python. C√≥ m·ªôt v√†i lu·∫≠t c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒëo√°n bi·∫øt m·ªôt string s·∫Ω ƒë∆∞·ª£c intern hay kh√¥ng:
  * T·∫•t c·∫£ strings c√≥ ƒë·ªô d√†i b·∫±ng 0 v√† 1 ƒë∆∞·ª£c intern.
  * C√°c strings ƒë∆∞·ª£c intern t·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch (`'wtf'` s·∫Ω ƒë∆∞·ª£c intern nh∆∞ng `''.join(['w', 't', 'f'])` s·∫Ω kh√¥ng ƒë∆∞·ª£c intern).
  * C√°c strings kh√¥ng ƒë∆∞·ª£c t·∫°o th√†nh t·ª´ c√°c m·∫´u t·ª± ASCII, s·ªë, ho·∫∑c d·∫•u g·∫°ch ch√¢n, s·∫Ω kh√¥ng ƒë∆∞·ª£c intern. ƒêi·ªÅu ƒë√≥ gi·∫£i th√≠ch t·∫°i sao `'wtf!'` kh√¥ng ƒë∆∞·ª£c intern b·ªüi v√¨ k√≠ t·ª± `!`. Tri·ªÉn khai Cpython cho lu·∫≠t n√†y c√≥ th·ªÉ t√¨m th·∫•y [·ªü ƒë√¢y](https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19)
  ![image](../images/string-intern/string_intern.png)
+ Khi `a` and `b` ƒë∆∞·ª£c cho nh·∫≠n gi√° tr·ªã `"wtf!"` tr√™n c√πng m·ªôt d√≤ng, tr√¨nh th√¥ng d·ªãch Python s·∫Ω t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi, sau ƒë√≥ tham chi·∫øu t·ªõi bi·∫øn th·ª© hai t·∫°i c√πng m·ªôt th·ªùi ƒëi·ªÉm. N·∫øu b·∫°n l√†m c√°c ph√©p g√°n tr√™n c√°c d√≤ng ri√™ng bi·ªát, tr√¨nh th√¥ng d·ªãch s·∫Ω kh√¥ng bi·∫øt r·∫±ng ƒë√£ c√≥ `"wtf!"` t·ªìn t·∫°i nh∆∞ m·ªôt ƒë·ªëi t∆∞·ª£ng (b·ªüi v√¨  `"wtf!"` kh√¥ng ƒë∆∞·ª£c intern ng·∫ßm nh∆∞ ƒëi·ªÅu ƒë∆∞·ª£c tr√¨nh b√†y tr√™n). ƒê√¢y l√† m·ªôt t·ªëi ∆∞u t·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch. T·ªëi ∆∞u n√†y kh√¥ng √°p d·ª•ng cho c√°c phi√™n b·∫£n CPython 3.7.x (xem th√™m v·ªÅ v·∫•n ƒë·ªÅ n√†y [·ªü ƒë√¢y] (https://github.com/satwikkansal/wtfpython/issues/100)).
+ M·ªôt ƒë∆°n v·ªã bi√™n d·ªãch trong m√¥i tr∆∞·ªùng t∆∞∆°ng t√°c nh∆∞ IPython bao g·ªìm ch·ªâ m·ªôt c√¢u l·ªánh ƒë∆°n, tr√°i l·∫°i `a = "wtf!"; b = "wtf!"`l√† hai c√¢u l·ªánh. ƒêi·ªÅu n√†y gi·∫£i th√≠ch t·∫°i sao c√°c danh ƒë·ªãnh (identities) l·∫°i kh√°c nhau trong `a = "wtf!"; b = "wtf!"`, v√† c≈©ng gi·∫£i th√≠ch t·∫°i sao ch√∫ng l·∫°i gi·ªëng nhau trong `some_file.py`.
+ S·ª± thay ƒë·ªïi ƒë·ªôt ng·ªôt trong ƒëo·∫°n m√£ th·ª© t∆∞ l√† do m·ªôt kƒ© thu·∫≠t [T·ªëi ∆∞u peephole](https://en.wikipedia.org/wiki/Peephole_optimization) hay c√≤n ƒë∆∞·ª£c bi·∫øt ƒë·∫øn nh∆∞ s·ª± g·∫•p h·∫±ng s·ªë. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√†  bi·ªÉu di·ªÖn `'a'*20` ƒë∆∞·ª£c thay th·∫ø b·ªü `'aaaaaaaaaaaaaaaaaaaa'` trong qu√° tr√¨nh bi√™n d·ªãch ti·∫øt ki·ªám m·ªôt v√†i chu k√¨ ƒë·ªìng h·ªì trong su·ªët th·ªùi gian ch·∫°y . S·ª± g·∫•p h·∫±ng s·ªë ch·ªâ x·∫£y ra ƒë·ªëi v·ªõi c√°c strings c√≥ ƒë·ªô d√†i nh·ªè h∆°n 20 (T·∫°i sao? t∆∞·ªüng t∆∞·ª£ng k√≠ch th∆∞·ªõc c·ªßa file `.pyc` sinh ra b·ªüi bi·ªÉu di·ªÖn `'a'*10**10`). [Link n√†y](https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288) d·∫´n t·ªõi tri·ªÉn khai c·ªßa t·ªëi ∆∞u ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p.
+ Ch√∫ √Ω r·∫±ng: trong Python 3.7, g·∫•p h·∫±ng s·ªë ƒë∆∞·ª£c chuy·ªÉn t·ª´ b·ªô t·ªëi ∆∞u peephole sang b·ªô t·ªëi ∆∞u m·ªõi AST v·ªõi m·ªôt v√†i thay ƒë·ªïi lu·∫≠n l√Ω, n√™n ƒëo·∫°n m√£ th·ª© t∆∞ kh√¥ng ch·∫°y ƒë∆∞·ª£c trong Python 3.7. B·∫°n c√≥ th·ªÉ ƒë·ªçc th√™m v·ªÅ s·ª± thay ƒë·ªïi n√†y [·ªü ](https://bugs.python.org/issue11549). 

---


### ‚ñ∂ Be careful with chained operations
<!-- Example ID: 07974979-9c86-4720-80bd-467aa19470d9 --->
```py
>>> (False == False) in [False] # makes sense
False
>>> False == (False in [False]) # makes sense
False
>>> False == False in [False] # now what?
True

>>> True is False == False
False
>>> False is False is False
True

>>> 1 > 0 < 1
True
>>> (1 > 0) < 1
False
>>> 1 > (0 < 1)
False
```

#### üí° Gi·∫£i th√≠ch:

As per https://docs.python.org/2/reference/expressions.html#not-in


> N·∫øu a, b, c, ..., y, z l√† c√°c bi·ªÉu di·ªÖn (expressions) v√† op1, op2, ..., opN l√† c√°c ph√©p so s√°nh, khi ƒë√≥ op1 b op2 c ... y opN z t∆∞∆°ng ƒë∆∞∆°ng v·ªõi op1 b and b op2 c and ... y opN, ngo·∫°i tr√¨ vi·ªác m·ªói bi·ªÉu di·ªÖn ƒë∆∞·ª£c th·ª±c hi·ªán hay ƒë√°nh gi√° nhi·ªÅu nh√¢t m·ªôt l·∫ßn

Trong khi nh·ªØng ƒëi·ªÅu ta th·∫•y ph√≠a tr√™n c√≥ th·ªÉ h∆°i ng·ªõ ng·∫©n ƒë·ªëi v·ªõi b·∫°n, ta c√≥ th·ªÉ l√†m nh·ªØng th·ª© th√∫ v·ªã h∆°n nh∆∞ `a == b == c` v√† `0 <= x <= 100`.

* `False is False is False` t∆∞∆°ng ƒë∆∞∆°ng `(False is False) and (False is False)`
* `True is False == False` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `True is False and False == False` v√† do ph·∫ßn so s√°nh ƒë·∫ßu ti√™n (`True is False`) cho ra k·∫øt qu·∫£ `False`, do ƒë√≥ k·∫øt qu·∫£ cu·ªëi c√πng l√† `False`.
* `1 > 0 < 1` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `1 > 0 and 0 < 1` v√† cho ra k·∫øt qu·∫£ l√† `True`.
* Bi·ªÉu di·ªÖn `(1 > 0) < 1` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `True < 1` v√†
  ```py
  >>> int(True)
  1
  >>> True + 1 #l√†m cho vui th√¥i, ch·ª© kh√¥ng li√™n quan
  2
  ```
  do ƒë√≥, `1 < 1` cho ra k·∫øt qu·∫£`False`

---

### ‚ñ∂ How not to use `is` operator
<!-- Example ID: 230fa2ac-ab36-4ad1-b675-5f5a1c1a6217 --->
V√≠ d·ª• d∆∞∆°i ƒë√¢y r·∫•t n·ªïi ti·∫øng tr√™n Internet
1\.

```py
>>> a = 256
>>> b = 256
>>> a is b
True

>>> a = 257
>>> b = 257
>>> a is b
False
```

2\.

```py
>>> a = []
>>> b = []
>>> a is b
False

>>> a = tuple()
>>> b = tuple()
>>> a is b
True
```

3\.
**K·∫øt qu·∫£**

```py
>>> a, b = 257, 257
>>> a is b
True
```

**K·∫øt q·ªßa (Ch·ªâ √°p d·ª•ng cho Python 3.7.x )**

```py
>>> a, b = 257, 257
>> a is b
False
```

#### üí° Gi·∫£i th√≠ch:

**S·ª± kh√°c bi·ªát gi·ªØa `is` v√† `==`**

* `is` ki·ªÉm tra xem c·∫£ hai ph·∫ßn t·ª≠ so s√°nh c√≥ tr·ªè v·ªÅ c√πng m·ªôt ƒë√¥i t∆∞·ª£ng (v√≠ d·ª•, `is` ki·ªÉm tra ƒë·ªãnh danh c·ªßa c·∫£ hai th√†nh ph·∫ßn ƒë∆∞·ª£c so s√°nh c√≥ kh·ªõp v·ªõi nhau hay kh√¥ng)
* `==` so s√°nh gi√° tr·ªã c·ªßa hai ph·∫ßn t·ª≠ xem ch√∫ng c√≥ b·∫±ng nhau hay kh√¥ng
* V√¨ th·∫ø `is` ƒë∆∞·ª£c d√πng cho vi·ªác so s√°nh tham chi·∫øu v√† `==` ƒë∆∞·ª£c d√πng cho so s√°nh tham tr·ªã. H√£y xem v√≠ d·ª• d∆∞·ªõi ƒë√¢y ƒë·ªÉ hi·ªÉu r√µ h∆°n
  ```py
  >>> class A: pass
  >>> A() is A() # Hai ƒë·ªëi t∆∞·ª£ng r·ªóng nh∆∞ng n·∫±m ·ªü hai v·ªã tr√≠ kh√°c nhau trong b·ªô nh·ªõ.
  False
  ```
** `256` l√† m·ªôt ƒë·ªëi t∆∞·ª£ng hi·ªán h·ªØu nh∆∞ng `257` l·∫°i kh√¥ng ph·∫£i l√† m·ªôt ƒë·ªëi t∆∞·ª£ng hi·ªán h·ªØu.

Khi b·∫°n kh·ªüi ch·∫°y python c√°c s·ªë t·ª´ `-5` t·ªõi `256` s·∫Ω ƒë∆∞·ª£c c·∫•p ph√°t. Nh·ªØng s√¥ nay ƒë∆∞·ª£c s·ª≠ d·ª•ng r·∫•t nhi·ªÅu, do ƒë√≥ vi·ªác c·∫•p ph√°t n√†y l√† h·ª£p l√Ω.
Tham kh·∫£o t·ª´ https://docs.python.org/3/c-api/long.html

> C√°ch tri·ªÉn khai hi·ªán h√†nh c·ªßa Python duy tr√¨ m·ªôt m·∫£ng c√°c ƒë·ªëi t∆∞·ª£ng s√¥ nguy√™n t·ª´ -5 t·ªõi 256, khi b·∫°n t·∫°o m·ªôt s·ªë nguy√™n trong d·∫£i n√†y b·∫°n s·∫Ω quay tr·ªü v·ªÅ l·∫°i m·ªôt tham chi·∫øu t·ªõi m·ªôt ƒë√¥i t∆∞·ª£ng t·ªìn t·∫°i. Do v·∫≠y ta v·∫´n c√≥ th·ªÉ thay ƒë·ªïi gi√° tr·ªã c·ªßa 1. 

```py
>>> id(256)
10922528
>>> a = 256
>>> b = 256
>>> id(a)
10922528
>>> id(b)
10922528
>>> id(257)
140084850247312
>>> x = 257
>>> y = 257
>>> id(x)
140084850247440
>>> id(y)
140084850247344
```


·ªû ƒë√¢y tr√¨nh th√¥ng d·ªãch kh√¥ng ƒë·ªß th√¥ng minh khi th·ª±c thi `y = 257` v√† nh·∫≠n ra r·∫±ng ch√∫ng ta ƒë√£ t·∫°o m·ªôt s·ªë nguy√™n c√≥ gi√° tr·ªã l√† `257,` r·ªìi, do ƒë√≥ n√≥ ti·∫øp t·ª•c t·∫°o m·ªôt ƒë√¥i t∆∞·ª£ng kh√°c trong b·ªô nh·ªõ. 

M·ªôt t·ªëi ∆∞u t∆∞∆°ng t·ª± √°p d·ª•ng cho c√°c ƒë·ªëi t∆∞·ª£ng b·∫•t bi·∫øn (**immutable**) kh√°c nh∆∞ l√† c√°c tuples. B·ªüi v√¨ lists c√≥ th·ªÉ bi·∫øn ƒë·ªïi ƒë∆∞·ª£c, do ƒë√≥ ta hi·ªÉu t·∫°i sao `[] is []` s·∫Ω tr·∫£ v·ªÅ `False` v√† `() is ()` s·∫Ω tr·∫£ v·ªÅ `True`. ƒêi·ªÅu n√†y gi·∫£i th√≠ch ƒëo·∫°n m√£ th·ª© hai. N√†o h√£y c√πng ƒëi qua v√≠ d·ª• th·ª© 3.

** C·∫£ `a` v√† `b` ƒë·ªÅu tr·ªè v·ªÅ c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng khi ƒë∆∞·ª£c kh·ªüi t·∫°o v·ªõi cung m·ªôt gi√° tr·ªã v√† tr√™n c√πng m·ªôt d√≤ng code**
**K·∫øt qu·∫£**

```py
>>> a, b = 257, 257
>>> id(a)
140640774013296
>>> id(b)
140640774013296
>>> a = 257
>>> b = 257
>>> id(a)
140640774013392
>>> id(b)
140640774013488
```


* Tr√™n c√πng m·ªôt d√≤ng code n∆°i c·∫£ a va b ƒë∆∞·ª£c g√°n cho gi√° tr·ªã `257`, trinh th√¥ng d·ªãch Python t·∫°o m·ªôt ƒë√¥i t∆∞·ª£ng m·ªõi, sau ƒë√≥ tr·ªè t·ªõi bi·∫øn th·ª© hai c√πng m·ªôt l√∫c. N·∫øu b·∫°n th·ª±c hi·ªán vi·ªác g√°n tr√™n c√°c d√≤ng ri√™ng bi·ªát, Python s·∫Ω kh√¥ng bi·∫øt r·∫±ng ƒë√£ c√≥ sƒÉn m·ªôt ƒë·ªëi t∆∞·ª£ng `257`

* ƒê√¢y l√† m·ªôt t·ªëi ∆∞u c·ªßa tr√¨nh bi√™n d·ªãch, v√† √°p d·ª•ng c·ª• th·ªÉ cho m√¥i tr∆∞·ªùng t∆∞∆°ng t√°c (interactive environment). Khi b·∫°n nh·∫≠p hai d√≤ng code trong phi√™n th√¥n d·ªãch ƒë·ªông, ch√∫ng ƒë∆∞·ª£c bi√™n d·ªãch ri√™ng, do ƒë√≥ ƒë∆∞·ª£c t·ªëi ∆∞u ri√™ng. N·∫øu b·∫°n th·ª≠ v√≠ d·ª• n√†y trong m·ªôt file `.py` b·∫°n s·∫Ω kh√¥ng th·∫•y ƒëi·ªÅu tr√™n x·∫£y ra do file code ƒë∆∞·ª£c bi√™n d·ªãch m·ªôt l·∫ßn. T·ªëi ∆∞u nay kh√¥ng ch·ªâ gi∆°i h·∫°n cho c√°c s·ªë nguy√™n, n√≥ c√≤n ho·∫°t ƒë·ªông ƒë∆∞·ª£c v·ªõi c√°c ki·ªÉu d·ªØ li·ªáu b·∫•t bi·∫øn kh√°c nh∆∞ strings (xem "Strings are tricky example") v√† floats.
  ```py
  >>> a, b = 257.0, 257.0
  >>> a is b
  True
  ```

* T·∫°i sao v√≠ d·ª• nay l·∫°i kh√¥ng ch·∫°y ƒë∆∞·ª£c tr√™n Python 3.7? ƒê·∫°i kh√°i l√Ω do l√† b·ªüi v√¨ c√°c t·ªëi ∆∞u c·ªßa tr√¨nh bi√™n d·ªãch √°p d·ª•ng cho c√°c tr∆∞·ªùng h·ª£p c·ª• th·ªÉ (v√≠ d·ª•. m·ªôt c√°ch t·ªëi ∆∞u c√≥ th·ªÉ thay ƒë·ªïi tu·ª≥ theo phi√™n b·∫£n, h·ªá ƒëi·ªÅu h√†nh, v√¢n v√¢n). T√¥i v√¢n ƒëang t√¨m hi·ªÉu c√°c thay ƒë·ªïi c·ª• th·ªÉ trong code tri·ªÉu khai, b·∫°n c√≥ th·ªÉ xem th√™m [t·∫°i ƒë√¢y](https://github.com/satwikkansal/wtfpython/issues/100)
---


### ‚ñ∂ Hash brownies
<!-- Example ID: eb17db53-49fd-4b61-85d6-345c5ca213ff --->
1\.
```py
some_dict = {}
some_dict[5.5] = "JavaScript"
some_dict[5.0] = "Ruby"
some_dict[5] = "Python"
```

**K·∫øt qu·∫£:**

```py
>>> some_dict[5.5]
"JavaScript"
>>> some_dict[5.0] # "Python" chi·∫øm l·∫•y kho√° (key) c·ªßa "Ruby"?
"Python"
>>> some_dict[5] 
"Python"

>>> complex_five = 5 + 0j
>>> type(complex_five)
complex
>>> some_dict[complex_five]
"Python"
```

Th·∫ø qu√°i n√†o m√† to√†n in ra Python?


#### üí° Gi·∫£i th√≠ch

* T√≠nh duy nh·∫•t c·ªßa c√°c kho√° (keys) trong c·∫•u tr√∫c d·ªØ li·ªáu t·ª´ ƒëi·ªÉn c·ªßa ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi  *s·ª± t∆∞∆°ng ƒë∆∞∆°ng*, ch·ª© kh√¥ng ph·∫£i d·ª±a tr√™n danh t√≠nh. Do ƒë√≥ d·∫´u cho `5`, `5.0`, v√† `5 + 0j` l√† c√°c ƒë·ªëi t∆∞·ª£ng ri√™ng bi·ªát c√≥ ki·ªÉu kh√°c nhau, nh∆∞ng b·ªüi v√¨ ch√∫ng bƒÉng nhau n√™n kh√¥ng th·ªÉ t·ªìn t·∫°i nh∆∞ m·ªôt kho√° ri√™ng c·ªßa `dict` (ho·∫∑c `set`). Khi b·∫°n th√™m c√°c kho√° n√†y v√†o t·ª´ ƒëi·ªÉn sau ƒë√≥ tra gi√° tr·ªã c·ªßa kho√° ƒë√≥ d·ª±a tr√™n gi·∫£ ƒë·ªãnh v·ªÅ s·ª± t∆∞∆°ng ƒë∆∞∆°ng th√¨ Python ch·ªâ tr·∫£ v·ªÅ gi√° tr·ªã c·ªßa kho√° ƒë∆∞·ª£c ch√®n v√†o ban ƒë·∫ßu (thay v√¨ tr·∫£ l·∫°i l·ªói v·ªÅ truy xu·∫•t kho√° `KeyError`):
  ```py
  >>> 5 == 5.0 == 5 + 0j
  True
  >>> 5 is not 5.0 is not 5 + 0j
  True
  >>> some_dict = {}
  >>> some_dict[5.0] = "Ruby"
  >>> 5.0 in some_dict
  True
  >>> (5 in some_dict) and (5 + 0j in some_dict)
  True
  ```
* Nguy√™n l√Ω tr√™n c≈©ng √°p d·ª•ng khi b·∫°n g√°n gi√° tr·ªã cho kho√°. Khi b·∫°n th·ª±c hi·ªán ph√©p g√°n `some_dict[5] = "Python"`, Python t√¨m ph·∫ßn t·ª≠ c√≥ s·∫µn trong t·ª´ ƒëi·ªÉn c√≥ kho√° t∆∞∆°ng ƒë∆∞∆°ng, trong tr∆∞·ªùng h·ª£p n√†y n√® `5.0 -> "Ruby"`, ghi ƒë√® l√™n gi√° tr·ªã c·ªßa kho√° n√†y ngay, v√† l·ªù ƒëi kho√° t∆∞∆°ng ƒë∆∞∆°ng m√† b·∫°n m·ªõi cung c·∫•p.
  ```py
  >>> some_dict
  {5.0: 'Ruby'}
  >>> some_dict[5] = "Python"
  >>> some_dict
  {5.0: 'Python'}
  ```

* V·∫≠y l√†m sao ƒë·ªÉ c·∫≠p nh·∫≠t kho√° `5` v√†o t·ª´ ƒëi·ªÉn (thay v√¨ `5.0`)? Th·ª±c s·ª± l√† ch√∫ng ta kh√¥ng th·ªÉ l√†m ƒëi·ªÅu ƒë√≥ v∆°i m·ªôt thao t√°c, nh∆∞ng ta c√≥ th·ªÉ xo√° ƒëi kho√° c≈©  (`del some_dict[5.0]`), v√† sau ƒë√≥ thi·∫øt l·∫≠p kho√° m·ªõi(`some_dict[5]`) ƒë·ªÉ c√≥ th·ªÉ l·∫•y ƒë∆∞·ª£c kho√° `5` thay v√¨ `5.0`, tuy nhi√™n c√°ch n√†y √≠t ai x√†i t·ªõi l·∫Øm.


* L√†m th·∫ø n√†o Python t√¨m kho√° `5` trong t·ª´ ƒëi·ªÉn c√≥ ch·ª©a s·∫µn kho√° `5.0`? N√≥ l√†m ƒë∆∞·ª£c ƒëi·ªÅu ƒë√≥ m√† kh√¥ng ph·∫£i d√≤ qua m·ªçi ph·∫ßn t·ª≠ trong t·ª´ ƒëi·ªÉn th√¥ng qua s·ª≠ d·ª•ng c√°c h√†m bƒÉm (hash functions), do ƒë√≥ t·ªën th·ªùi gian ch·∫°y h·∫±ng s·ªë (constant time). Khi Python tra  kho√° t√™n `foo` trong m·ªôt t∆∞ ƒëi·ªÉn, ƒë·∫ßu ti√™n n√≥ th·ª±c hi·ªán h√†m bƒÉm `hash(foo)` (v·ªõi th·ªùi gian ch·∫°y h·∫±ng s·ªë). B·ªüi v√¨ trong Python c√°c ƒë·ªëi t∆∞·ª£ng bƒÉng nhau khi ch√∫ng c√≥ chung m·ªôt gi√° tr·ªã bƒÉm ([ƒë·ªçc th√™m ·ªü ƒë√¢y](https://docs.python.org/3/reference/datamodel.html#object.__hash__) here), `5`, `5.0`, and `5 + 0j` have the same hash value.
  ```py
  >>> 5 == 5.0 == 5 + 0j
  True
  >>> hash(5) == hash(5.0) == hash(5 + 0j)
  True
  ```
  **Ghi ch√∫:** C√°c ƒë·ªëi t∆∞·ª£ng c√≥ gi√° tr·ªã bƒÉm bƒÉng nhau ch∆∞a ch·∫Øc ƒë√£ b·∫±ng nhau. (V·∫´n ƒë·ªÅ n√†y ƒë∆∞·ª£c bi·∫øt t·ªõi v·ªõi t√™n g·ªçi [hash collision](https://en.wikipedia.org/wiki/Collision_(computer_science)), v√† gi·∫£m ƒëi hi·ªáu nƒÉng v·ªõi th·ªùi gian h·∫±ng s·ªë qua vi·ªác d√πng h√†m bƒÉm.)

---

### ‚ñ∂ Deep down, we're all the same.
<!-- Example ID: 8f99a35f-1736-43e2-920d-3b78ec35da9b --->
```py
class WTF:
  pass
```

**K·∫øt qu·∫£:**
```py
>>> WTF() == WTF() # two different instances can't be equal
False
>>> WTF() is WTF() # identities are also different
False
>>> hash(WTF()) == hash(WTF()) # hashes _should_ be different as well
True
>>> id(WTF()) == id(WTF())
True
```

#### üí° Gi·∫£i th√≠ch:

* Khi `id` ƒë∆∞·ª£c g·ªçi, Python t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng l·ªõp `WTF` v√† truy·ªÅn ƒë·ªëi t∆∞·ª£ng n√†y cho h√†m `id`. H√†m `id` l·∫•y `id` c·ªßa ƒë·ªëi t∆∞·ª£ng (v√πng nh·ªõ c·ªßa ƒë·ªëi t∆∞·ª£ng), v√† v·ª©t ƒë·ªëi t∆∞·ª£ng n√†y ƒëi. Do ƒë√≥ ƒë·ªëi t∆∞·ª£ng b·ªã ti√™u hu·ª∑.
* Khi ch√∫ng ta g·ªçi `id` hai l·∫ßn, Python c·∫•p ph√°t c√πng m·ªôt v√πng nh∆° cho ƒë·ªëi t∆∞·ª£ng th∆∞ hai. B·ªüi vi (trong CPython) `id` s·ª≠ d·ª•ng v√πng nh·ªõ cho id c·ªßa ƒë·ªëi t∆∞·ª£ng, id c·ªßa hai ƒë·ªëi t∆∞·ª£ng n√†y l√† gi·ªëng nhau.
* V√¨ v·∫≠y, id c·ªßa ƒë·ªëi t∆∞·ª£ng ch·ªâ duy nh·∫•t trong v√≤ng ƒë·ªùi c·ªßa ƒë·ªëi t∆∞·ª£ng ƒë√≥. Sau khi ƒë·ªëi t∆∞·ª£ng b·ªã ti√™u hi·ªÉu, hay tr∆∞·ªõc khi n√≥ ƒë∆∞·ª£c t·∫°o, nh·ªØng th·ª© kh√°c c√≥ th·ªÉ c√≥ c√πng id v·ªõi n√≥.
* Nh∆∞ng t·∫°i sao ph√©p `is` l·∫°i cho ra k·∫øt qu·∫£ `False`? H√£y nh√¨n v√≠ d·ª• d∆∞·ªõi ƒë√¢y
```py
  class WTF(object):
    def __init__(self): print("I")
    def __del__(self): print("D")
  ```
  **K·∫øt qu·∫£:**
  ```py
  >>> WTF() is WTF()
  I
  I
  D
  D
  False
  >>> id(WTF()) == id(WTF())
  I
  D
  I
  D
  True
  ```
  Nh∆∞ b·∫°n quan s√°t th·∫•y, c√≥ s·ª± kh√°c bi·ªát ·ªü th·ª© t·ª± ti√™u hi·ªÉu c√°c ƒë·ªëi t∆∞·ª£ng, v√† ƒë√≥ t·∫°o ra s·ª± kh√°c bi·ªát.
  
---

### ‚ñ∂ V√¥ tr·∫≠t t·ª± trong tr·∫≠t t·ª± *
<!-- Example ID: 91bff1f8-541d-455a-9de4-6cd8ff00ea66 --->
```py
from collections import OrderedDict


dictionary[1] = 'a'; dictionary[2] = 'b';

ordered_dict = OrderedDict()
ordered_dict[1] = 'a'; ordered_dict[2] = 'b';

another_ordered_dict = OrderedDict()
another_ordered_dict[2] = 'b'; another_ordered_dict[1] = 'a';

class DictWithHash(dict):
    """
    A dict that also implements __hash__ magic.
    """
    __hash__ = lambda self: 0

class OrderedDictWithHash(OrderedDict):
    """
    An OrderedDict that also implements __hash__ magic.
    """
    __hash__ = lambda self: 0
```

**K·∫øt qu·∫£**
```py
>>> dictionary == ordered_dict # N·∫øu a == b
True
>>> dictionary == another_ordered_dict # and b == c
True
>>> ordered_dict == another_ordered_dict # th·∫ø sao c != a ??
False

# ta bi·∫øt rƒÉng set ch·ªâ ch·ª©a c√°c ph·∫ßn t·ª≠ ƒë·ªôc nh·∫•t,
# th·ª≠ t·∫°o m·ªôt set ch·ª©a 3 t·ª´ ƒëi·ªÉn ph√≠a tr√™n xem sao...

>>> len({dictionary, ordered_dict, another_ordered_dict})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'dict' (L·ªói v·ªÅ ki·ªÉu: ki·ªÉu kh√¥ng th·ªÉ hash ƒë∆∞·ª£c)

# L·ªói tr√™n x·∫£y ra l√† ƒëi·ªÅu d√™ hi·ªÉu do t·ª´ ƒëi·ªÉn kh√¥ng ƒë∆∞·ª£c tran b·ªã __hash__, 
# s·ª≠ d·ª•ng c√°c l·ªõp b·ªçc (wrapper classes) ta x√¢y d·ª±ng ph√≠a tr√™n th·ª≠ xem.
>>> dictionary = DictWithHash()
>>> dictionary[1] = 'a'; dictionary[2] = 'b';
>>> ordered_dict = OrderedDictWithHash()
>>> ordered_dict[1] = 'a'; ordered_dict[2] = 'b';
>>> another_ordered_dict = OrderedDictWithHash()
>>> another_ordered_dict[2] = 'b'; another_ordered_dict[1] = 'a';
>>> len({dictionary, ordered_dict, another_ordered_dict})
1
>>> len({ordered_dict, another_ordered_dict, dictionary}) # x√°o tr·ªôn th·ª© t·ª± c√° ph·∫ßn t·ª≠ trong set
2
```

C√°i qu√°i g√¨ ƒëang x·∫£y ra?

#### üí° Gi·∫£i th√≠ch:

- L√Ω do t·∫°i sao quy t·∫Øc so s√°nh b·∫Øc c·∫ßu kh√¥ng √°p d·ª•ng ƒë∆∞·ª£c khi so s√°nh  `dictionary`, `ordered_dict` v√† `another_ordered_dict` l√† do c√°ch tri·ªÉn khai ph∆∞∆°ng th·ª©c `__eq__` trong l·ªõp `OrderedDict` . Xem th√™m [t√†i li·ªáu](https://docs.python.org/3/library/collections.html#ordereddict-objects)

    >  C√°c ph√©p so s√°nh b·∫±ng gi·ªØa c√°c ƒë·ªëi t∆∞·ª£ng OrderedDict tu√¥n theo th∆∞ t·ª± v√† ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ sau. C√≤n ph√©p so s√°nh bƒÉng gi·ªØa c√° ƒë·ªëi t∆∞·ª£ng `OrderedDict` v√† c√°c ƒë·ªëi t∆∞·ª£ng √°nh x·∫° kh√°c (mapping objects) th√¨ kh√¥ng tu√¢n theo th·ª© t·ª± nh∆∞ l√† c√°c t·ª´ ƒëi·ªÉn th√¥ng th∆∞·ªùng..

- L√Ω do ·ªü ƒë√¢y l√† c√°c ƒë·ªëi t∆∞·ª£ng `OrderedDict` ƒë∆∞·ª£c cho ph√©p b·ªã thay th·∫ø tr·ª±c ti·∫øp t·∫°i b·∫•t c·ª© v·ªã tr√≠ nao m·ªôt t·ª´ ƒëi·ªÉn th√¥ng th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng.
- V·∫≠y t·∫°i sao thay ƒë·ªïi th∆∞ t·ª± c·ªßa c√°c t·ª´ ƒëi·ªÉn l·∫°i ·∫£nh h∆∞·ªüng t·ªõi ƒë·ªëi t∆∞·ª£ng `set` ƒë∆∞·ª£c sinh ra? C√¢u tr·∫£ l·ªùi l√† do thi·∫øu s·ª± so s√°nh n·ªôi ƒë·ªëi t∆∞·ª£ng (intrasitive) . Do sets l√† c√°c t·∫≠p h·ª£p kh√¥ng c√≥ th·ª© t·ª± c·ªßa c√°c ph·∫ßn t·ª≠ ƒë·ªôc nh·∫•t, th·ª© t·ª± c√°c ph·∫ßn t·ª≠ khi ch√®n v√†o kh√¥ng c√≥ nghƒ©a l√Ω g√¨ c·∫£. Nh∆∞ng trong tr∆∞·ªùng h·ª£p n√†y, n√≥ l·∫°i c√≥ v·∫•n ƒë·ªÅ. H√£y t√¨m hi·ªÉu th√™m xem sao

    ```py
    >>> some_set = set()
    >>> some_set.add(dictionary) # these are the mapping objects from the snippets above
    >>> ordered_dict in some_set
    True
    >>> some_set.add(ordered_dict)
    >>> len(some_set)
    1
    >>> another_ordered_dict in some_set
    True
    >>> some_set.add(another_ordered_dict)
    >>> len(some_set)
    1

    >>> another_set = set()
    >>> another_set.add(ordered_dict)
    >>> another_ordered_dict in another_set
    False
    >>> another_set.add(another_ordered_dict)
    >>> len(another_set)
    2
    >>> dictionary in another_set
    True
    >>> another_set.add(another_ordered_dict)
    >>> len(another_set)
    2
    ```
    S·ª± b·∫•t nh·∫•t ·ªü ƒë√¢y  `another_ordered_dict in another_set` cho k·∫øt qu·∫£ l√† `False` b·ªüi v√¨ `ordered_dict` ƒë√£ t·ªìn t·∫°i trong `another_set` tr∆∞·ªõc ƒë√≥, `ordered_dict == another_ordered_dict` tr·ªü th√†nh  `False`.
    

---

### ‚ñ∂ C·ªë th√™m ch√∫t n·ªØa... *
<!-- Example ID: b4349443-e89f-4d25-a109-82616be9d41a --->
```py
def some_func():
    try:
        return 'from_try'
    finally:
        return 'from_finally'

def another_func(): 
    for _ in range(3):
        try:
            continue
        finally:
            print("Finally!")

def one_more_func(): # A gotcha!
    try:
        for i in range(3):
            try:
                1 / i
            except ZeroDivisionError:
                # Let's throw it here and handle it outside for loop
                raise ZeroDivisionError("A trivial divide by zero error")
            finally:
                print("Iteration", i)
                break
    except ZeroDivisionError as e:
        print("Zero division error occurred", e)
```

**K·∫øt qu·∫£:**

```py
>>> some_func()
'from_finally'

>>> another_func()
Finally!
Finally!
Finally!

>>> 1 / 0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: division by zero (Ngo·∫°i l·ªá sinh ra b·ªüi chia m·ªôt s·ªë cho s·ªë 0)

>>> one_more_func()
Iteration 0

```

#### üí° Gi·∫£i th√≠ch:

- Khi c√¢u l·ªánh `return`, `break` hay `continue` ƒë∆∞·ª£c th·ª±c hi·ªán trong ph·∫ßn `try` c·ªßa kh·ªëi "try‚Ä¶finally", ph·∫ßn `finally` c≈©ng ƒë∆∞·ª£c th·ª±c hi·ªán.
- Gi√° tr·ªã tr·∫£ v·ªÅ c·ªßa m·ªôt h√†m ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi c√¢u l·ªánh `return` cu·ªëi cung ƒë∆∞·ª£c th·ª±c hi·ªán. B·ªüi v√¨ ph·∫ßn `finally` lu√¥n ƒë∆∞·ª£c th·ª±c hi·ªán, c√¢u l·ªánh `return` trong ph·∫ßn `finally` s·∫Ω lu√¥n l√† c√¢u l·ªánh tr·∫£ v·ªÅ gia tr·ªã cu·ªëi c√πng.
- Tuy nhi√™n n·∫øu ph·∫ßn finally th·ª±c hi·ªán c√¢u l·ªánh `return` hay `break` th√¨ ph·∫ßn ngo·∫°i l·ªá t·ªìn t·∫°i s·∫Ω b·ªã b·ªè qua.

---


### ‚ñ∂ For what?
<!-- Example ID: 64a9dccf-5083-4bc9-98aa-8aeecde4f210 --->
```py
some_string = "wtf"
some_dict = {}
for i, some_dict[i] in enumerate(some_string):
    i = 10
```

**K·∫øt qu·∫£:**
```py
>>> some_dict # An indexed dict appears.
{0: 'w', 1: 't', 2: 'f'}
```

####  üí° Gi·∫£i th√≠ch:

* C√¢u l·ªánh `for` ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong [ng·ªØ ph√°p Python](https://docs.python.org/3/reference/grammar.html) nh∆∞ sau:
  ```
  for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]
  ```

  ·ªû ƒë√≥ `exprlist` l√† bi·∫øn m·ª•c ti√™u c·ªßa ph√©p g√°n. ƒêi·ªÅu ƒë√≥ co nghƒ©a l√† c√¢u l·ªánh g√°n `{exprlist} = {next_value}` ƒë∆∞·ª£c **th·ª±c hi·ªán ƒë·ªëi v·ªõi m·ªói ph·∫ßn t·ª≠** trong ƒë·ªëi t∆∞·ª£ng l·∫∑p (iterable)
  An interesting example that illustrates this:
  ```py
  for i in range(4):
      print(i)
      i = 10
  ```

  **K·∫øt qu·∫£:**
  ```
  0
  1
  2
  3
  ```

  B·∫°n c√≥ nghƒ© rƒÉng v√≤ng l·∫∑p tr√™n ch·ªâ ch·∫°y c√≥ m·ªôt l·∫ßn?

  **üí° Gi·∫£i th√≠ch:**

- C√¢u l·ªánh g√°n `i = 10` kh√¥ng bao gi·ªù ·∫£nh h∆∞·ªüng t·ªõi c√°c v√≤ng l·∫∑p do c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa v√≤ng l·∫∑p for tron Python. Tr∆∞·ªõc ƒëi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa m·ªói v√≤ng l·∫∑p, ph·∫ßn t·ª≠ ti·∫øp theo ƒë∆∞·ª£c ƒë∆∞a ra b·ªüi tr√¨nh sinh (iterator, trong tr∆∞·ªùng h·ª£p nay l√† `range(4)`), ph·∫ßn t·ª≠ n√†y ƒë∆∞·ª£c gi·∫£i n√©n ra (unpacked) v√† g√°n cho c√°c bi·∫øn ch·∫°y (trong tr∆∞·ªùng h·ª£p nay l√† `i`)

* H√†m `enumerate(some_string)` sinh ra gi√° tr·ªã m·ªõi `i` (bi·∫øn ƒë·∫øm) v√† m·ªôt k√≠ t·ª± t·ª´ `some_string` t·∫°i m·ªói l·∫ßn l·∫∑p. Sau ƒë√≥ n√≥ g√°n kho√° `i` c·ªßa t·ª´ ƒëi·ªÉn `some_dict` cho k√≠ t·ª± ƒë√≥. Tr√¨nh t·ª± ƒë∆∞·ª£c th·ªÉ hi·ªán ƒë∆°n gi·∫£n nh∆∞ d∆∞·ªõi ƒë√¢y:
  ```py
  >>> i, some_dict[i] = (0, 'w')
  >>> i, some_dict[i] = (1, 't')
  >>> i, some_dict[i] = (2, 'f')
  >>> some_dict
  ```

---

### ‚ñ∂ S·ª± kh√°c bi·ªát ƒë·∫øn t·ª´ th·ªùi ƒëi·ªÉm ƒë√°nh gi√°
<!-- Example ID: 6aa11a4b-4cf1-467a-b43a-810731517e98 --->
1\.
```py
array = [1, 8, 15]
# M·ªôt bi·ªÉu di·ªÖn generator th√¥ng th∆∞·ªùng
gen = (x for x in array if array.count(x) > 0)
array = [2, 8, 22]
```

**K·∫øt qu·∫£:**

```py
>>> print(list(gen)) # C√°c gi√° tr·ªã kh√°c ƒëi ƒë√¢u m·∫•t r·ªìi?
[8]
```

2\.

```py
array_1 = [1,2,3,4]
gen_1 = (x for x in array_1)
array_1 = [1,2,3,4,5]

array_2 = [1,2,3,4]
gen_2 = (x for x in array_2)
array_2[:] = [1,2,3,4,5]
```

**K·∫øt qu·∫£:**
```py
>>> print(list(gen_1))
[1, 2, 3, 4]

>>> print(list(gen_2))
[1, 2, 3, 4, 5]
```

3\.

```py
array_3 = [1, 2, 3]
array_4 = [10, 20, 30]
gen = (i + j for i in array_3 for j in array_4)

array_3 = [4, 5, 6]
array_4 = [400, 500, 600]
```

**K·∫øt qu·∫£:**
```py
>>> print(list(gen))
[401, 501, 601, 402, 502, 602, 403, 503, 603]
```

#### üí° L√Ω gi·∫£i

- Trong m·ªôt bi·ªÉu di·ªÖn [generator](https://wiki.python.org/moin/Generators), c√¢u `in` ƒë∆∞·ª£c th·ª±c hi·ªán t·∫°i th·ªùi ƒëi·ªÉm khai b√°o, nh∆∞ng c√¢u ƒëi·ªÅu ki·ªán ƒë∆∞·ª£c th·ª±c hi·ªán t·∫°i th·ªùi ƒëi·ªÉm ch·∫°y (runtime).
- Do tr∆∞·ªõc th·ªùi ƒëi·ªÉm ch·∫°y, `array` ƒë∆∞·ª£c g√°n cho gi√° tr·ªã `[2, 8, 22]`, v√† trong ba s·ªë ƒë∆∞·ª£c g√°n tr∆∞·ªõc ƒë√≥ `1`, `8` and `15`, ch·ªâ c√≥ `8` c√≥ s·ªë l·∫ßn xu·∫•t hi·ªán trong m·∫£ng m·ªõi v√† do ƒë√≥ s·ªë l·∫ßn xu√¢t hi·ªán l·ªõn h∆°n `0`, n√™n generator ch·ªâ cho ra s·ªë `8`.
- S·ª± kh√°c bi·ªát gi·ªØa k·∫øt qu·∫£ c·ªßa `g1` and `g2` trong ph·∫ßn th·ª© hai l√† do c√°ch c√°c bi·∫øn `array_1` v√† `array_2` ƒë∆∞·ª£c g√°n l·∫°i c√°c gi√° tr·ªã.
- Trong tr∆∞·ªùng h·ª£p ƒë·∫ßu ti√™n, `array_1` ƒë∆∞·ª£c g√°n cho m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi `[1,2,3,4,5]` v√† v√¨ c√¢u `in` ƒë∆∞·ª£c th·ª±c hi·ªán t·∫°i th·ªùi ƒëi·ªÉm khai b√°o n√™n n√≥ v·∫´n tr·ªè t·ªõi ƒë·ªëi t∆∞·ª£ng c≈© `[1,2,3,4]` (ƒë·ªëi t∆∞·ª£ng n√†y ch∆∞a b·ªã m·∫•t ƒëi).
- Trong tr∆∞·ªùng h·ª£p th∆∞ hai, ph√©p g√°n l√°t c·∫Øt (slice assignment) `array_2` c·∫≠p nh·∫≠t ƒë·ªëi t∆∞·ª£ng c≈© `[1,2,3,4]` th√†nh `[1,2,3,4,5]`. Hi·ªÉn nhi√™n c·∫£ `g2` v√† `array_2` ƒë·ªÅu tr·ªè t·ªõi cung m·ªôt ƒë·ªëi t∆∞·ª£ng (ƒë·ªëi t∆∞·ª£ng ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh `[1,2,3,4,5]`).
 - Okay, v·ªõi nh·ªØng g√¨ ta quan s√°t tr√™n, co ph·∫£i gi√° tr·ªã tr·∫£ v·ªÅ t·ª´ `list(g)` trong ph·∫ßn th·ª© ba ph·∫£i l√† `[11, 21, 31, 12, 22, 32, 13, 23, 33]`? (b·ªüi v√¨ `array_3` v√† `array_4` s·∫Ω gi·ªëng nh∆∞ `array_1`). L√Ω do ch·ªâ `array_4` ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë∆∞·ª£c gi·∫£i th√≠ch ·ªü ƒë√¢y [PEP-289](https://www.python.org/dev/peps/pep-0289/#the-details)
    >Ch·ªâ c√≥ v√≤ng for ngo√†i c√πng ƒë∆∞·ª£c th·ª±c hi·ªán ngay l·∫≠p t·ª©c, c√°c l·ªánh kh√°c ƒë∆∞·ª£c tr√¨ ho√£n cho ƒë·∫øn khi generator ƒë∆∞·ª£c ch·∫°y.
---


### ‚ñ∂ `is not ...` kh√¥ng ph·∫£i l√† `is (not ...)`

<!-- Example ID: b26fb1ed-0c7d-4b9c-8c6d-94a58a055c0d --->
```py
>>> 'something' is not None
True
>>> 'something' is (not None)
False
```

#### üí° Gi·∫£i th√≠ch

- `is not` l√† m·ªôt to√°n t·ª≠ nh·ªã ph√¢n ƒë∆°n, v√† khi th·ª±c hi·ªán s·∫Ω cho k·∫øt qu·∫£ kh√°c v·ªõi s·ª≠ d·ª•ng `is` v√† `not` ri√™ng bi·ªát.
- `is not` cho ra k·∫øt qu·∫£ `False` khi c√°c bi·∫øn ·ªü hai ƒë·∫ßu c·ªßa n√≥ tr·ªè v·ªÅ c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng , v√† n·∫øu hai bi·∫øn n√†y tr·ªè v·ªÅ kh√°c ƒë·ªëi t∆∞·ª£ng, k·∫øt qu·∫£ s·∫Ω l√† `True`. C·ª• th·ªÉ, `None` v√† `something` tr·ªè v·ªÅ hai bi·∫øn kh√°c nhau n√™n k·∫øt qu·∫£ l√† `True`
- Trong v√≠ d·ª• tr√™n, `(not None)` s·∫Ω cho ra k·∫øt qu·∫£ `True` b·ªüi v√¨ khi s·ª≠ d·ª•ng trong ph√©p so s√°nh lu·∫≠n l√Ω `None` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `False`, do ƒë√≥ d√≤ng m√£ tr√™n s·∫Ω tr·ªü th√†nh `'something' is True`. C·ª• th·ªÉ, do `something` v√† `True` tr·ªè v·ªÅ hai ƒë·ªëi t∆∞·ª£ng kh√°c nhau n√™n k·∫øt qu·∫£ l√† `False`

---

### ‚ñ∂ A tic-tac-toe where X wins in the first attempt!
<!-- Example ID: 69329249-bdcb-424f-bd09-cca2e6705a7a --->

```py
# Kh·ªüi t·∫°o m·ªôt h√†ng
row = [""] * 3 #row i['', '', '']
# V√† t·∫°o m·ªôt b·∫£ng g·ªìm c√°c h√†ng
board = [row] * 3
```

**K·∫øt qu·∫£:**

```py
>>> board
[['', '', ''], ['', '', ''], ['', '', '']]
>>> board[0]
['', '', '']
>>> board[0][0]
''
>>> board[0][0] = "X"
>>> board
[['X', '', ''], ['X', '', ''], ['X', '', '']]
```

Ch√∫ng ta ƒë√£ g√°n `"X"` cho ba v·ªã tr√≠ trong b·∫£ng n√†y chƒÉng?

#### üí° Gi·∫£i th√≠ch:

Khi ch√∫ng ta kh·ªüi t·∫°oi bi·∫øn `row`, h√¨nh m√¥ ph·ªèng d∆∞·ªõi ƒë√¢y cho ta bi·∫øt nh·ªØng g√¨ di·ªÖn ra trong b·ªô nh·ªõ

![image](../images/tic-tac-toe/after_row_initialized.png)


Khi `board` ƒë∆∞·ª£c kh·ªüi t·∫°o bƒÉng vi·ªác nh√¢n b·∫£n `row`, minh ho·∫° ph√≠a d∆∞·ªõi m√¥ t·∫£ nh·ªØng g√¨ di√™n ra trong b·ªô nh·ªõ (m·ªói th√†nh ph·∫ßn c·ªßa b·∫£ng `board[0]`, `board[1]` v√† `board[2]` l√† m·ªôt tham chi·∫øu t·ªõi cung m·ªôt danh s√°ch tr·ªè b·ªüi `row`)

![image](../images/tic-tac-toe/after_board_initialized.png)

Ch√∫ng ta c√≥ th·ªÉ tr√°nh ƒëi·ªÅu tr√™n x·∫£y ra b·∫±ng c√°ch kh√¥ng d√πng bi·∫øn `row` ƒë·ªÉ sinh ra `board`. (Tim hi·ªÉu th√™m t·∫°i (https://github.com/satwikkansal/wtfpython/issues/68) )
```py
>>> board = [['']*3 for _ in range(3)]
>>> board[0][0] = "X"
>>> board
[['X', '', ''], ['', '', ''], ['', '', '']]
```

---

### ‚ñ∂ The sticky output function
<!-- Example ID: 4dc42f77-94cb-4eb5-a120-8203d3ed7604 --->

1\.

```py
funcs = []
results = []
for x in range(7):
    def some_func():
        return x
    funcs.append(some_func)
    results.append(some_func())  # Ch√∫ √Ω l·ªùi g·ªçi h√†m ·ªü ƒë√¢y

funcs_results = [func() for func in funcs]
```

**k·∫øt qu·∫£:**

```py
>>> results
[0, 1, 2, 3, 4, 5, 6]
>>> funcs_results
[6, 6, 6, 6, 6, 6, 6]
```
Ngay c·∫£ khi c√°c gi√° tr·ªã `x` kh√°c nhau trong m·ªçi v√≤ng l·∫∑p tr∆∞·ªõc khi ƒë·∫∑t `some_func` v√†o trong danh s√°ch `funcs`, t·∫•t c·∫£ c√°c h√†m ƒë·ªÅu tr·∫£ v·ªÅ 6.

2\.

```py
>>> powers_of_x = [lambda x: x**i for i in range(10)]
>>> [f(2) for f in powers_of_x]
[512, 512, 512, 512, 512, 512, 512, 512, 512, 512]
```

#### üí° L√Ω gi·∫£i

- Khi ƒë·ªãnh nghia m·ªôt h√†m b√™n trong m·ªôt v√≤ng l·∫∑p, v√≤ng l·∫∑p c√≥ bi·∫øn l·∫∑p ƒë∆∞·ª£c s·ª≠ d·ª•ng trong th√¢n h√†m, closure c·ªßa h√†m n√†y ƒë∆∞·ª£c gi∆°i h·∫°n cho bi·∫øn, ch∆∞ kh√¥ng ph·∫£i l√† gi√° tr·ªã. V√¨ v·∫≠y t·∫•t c·∫£ c√°c ham s·ª≠ d·ª•ng gi√° tr·ªã cu·ªëi cung ƒë∆∞·ª£c g√°n cho bi·∫øn n√†y ƒë·ªÉ th·ª±c hi·ªán t√≠nh to√°n. ƒê·ªÉ r√µ h∆°n ta th·∫•y ƒë∆∞·ª£c r·∫±ng bi·∫øn l·∫∑p `x` (v√† gi√° tr·ªã c·ªßa cung c·ªßa n√≥ nh·∫≠n ƒë∆∞·ª£c l√† `6`) trong v√≠ d·ª• th·ª© nh·∫•t ƒë∆∞·ª£c s·ª≠ d·ª•ng cho t·∫•t c·∫£ c√°c h√†m `func()`, h√†m n√†y s·∫Ω lu√¥n tr·∫£ v·ªÅ gi√° tr·ªã l√† `6` 

- ƒê·ªÉ th·ª±c hi·ªán ƒë∆∞·ª£c t√≠nh to√°n mong mu·ªën b·∫°n c√≥ th·ªÉ truy·ªÅn bi·∫øn l·∫∑p nh∆∞ l√† bi·∫øn ƒë∆∞·ª£c ƒë·∫∑t t√™n (named variable) cho h√†m. **Sao m√† n√≥ l·∫°i ch·∫°y ƒë√∫ng ƒë∆∞·ª£c?** ·ªüi v√¨ vi·ªác truy·ªÅn bi·∫øn nh∆∞ v·∫≠y s·∫Ω ƒë·ªãnh nghƒ©a l·∫°i bi·∫øn nay b√™n trong ph·∫°m vi c·ªßa h√†m.

    ```py
    funcs = []
    for x in range(7):
        def some_func(x=x):
            return x
        funcs.append(some_func)
    ```

    **K·∫øt qu·∫£:**
    ```py
    >>> funcs_results = [func() for func in funcs]
    >>> funcs_results
    [0, 1, 2, 3, 4, 5, 6]
    ```

---

### ‚ñ∂ B√†i to√°n con g√† v√† qu·∫£ tr·ª©ng *
<!-- Example ID: 60730dc2-0d79-4416-8568-2a63323b3ce8 --->
1\.
```py
>>> isinstance(3, int)
True
>>> isinstance(type, object)
True
>>> isinstance(object, type)
True
```

ƒê√¢u l√† l·ªõp c∆° b·∫£n cu·ªëi c√πng ? C√≤n nhi·ªÅu th·ª© g√¢y kh√≥ hi·ªÉu h∆°n n·ªØa sau ƒë√¢y

2\. 

```py
>>> class A: pass
>>> isinstance(A, A)
False
>>> isinstance(type, type)
True
>>> isinstance(object, object)
True
```

3\.

```py
>>> issubclass(int, object)
True
>>> issubclass(type, object)
True
>>> issubclass(object, type)
False
```


#### üí° Gi·∫£i th√≠ch

- `type` l√† m·ªôt [metaclass](https://realpython.com/python-metaclasses/) trong Python.
- **M·ªçi th·ª©** ƒë·ªÅu l√† m·ªôt ƒë·ªëi t∆∞·ª£ng `object` trong Python, bao g·ªìm c·∫£ c√°c l·ªõp (classes) c≈©ng nh∆∞ l√† c√°c hi·ªán th·ª±c c·ªßa ch√∫ng (instances).
- L·ªõp `type` l√† metaclass c·ªßa l·ªõp `object`, do ƒë√≥ m·ªçi l·ªõp (g·ªìm c·∫£ `type`) th·ª´a h∆∞·ªüng tr·ª±c ti·∫øp hay gi√°n ti·∫øp t·ª´ `object`.
- Kh√¥ng c√≥ m·ªôt l·ªõp n√†o n·∫±m gi·ªØa l·ªõp `object` v√† `type`. V·∫•n ƒë·ªÅ ƒë·ªëi v·ªõi c√°c ƒëo·∫°n m√£ ph√≠a tr√™n n·∫±m ·ªü c√°ch ta t√¨m c√°c m·ªëi quan h·ªá gi·ªØa c√°c l·ªõp trong Python (d√πng `issubclass` v√† `isinstance`). M·ªói quan h·ªá gi·ªØa `object` v√† `type` kh√¥ng th·ªÉ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong Python ƒë∆°n thu·∫ßn. Ch√≠nh x√°c h∆°n, nghƒ©a l√†,
    + L·ªõp A l√† m·ªôt hi·ªán th·ª±c c·ªßa l·ªõp B, v√† l·ªõp B l√† m·ªôt hi·ªán th·ª±c c·ªßa l·ªõp A.  
    + L·ªõp A l√† m·ªôt hi·ªán th·ª±c c·ªßa ch√≠nh n√≥.
- C√°c m·ªëi quan h·ªá gi·ªØa `object` v√† `type` (·ªü c·∫£ hai c·∫•p ƒë·ªô hi·ªán th·ª±c c≈©ng nh∆∞ ch√≠nh l·ªõp ƒë√≥) t·ªìn t·∫°i l√† do vi·ªác "ƒÉn gian" khi tri·ªÉn khai c√°c l·ªõp n√†y.
---

### ‚ñ∂ C√°c m·ªëi quan h·ªá c·ªßa l∆°p con (subclass)

<!-- Example ID: 9f6d8cf0-e1b5-42d0-84a0-4cfab25a0bc0 --->
**K·∫øt qu·∫£:**
```py
>>> from collections import Hashable
>>> issubclass(list, object)
True
>>> issubclass(object, Hashable)
True
>>> issubclass(list, Hashable)
False
```

M·ªëi quan h·ªá gi·ªØa c√°c l·ªõp con c√≥ t√≠nh b·∫Øc c·∫ßu kh√¥ng?(v√≠ d·ª•, n·∫øu `A` l√† l·ªõp con c·ªßa `B`, v√† `B` l√† l·ªõp con c·ªßa `C`, v·∫≠y `A` _n√™n_ l√† l·ªõp con c·ªßa `C`)

#### üí° L√Ω gi·∫£i:

* Trong Python m·ªëi quan h·ªá gi·ªØa c√° l·ªõp con kh√¥ng nh·∫•t thi·∫øt ph·∫£i mang t√≠nh b·∫Øc c·∫ßu. B·∫•t c·ª© ai c≈©ng ƒë∆∞·ª£c ph√©p ƒë·ªãnh nghƒ©a m·ªôt l·ªõp `__subclasscheck__` ri√™ng, tu·ª≥ √Ω trong m·ªôt si√™u l·ªõp (metaclass).
* Khi `issubclass(cls, Hashable)` ƒë∆∞·ª£c g·ªçi, n√≥ ch·ªâ t√¨m ph∆∞∆°ng th·ª©c non-Falsey "`__hash__`"  trong `cls` ho·∫∑c b·∫•t c∆∞ th∆∞ g√¨ n√≥ th·ª´a h∆∞·ªüng t·ª´ ƒë√≥.
* B·ªüi v√¨ `object` l√† m·ªôt ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ bƒÉm (hashable), c√≤n `list` thi kh√¥ng, n√™n n√≥ ph√° v·ª° t√≠nh b·∫Øc c·∫ßu.
* Gi·∫£i th√≠ch chi ti·∫øt c√≥ th·ªÉ xem [·ªü ƒë√¢y](https://www.naftaliharris.com/blog/python-subclass-intransitivity/).

---

### ‚ñ∂ All-true-ation *

<!-- Example ID: dfe6d845-e452-48fe-a2da-0ed3869a8042 -->

```py
>>> all([True, True, True])
True
>>> all([True, True, False])
False

>>> all([])
True
>>> all([[]])
False
>>> all([[[]]])
True
```

L√Ω do v√¨ sao m√† l√∫c th√¨ True m√† l√∫c th√¨ l·∫°i False

#### üí° Gi·∫£i th√≠ch:

- H√†m `all` t∆∞∆°ng ƒë∆∞∆°ng nh∆∞ ƒëo·∫°n m√£ d∆∞·ªõi

- ```py
  def all(iterable):
      for element in iterable:
          if not element:
              return False
      return True
  ```

- `all([])` tr·∫£ v·ªÅ `True` b·ªüi v√¨ danh s√°ch nay r·ªóng. 
- `all([[]])` tr·∫£ v·ªÅ `False` b·ªüi v√¨ `not []` l√† `True` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `not False` b·ªüi v√¨ danh s√°ch ph√≠a trong r·ªóng.
- `all([[[]]])` v√† c√°c bi·∫øn th·ªÉ ƒë·ªá quy cao h∆°n lu√¥n tr·∫£ v·ªÅ `True` b·ªüi v√¨ `not [[]]`, `not [[[]]]`, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi`not True`.
---

### ‚ñ∂ D·∫•u ph·∫©y l·∫° l√πng
<!-- Example ID: 31a819c8-ed73-4dcc-84eb-91bedbb51e58 --->
**K·∫øt qu·∫£ (< 3.6):**

```py
>>> def f(x, y,):
...     print(x, y)
...
>>> def g(x=4, y=5,):
...     print(x, y)
...
>>> def h(x, **kwargs,):
  File "<stdin>", line 1
    def h(x, **kwargs,):
                     ^
SyntaxError: invalid syntax (L·ªói c√∫ ph√°p kh√¥ng h·ª£p l·ªá)

>>> def h(*args,):
  File "<stdin>", line 1
    def h(*args,):
                ^
SyntaxError: invalid syntax (L·ªói c√∫ ph√°p kh√¥ng h·ª£p l·ªá)
```

#### üí° L√Ω gi·∫£i:

- D·∫•u ph·∫©y n·∫±m ·ªü cu·ªëi danh s√°ch c√°c tham s·ªë c·ªßa m·ªôt h√†m kh√¥ng ph·∫£i bao gi·ªù c≈©ng h·ª£p l·ªá.
-  Trong Python, danh s√°ch tham s·ªë ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b·ªüi m·ªôt ph·∫ßn c√°c d·∫•u ph·∫©y n·∫±m ph√≠a tr∆∞·ªõc v√† m·ªôt ph·∫ßn c√°c d·∫•y ph·∫©y n·∫±m ph√≠a sau. ƒêi·ªÅu nay m√¢u thu·∫´n v·ªõi c√°c t√¨nh hu·ªëng ·ªü ƒë√≥ m·ªôt d·∫•u ph·∫©y b·ªã m·∫Øc k·∫πt ·ªü gi·ªØa danh s√°ch, v√† ch·∫≥ng c√≥ m·ªôt lu·∫≠t n√†o ch·∫•p nh·∫≠n ƒëi·ªÅu n√†y c·∫£.
-  **Ch√∫ √Ω:** V·∫•n ƒë·ªÅ v·ªÅ d√¢u ph·∫©y ·ªü cu·ªëi  [ƒë√£ ƒë∆∞·ª£c s·ª≠a trong Python 3.6](https://bugs.python.org/issue9232). Th·∫£o lu·∫≠n [·ªü ƒë√¢y](https://bugs.python.org/issue9232#msg248399) cung c·∫•p nh·ªØng c√°ch dung kh√°c nhau c·ªßa d√¢y ph·∫©y ·ªü cu·ªëi.

---

### ‚ñ∂ Strings and the backslashes
<!-- Example ID: 6ae622c3-6d99-4041-9b33-507bd1a4407b --->
**K·∫øt qu·∫£:**
```py
>>> print("\"")
"

>>> print(r"\"")
\"

>>> print(r"\")
File "<stdin>", line 1
    print(r"\")
              ^
SyntaxError: EOL while scanning string literal

>>> r'\'' == "\\'"
True
```

#### üí° Gi·∫£i th√≠ch

- Trong m·ªôt string th√¥ng th∆∞·ªùng, d·∫•u xuy·ªác ng∆∞·ª£c ƒë∆∞·ª£c d√πng ƒë·ªÉ "escape" c√°c k√≠ t·ª± c√≥ m·ªôt √Ω nghƒ©a ƒë·∫∑c bi·ªát (nh∆∞ l√† d·∫•u tr√≠ch d·∫´n ƒë∆°n, d·∫•u tr√≠ch d·∫´n k√©p, va ch√≠nh d·∫•u xuy·ªác ng∆∞·ª£c).
    ```py
    >>> "wt\"f"
    'wt"f'
    ```
- ƒê·ªëi v·ªõi m·ªôt string th√¥ (raw string) (ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh b·ªüi ti·∫øp ƒë·∫ßu ng·ªØ `r`), d·∫•u xuy·ªác ng∆∞·ª£c.
    ```py
    >>> r'wt\"f' == 'wt\\"f'
    True
    >>> print(repr(r'wt\"f')
    'wt\\"f'

    >>> print("\n")

    >>> print(r"\\n")
    '\\\\n'
    ```
- C√≥ nghƒ©a l√† khi m·ªôt tr√¨nh ph√¢n t√≠ch c√∫ ph√°p g·∫∑p m·ªôt d·∫•u xuy·ªác ng∆∞·ª£c tron m·ªôt string th√¥, tr√¨nh n√†y mong ƒë·ª£i m·ªôt k√≠ t·ª± kh√°c ph√≠a sau n√≥. V√† tron tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta `print(r"\")`, d·∫•u xuy·ªác ng∆∞·ª£c v√¥ hi·ªáu ho√° (escape) d·∫•u tr√≠ch d·∫´n ·ªü ƒëu√¥i, ƒë·ªÉ l·∫°i cho tr√¨nh th√¥ng d·ªãch x·ª≠ l√Ω m√† kh√¥ng c√≥ d·∫•u tr√≠ch d·∫´n k·∫øt th√∫c (do ƒë√≥ g√¢y ra l·ªói v·ªÅ c√∫ ph√°p `SyntaxError`). ƒê√≥ l√† l√Ω do t·∫°i  sao c√°c d·∫•u xuy·ªác ng∆∞·ª£c kh√¥ng ch·∫°y ƒë∆∞·ª£c khi ·ªü cu·ªëi m·ªôt string th√¥.

---

### ‚ñ∂ not knot!
<!-- Example ID: 7034deb1-7443-417d-94ee-29a800524de8 --->
```py
x = True
y = False
```

**K·∫øt qu·∫£:**
```py
>>> not x == y
True
>>> x == not y
  File "<input>", line 1
    x == not y
           ^
SyntaxError: invalid syntax (L·ªói v·ªÅ c√∫ ph√°p)
```

#### üí° Gi·∫£i th√≠ch:

* Th·ª© t·ª± ∆∞u ti√™n c·ªßa c√°c ph√©p to√°n ·∫£nh h∆∞·ªüng t∆°i c√°ch m·ªôt c√¢u l·ªánh ƒë∆∞·ª£c th·ª±c thi, v√† ph√©p `==` c√≥ ƒë·ªô ∆∞u ti√™n cao h∆°n ph√©p `not` trong Python.
* V√¨ v·∫≠y `not x == y` t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `not (x == y)` r·ªìi t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `not (True == False)` v√† k·∫øt qu·∫£ l√†`True`.
* Nh∆∞ng `x == not y` g√¢y ra l·ªói c√∫ ph√°p `SyntaxError` b·ªüi v√¨ Python nghƒ© r·∫±ng n√≥ s·∫Ω th·ª±c hi·ªán `(x == not) y` ch·ª© kh√¥ng ph·∫£i l√† `x == (not y)` do ƒë√≥ b·∫°n m·ªõi g·∫∑p l·ªói v·ªÅ c√∫ ph√°p.
* Tr√¨nh ph√¢n t√≠ch c√∫ ph√°p mong ƒë·ª£i `not` l√† m·ªôt ph·∫ßn c·ªßa ph√©p to√°n `not in` (b·ªüi v√¨ c·∫£  `==` v√† `not in` c√≥ c√πng ƒë·ªô ∆∞u ti√™n), nh∆∞ng do trong tr∆∞∆°ng h·ª£p c·ªßa ch√∫ng ta, tr√¨nh x·ª≠ l√Ω kh√¥ng t√¨m th·∫•y `in` ƒë·∫±ng sau `not`, n√™n n√≥ g√¢y ra `SyntaxError`.

---

### ‚ñ∂ C√°c chu·ªói r∆∞·ª°i tr√≠ch d·∫´n
<!-- Example ID: c55da3e2-1034-43b9-abeb-a7a970a2ad9e --->
**K·∫øt qu·∫£:**
```py
>>> print('wtfpython''')
wtfpython
>>> print("wtfpython""")
wtfpython
>>> # C√°c c√¢u l·ªánh ph√≠a d∆∞·ªõi g·∫∑p l·ªói c√∫ ph√°p `SyntaxError` khi th·ª±c thi
>>> # print('''wtfpython')
>>> # print("""wtfpython")
  File "<input>", line 3
    print("""wtfpython")
                        ^
SyntaxError: EOF while scanning triple-quoted string literal (L·ªói c√∫ ph√°p khi s·ª≠ l√Ω chu·ªói ƒë∆∞·ª£c bao b·ªüi d·∫•u tr√≠ch d·∫´n)
```

#### üí° Gi·∫£i th√≠ch:
+ Python h·ªó tr·ª£ ng·∫ßm [gh√©p chu·ªói](https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation), v√≠ d·ª•,
  ```
  >>> print("wtf" "python")
  wtfpython
  >>> print("wtf" "") # or "wtf"""
  wtf
  ```

+ `'''` v√† `"""` l√† c√°c k√≠ hi·ªáu ph√¢n c√°ch chu·ªói trong Python, ch√∫ng t·∫°o ra l·ªói SyntaxError b·ªüi v√¨ tr√¨nh th√¥ng d·ªãch Python ch∆° ƒë·ª£i k√≠ hi·ªáu ph√¢n c√°ch k·∫øt th√∫c khi n√≥ d√≤ t√¨m chu·ªói k√≠ t·ª± tr√≠ch d·∫´n c√≥ ba d·∫•u nh√°y .
---

### ‚ñ∂ C√≥ g√¨ sai sai v·ªõi c√°c gi√° tr·ªã lu·∫≠n l√Ω (booleans)?
<!-- Example ID: 0bba5fa7-9e6d-4cd2-8b94-952d061af5dd --->
1\.

```py
# M·ªôt v√≠ d·ª• t√≠nh to√°n s·ªë l∆∞·ª£ng c√°c gi√° tr·ªã lu·∫≠n l√Ω v√†
# s√¥ nguy√™n trong m·ªôt danh s√°ch l·∫´n l·ªôn c√°c ki·ªÉu ph·∫ßn t·ª≠ kh√°c nhau.
mixed_list = [False, 1.0, "some_string", 3, True, [], False]
integers_found_so_far = 0
booleans_found_so_far = 0

for item in mixed_list:
    if isinstance(item, int):
        integers_found_so_far += 1
    elif isinstance(item, bool):
        booleans_found_so_far += 1
```

**K·∫øt qu·∫£:**
```py
>>> integers_found_so_far
4
>>> booleans_found_so_far
0
```


2\.
```py
>>> some_bool = True
>>> "wtf" * some_bool
'wtf'
>>> some_bool = False
>>> "wtf" * some_bool
''
```

3\.

```py
def tell_truth():
    True = False
    if True == False:
        print("I have lost faith in truth!")
```

**K·∫øt qu·∫£ (< 3.x):**

```py
>>> tell_truth()
I have lost faith in truth!
```

#### üí° L√Ω gi·∫£i:

* `bool` l√† l∆°p con c·ªßa `int` trong Python
    
    ```py
    >>> issubclass(bool, int)
    True
    >>> issubclass(int, bool)
    False
    ```
    
* V√† do v·∫≠y, `True` v√† `False` l√† c√°c hi·ªán th·ª±c (instances) c·ªßa `int`
  ```py
  >>> isinstance(True, int)
  True
  >>> isinstance(False, int)
  True
  ```

* Gi√° tr·ªã d·∫°ng s·ªë nguy√™n c·ªßa `True` l√† `1` v√† c·ªßa `False` l√† `0`.
  ```py
  >>> int(True)
  1
  >>> int(False)
  0
  ```

* Xem tr√™n [c√¢u tr·∫£ l·ªùi] tr√™n StackOverflow(https://stackoverflow.com/a/8169049/4354153) ƒë·ªÉ bi·∫øt l√Ω do.

* L√∫c ƒë·∫ßu, Python kh√¥ng c√≥ ki·ªÉu `bool` (ng∆∞·ªùi ta dung 0 cho false v√† c√°c gi√° tr·ªã kh√°c kh√¥ng nh∆∞ 1 cho true).  `True`, `False`, va ki·ªÉu `bool` ƒë∆∞·ª£c b·ªï sung trong c√° phi√™n b·∫£n 2.x, nh∆∞ng vi l√Ω do h·ªó tr·ª£ t∆∞∆°ng th√≠ch ng∆∞·ª£c (backward compatibility), `True` v√† `False` kh√¥ng th·ªÉ tr∆° th√†nh c√°c hƒÉng s·ªë (constants). Ch√∫ng ch·ªâ l√† c√°c bi·∫øn ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong Python, v√† ta c√≥ th·ªÉ g√°n l·∫°i gi√° tr·ªã cho ch√∫ng.

* Python 3 kh√¥ng h·ªó tr·ª£ t∆∞∆°ng th√≠ch ng∆∞·ª£c, v√† do v·∫≠y c√°c ƒëo·∫°n m√£ cu·ªëi cung kh√¥ng ch·∫°y ƒë∆∞·ª£c tr√™n  Python 3.x!
---

### ‚ñ∂ Class attributes and instance attributes
<!-- Example ID: 6f332208-33bd-482d-8106-42863b739ed9 --->
1\.
```py
class A:
    x = 1

class B(A):
    pass

class C(A):
    pass
```

**K·∫øt qu·∫£:**
```py
>>> A.x, B.x, C.x
(1, 1, 1)
>>> B.x = 2
>>> A.x, B.x, C.x
(1, 2, 1)
>>> A.x = 3
>>> A.x, B.x, C.x # C.x thay ƒë·ªïi, nh∆∞ng B.x kh√¥ng thay ƒë·ªïi
(3, 2, 3)
>>> a = A()
>>> a.x, A.x
(3, 3)
>>> a.x += 1
>>> a.x, A.x
(4, 3)
```

2\.
```py
class SomeClass:
    some_var = 15
    some_list = [5]
    another_list = [5]
    def __init__(self, x):
        self.some_var = x + 1
        self.some_list = self.some_list + [x]
        self.another_list += [x]
```

**K·∫øt qu·∫£:**

```py
>>> some_obj = SomeClass(420)
>>> some_obj.some_list
[5, 420]
>>> some_obj.another_list
[5, 420]
>>> another_obj = SomeClass(111)
>>> another_obj.some_list
[5, 111]
>>> another_obj.another_list
[5, 420, 111]
>>> another_obj.another_list is SomeClass.another_list
True
>>> another_obj.another_list is some_obj.another_list
True
```

#### üí° Gi·∫£i th√≠ch:

* C√°c bi·∫øn thu·ªôc v·ªÅ l·ªõp v√† c√°c bi·∫øn thu·ªôc v·ªÅ c√°c hi·ªán th·ª±c c·ªßa l∆°p (class instances) ƒë∆∞·ª£c x·ª≠ l√Ω n·ªôi t·∫°i nh∆∞ l√† c√°c t·ª´ ƒëi·ªÉn c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng l·ªõp. N·∫øu m·ªôt bi·∫øn kh√¥ng n·∫±m trong t·ª´ ƒëi·ªÉn c·ªßa l·ªõp hi·ªán h√†nh, n√≥ s·∫Ω ƒë∆∞·ª£c t√¨m trong c√°c l·ªõp cha. 
* Ph√©p `+=` thay ƒë·ªïi ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ bi·∫øn ƒë·ªïi (mutable) t·∫°i ch·ªó m√† kh√¥n c·∫ßn ph·∫£i t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi. V√¨ v·∫≠y thay ƒë·ªïi thu·ªôc t√≠nh cua m·ªôt hi·ªán th·ª±c ·∫£nh h∆∞·ªüng t·ªõi thu·ªôc t√≠nh c·ªßa c√°c hi·ªán th·ª±c kh√°c v√† thu·ªôc t√≠nh l·ªõp.
---

### ‚ñ∂ Non-reflexive class method *

<!-- Example ID: 3649771a-f733-413c-8060-3f9f167b83fd -->

```py
class SomeClass:
        def instance_method(self):
                pass
        
        @classmethod
        def class_method(cls):
                pass
```

**K·∫øt qu·∫£:**

```py
>>> SomeClass.instance_method is SomeClass.instance_method
True
>>> SomeClass.class_method is SomeClass.class_method
False
>>> id(SomeClass.class_method) == id(SomeClass.class_method)
True
```

#### üí° Gi·∫£i th√≠ch:

- L√Ω do l√† v√¨ `SomeClass.class_method is SomeClass.class_method` tr·∫£ v·ªÅ `False` l√† b·ªüi v√¨ decorator `@classmethod`. 

  ```py
  >>> SomeClass.instance_method
  <function __main__.SomeClass.instance_method(self)>
  >>> SomeClass.class_method
  <bound method SomeClass.class_method of <class '__main__.SomeClass'>
  ```

  M·ªói l·∫ßn truy c·∫≠p t·ªõi `SomeClass.class_method` l√† l·∫°i c√≥ m·ªôt ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c b·ªçc m·ªõi sinh ra (new bound method) 
-  `id(SomeClass.class_method) == id(SomeClass.class_method)` tr·∫£ v·ªÅ `True` b·ªüi v√¨ qu√° tr√¨nh c·∫•p ph√°t b·ªô nh·ªõ cho `class_method` l·∫ßn th·ª© hai x·∫£y ra t·∫°i cung m·ªôt v√≠ tr√≠ v·ªõi qu√° tr√¨nh gi·∫£i ph√≥ng b·ªô nh·ªõ ƒë·∫ßu ti√™n (Xem l·∫°i "Deep Down, we're all the same example" ƒë·ªÉ c√≥ l·ªùi gi·∫£i th√≠ch r√µ h∆°n). 
---


### ‚ñ∂ yielding None
<!-- Example ID: 5a40c241-2c30-40d0-8ba9-cf7e097b3b53 --->
```py
some_iterable = ('a', 'b')

def some_func(val):
    return "something"
```

**K·∫øt qu·∫£ (<= 3.7.x):**

```py
>>> [x for x in some_iterable]
['a', 'b']
>>> [(yield x) for x in some_iterable]
<generator object <listcomp> at 0x7f70b0a4ad58>
>>> list([(yield x) for x in some_iterable])
['a', 'b']
>>> list((yield x) for x in some_iterable)
['a', None, 'b', None]
>>> list(some_func((yield x)) for x in some_iterable)
['a', 'something', 'b', 'something']
```

#### üí° Gi·∫£i th√≠ch:
- ƒê√¢y l√† m·ªôt bug t·ªìn t·∫°i khi CPython x·ª≠ l√Ω `yield` trong c√°c generators v√† comprehensions.
- B·∫°n c√≥ th·ªÉ tham kh·∫£o th√™m v·ªÅ l·ªói n√†y t·∫°i ƒë√¢y: https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions
- B√°o c√°o v·ªÅ bug n√†y: http://bugs.python.org/issue10544
- Theo Python 3.8+  `yield` kh√¥ng ƒë∆∞·ª£c ph√©p n·∫±m b√™n trong  list comprehension v√† n·∫øu b·∫°n l√†m nh∆∞ v·∫≠y s·∫Ω t·∫°o ra l·ªói c√∫ ph√°p `SyntaxError`.

---


### ‚ñ∂ Yielding from... return! *
<!-- Example ID: 5626d8ef-8802-49c2-adbc-7cda5c550816 --->
1\.

```py
def some_func(x):
    if x == 3:
        return ["wtf"]
    else:
        yield from range(x)
```

**K·∫øt qu·∫£ (> 3.3):**

```py
>>> list(some_func(3))
[]
```

ƒê√°ng l·∫Ω ph·∫£i hi·ªÉn th·ªã `"wtf"` ch·ª© nh·ªâ? C√≥ ph·∫£i l√† do `yield from`? C√πng t√¨m hi·ªÉu th√™m n√†o,

2\.

```py
def some_func(x):
    if x == 3:
        return ["wtf"]
    else:
        for i in range(x):
          yield i
```

**K·∫øt qu·∫£:**

```py
>>> list(some_func(3))
[]
```

V·∫´n l·∫°i kh√¥ng in ra `"wtf"` .

#### üí° Gi·∫£i th√≠ch:

+ T·ª´ Python 3.3 tr·ªü ƒëi, ta c√≥ th·ªÉ s·ª≠ d·ª•ng `return`  v·ªõi c√°c gi√° tr·ªã b√™n trong c√°c generators (Xem th√™m [PEP380](https://www.python.org/dev/peps/pep-0380/)). C√°c [t√†i li·ªáu ch√≠nh th·ª©c](https://www.python.org/dev/peps/pep-0380/#enhancements-to-stopiteration) c≈©ng n√≥i nh∆∞ v·∫≠y,
> "... `return expr` tron m·ªôt generator t·∫°o ra ngo·∫°i l·ªá `StopIteration(expr)` khi tho√°t ra t·ª´ generator."

+ Trong tr∆∞·ªùng h·ª£p `some_func(3)`, ngo·∫°i l·ªá `StopIteration` ƒë∆∞·ª£c kh·ªüi l√™n ngay t·ª´ ƒë·∫ßu b·ªüi v√¨ c√¢u l·ªánh `return`. Ngo·∫°i l·ªá `StopIteration` ƒë∆∞·ª£c t·ª± ƒë·ªông b·∫Øt l·∫°i trong d√≤ng l·ªánh bao `list(...)` v√† trong v√≤ng l·∫∑p `for`. Do ƒë√≥, c·∫£ hai ƒëo·∫°n m√£ tr√™n ƒë·ªÅu tr·∫£ v·ªÅ m·ªôt danh s√°ch r·ªóng.

+ ƒê·ªÉ c√≥ ƒë∆∞·ª£c `["wtf"]` t·ª´ generator `some_func` b·∫°n c·∫ßn b·∫Øt ngo·∫°i l·ªá `StopIteration`,

  ```py
  try:
      next(some_func(3))
  except StopIteration as e:
      some_string = e.value
  ```

  ```py
  >>> some_string
  ["wtf"]
  ```

---

### ‚ñ∂ T√≠nh ph·∫£n x·∫° c·ªßa Nan *
<!-- Example ID: 59bee91a-36e0-47a4-8c7d-aa89bf1d3976 --->

1\.

```py
a = float('inf')
b = float('nan')
c = float('-iNf')  # C√°c strings n√†y kh√¥ng ph√¢n bi·ªát hoa hay th∆∞·ªùng
d = float('nan')
```

**K·∫øt qu·∫£:**

```py
>>> a
inf
>>> b
nan
>>> c
-inf
>>> float('some_other_string')
ValueError: could not convert string to float: some_other_string (L·ªói gi√° tr·ªã: Kh√¥ng th·ªÉ chuy·ªÉn ƒë·ªïi t·ª´ string sang float)
>>> a == -c # inf==inf
True
>>> None == None # None == None
True
>>> b == d # nh∆∞ng nan!=nan
False
>>> 50 / a
0.0
>>> a / a
nan
>>> 23 + b
nan
```

2\.

```py
>>> x = float('nan')
>>> y = x / x
>>> y is y # ƒë·ªãnh danh gi·ªëng nhau (c√πng tr·ªè v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng)
True
>>> y == y # G√≠a tr·ªã l·∫°i kh√¥ng b·∫±ng nhau
False
>>> [y] == [y] # Gi√° tr·ªã b·∫±ng nhau khi n·∫±m ·ªü trong m·ªôt list
True
```



#### üí° Gi·∫£i th√≠ch:

- `'inf'` v√† `'nan'` l√† c√°c strings ƒë·∫∑c bi·ªát (kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng), khi ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi sang ki·ªÉu `float` s·∫Ω t∆∞∆°ng ·ª©ng bi·ªÉu di·ªÖn cho gi√° tr·ªã v√¥ h·∫°n "infinity" hay kh√¥ng ph·∫£i l√† m·ªôt s·ªë "not a number".

- Theo chu·∫©n c·ªßa IEEE th√¨ ` NaN != NaN`, tu√¢n theo quy t·∫Øc tr√™n s·∫Ω ph√° v·ª° gi·∫£ ƒë·ªãnh v·ªÅ t√≠nh t∆∞∆°ng ph·∫£n c·ªßa m·ªôt ph·∫ßn t·ª≠ trong m·ªôt t·∫≠p trong Python v√≠ d·ª•. n·∫øu `x` l√† m·ªôt ph·∫ßn t·ª≠ c·ªßa m·ªôt t·∫≠p `list`, c√°c ph√©p to√°n tr√™n c√°c ph·∫ßn t·ª≠ c·ªßa t·∫≠p nh∆∞ l√† so s√°nh s·∫Ω d·ª±a tr√™n gi·∫£i ƒë·ªãnh r·∫±ng `x == x`.  Do gi·∫£ ƒë·ªãnh n√†y n√™n ƒë·ªãnh danh ƒë∆∞·ª£c so s√°nh ƒë·∫ßu ti√™n (do nhanh h∆°n) khi so s√°nh hai ph·∫ßn t·ª≠, v√† c√°c gi√° tr·ªã ƒë∆∞·ª£c so s√°nh ch·ªâ khi c√°c ƒë·ªãnh danh kh√¥ng kh·ªõp. V√≠ d·ª• sau s·∫Ω gi√∫p b·∫°n d·ªÖ hi·ªÉu h∆°n
  ```py
  >>> x = float('nan')
  >>> x == x, [x] == [x]
  (False, True)
  >>> y = float('nan')
  >>> y == y, [y] == [y]
  (False, True)
  >>> x == y, [x] == [y]
  (False, False)
  ```
  
 Do c√°c ƒë·ªãnh danh c·ªßa `x` v√† `y` kh√°c nhau, do ƒë√≥ gi√° tr·ªã c·ªßa ch√∫ng s·∫Ω ƒë∆∞·ª£c so s√°nh, m√† gi√° tr·ªã c·ªßa ch√∫ng kh√°c nhau trong v√≠ d·ª• n√†y; n√™n k·∫øt qu·∫£ tr·∫£ v·ªÅ l√† `False`. C·ª• th·ªÉ h∆°n, theo ti√™u chu·∫©n c·ªßa IEEE th√¨ `x` f va `y` ƒë·ªÉu c√≥ gi√° tr·ªã l√† `nan` khi ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi qua float, ` NaN != NaN` n√™n `x != y`, nh∆∞ng khi ƒë·∫∑t trong m·ªôt list th√¨ ƒë·ªãnh danh s·∫Ω ƒëc so s√°nh tr∆∞·ªõc n√™n `[x] == [y]`

- ƒê·ªçc th√™m: [Reflexivity, and other pillars of civilization](https://bertrandmeyer.com/2010/02/06/reflexivity-and-other-pillars-of-civilization/)

---

### ‚ñ∂ Mutating the immutable!

<!-- Example ID: 15a9e782-1695-43ea-817a-a9208f6bb33d --->

V√≠ d·ª• d∆∞·ªõi ƒë√¢y c√≥ v·∫ª t·∫ßm th∆∞·ªùng n·∫øu b·∫°n hi·ªÉu c√°ch c√°c tham chi·∫øu (references) ho·∫°t ƒë√¥ng trong Python.
```py
some_tuple = ("A", "tuple", "with", "values")
another_tuple = ([1, 2], [3, 4], [5, 6])
```

**K·∫øt qu·∫£:**
```py
>>> some_tuple[2] = "change this"
TypeError: 'tuple' object does not support item assignment (L·ªói v·ªÅ ki·ªÉu: ƒë·ªëi t∆∞·ª£ng 'tuple' kh√¥ng h·ªó tr·ª£ ph√©p g√°n ph·∫ßn t·ª≠)
>>> another_tuple[2].append(1000) # D√≤ng n√†y kh√¥ng b·ªã l·ªói
>>> another_tuple
([1, 2], [3, 4], [5, 6, 1000])
>>> another_tuple[2] += [99, 999]
TypeError: 'tuple' object does not support item assignment (L·ªói v·ªÅ ki·ªÉu: ƒë·ªëi t∆∞·ª£ng 'tuple' kh√¥ng h·ªó tr·ª£ ph√©p g√°n ph·∫ßn t·ª≠)
>>> another_tuple
([1, 2], [3, 4], [5, 6, 1000, 99, 999])
```

T√¥i ƒë√£ nghƒ© r·∫±ng c√°c tuples th√¨ b·∫•t bi·∫øn (immutable) ...
#### üí° Gi·∫£i th√≠ch:

* Tr√≠ch t·ª´ https://docs.python.org/2/reference/datamodel.html

    > C√°c chu·ªói b·∫•t bi·∫øn
        M·ªôt ƒë·ªëi t∆∞·ª£ng ki·ªÉu chu·ªói b·∫•t bi·∫øn kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã c·ªßa n√≥ sau khi ƒë∆∞·ª£c t·∫°o. (N·∫øu ƒë·ªëi t∆∞·ª£ng n√†y ch·ª©a c√°c tham chi·∫øu t·ªõi c√°c ƒë·ªëi t∆∞·ª£ng kh√°c, nh·ªØng ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c; tuy th·∫ø, t·∫≠p h·ª£p c√°c ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c tr·ªè tr·ª±c ti·∫øp b·ªüi m·ªôt ƒë·ªëi t∆∞·ª£ng b·∫•t bi·∫øn kh√¥ng th·ªÉ thay ƒë·ªïi .)

* To√°n t·ª≠ `+=` thay ƒë·ªïi list t·∫°i ch·ªó. Ph√©p g√°n ph·∫ßn t·ª≠ kh√¥ng th·ª±c hi·ªán ƒë∆∞·ª£c, nh∆∞ng khi ngo·∫°i l·ªá x·∫£y ra, ph·∫ßn t·ª≠ ƒë√£ ƒë∆∞·ª£c thay ƒë·ªïi ngay t·∫°i ch·ªó.

---

### ‚ñ∂ The disappearing variable from outer scope
<!-- Example ID: 7f1e71b6-cb3e-44fb-aa47-87ef1b7decc8 --->

```py
e = 7
try:
    raise Exception()
except Exception as e:
    pass
```

**K·∫øt qu·∫£ (Python 2.x):**
```py
>>> print(e)
# Kh√¥ng in ra k·∫øt qu·∫£ n√†o c·∫£
```

**K·∫øt qu·∫£ (Python 3.x):**
```py
>>> print(e)
NameError: name 'e' is not defined (L·ªói t√™n bi·∫øn kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a)
```

#### üí° Gi·∫£i th√≠ch:

* Source: https://docs.python.org/3/reference/compound_stmts.html#except

  Khi m·ªôt ngo·∫°i l·ªá ƒë∆∞·ª£c g√°n s·ª≠ d·ª•ng ƒë√≠ch ƒë∆∞·ª£c ƒë·ªãnh nghia b·ªüi `as`, ngo·∫°i l·ªá n√†y ƒë∆∞·ª£c d·ªçn d·∫πp ·ªü cu·ªëi c√¢u `except`. Nh∆∞ v·∫≠y th√¨

  ```py
  except E as N:
      foo
  ```

  s·∫Ω ƒë∆∞·ª£c hi·ªÉu nh∆∞ sau

  ```py
  except E as N:
      try:
          foo
      finally:
          del N
  ```

  
    ƒêi·ªÅu n√†y c√≥ nghƒ©a la ngo·∫°i l·ªá ph·∫£i ƒë∆∞·ª£c g√°n cho m·ªôt c√°i t√™n kh√°c ƒë·ªÉ ta c√≥ th·ªÉ t√¨m th·∫•y n√≥ sau c√¢u except. C√°c ngo·∫°i l·ªá ƒë∆∞·ª£c d·ªçn d·∫πp b·ªüi v√¨ v·ªõi truy l·ªói (traceback) ƒë∆∞·ª£c g√°n cho ch√∫ng, ch√∫ng h√¨nh th√†nh n√™n m·ªôt v√≤ng tham chi·∫øu b√™n trong khung ngƒÉn x·∫øp (stack frame), gi·ªØ t·∫•t c·∫£ c√°c bi·∫øn c·ª•c b·ªô kh√¥ng b·ªã xo√° ƒëi cho ƒë·∫øn khi vi·ªác thu th·∫≠p r√°c ti·∫øp theo ti·∫øp di·ªÖn.

* C√°c c√¢u n√†y kh√¥ng ƒë∆∞·ª£c t√≠nh ph·∫°m vi trong Python. M·ªçi th∆∞ trong v√≠ d·ª• nay ƒë·ªÅu n√†m trong c√πng m·ªôt ph·∫°m vi, v√† bi·∫øn `e` b·ªã xo√° ƒëi b·ªüi v√¨ ngo·∫°i l·ªá `except`. ƒêi·ªÅu t∆∞∆°ng t·ª± nh∆∞ v·∫≠y kh√¥ng ƒë√∫ng v·ªõi c√°c h√†m c√≥ c√°c n·ªôi ph·∫°m vi (inner-scopes) ri√™ng bi·ªát. V√≠ d·ª• sau s·∫Ω cho ta th·∫•y:

     ```py
     def f(x):
         del(x)
         print(x)

     x = 5
     y = [5, 4, 3]
     ```

     **K·∫øt qu·∫£:**
     ```py
     >>>f(x)
     UnboundLocalError: local variable 'x' referenced before assignment
     >>>f(y)
     UnboundLocalError: local variable 'x' referenced before assignment
     >>> x
     5
     >>> y
     [5, 4, 3]
     ```

* Trong Python 2.x, bi·∫øn `e` ƒë∆∞·ª£c g√°n cho m·ªôt hi·ªán th·ª±c `Exception()`, khi b·∫°n in ra bi·∫øn n√†y, n√≥ kh√¥ng hi·ªÉn th·ªã g√¨ c·∫£

    **K·∫øt qu·∫£ (Python 2.x):**
    ```py
    >>> e
    Exception()
    >>> print e
    # Kh√¥ng in ra g√¨ c·∫£!
    ```

---


### ‚ñ∂ The mysterious key type conversion
<!-- Example ID: 00f42dd0-b9ef-408d-9e39-1bc209ce3f36 --->
```py
class SomeClass(str):
    pass

some_dict = {'s': 42}
```

**K·∫øt qu·∫£:**
```py
>>> type(list(some_dict.keys())[0])
str
>>> s = SomeClass('s')
>>> some_dict[s] = 40
>>> some_dict # Gi√° tr·ªã mong ƒë·ª£i: Hai c·∫∑p kho√° v√† gi√° tr·ªã kh√°c nhau
{'s': 40}
>>> type(list(some_dict.keys())[0])
str
```

#### üí° Gi·∫£i th√≠ch:

* C·∫£ ƒë·ªëi t∆∞·ª£ng `s` v√† string `"s"` khi ƒë∆∞·ª£c bƒÉm (hash) s·∫Ω cho ra c√πng m·ªôt gi√° tr·ªã ·ªüi `SomeClass` th·ª´a k·∫ø ph∆∞∆°ng th·ª©c `__hash__` c·ªßa l·ªõp `str`.
* `SomeClass("s") == "s"`  b·∫±ng `True` b·ªüi v√¨ `SomeClass` c≈©ng th·ª´a k·∫ø ph∆∞∆°ng th·ª©c `__eq__` t·ª´ l·ªõp `str` .
* B·ªüi v√¨ c·∫£ hai ƒë·ªëi t∆∞·ª£ng n√†y khi bƒÉm cho ra c√πng gi√° tr·ªã v√† b·∫±ng nhau n√™n ch√∫ng ƒë∆∞·ª£c bi·ªÉu di·ªÖn b·ªüi c√πng m·ªôt kho√° trong t·ª´ ƒëi·ªÉn.
* ƒê·ªÉ c√≥ ƒë∆∞·ª£c k·∫øt qu·∫£ nh∆∞ mong mu·ªën v·ªõi hai c·∫∑p gi√° kho√° v√† gi√° tr·ªã kh√°c nhau, ch√∫ng ta c√≥ th·ªÉ ƒë·ªãnh nghƒ©a ph∆∞∆°ng th·ª©c `__eq__` trong `SomeClass`

  ```py
  class SomeClass(str):
    def __eq__(self, other):
        return (
            type(self) is SomeClass
            and type(other) is SomeClass
            and super().__eq__(other)
        )

    # Khi ch√∫ng ta ta ƒë·ªãnh nghƒ©a m·ªôt ph∆∞∆°ng th·ª©c __eq__ tu·ª≥ ch·ªânh, Python t·ª± ƒë·ªông d·ª´ng vi·ªác th·ª´a k·∫ø
    # v√† ch√∫ng ta c≈©ng c·∫ßn ƒë·ªãnh nghƒ©a ph∆∞∆°n th·ª©c __hash__ ,
    __hash__ = str.__hash__

  some_dict = {'s':42}
  ```

  **K·∫øt qu·∫£:**
  ```py
  >>> s = SomeClass('s')
  >>> some_dict[s] = 40
  >>> some_dict
  {'s': 40, 's': 42}
  >>> keys = list(some_dict.keys())
  >>> type(keys[0]), type(keys[1])
  (__main__.SomeClass, str)
  ```

---

### ‚ñ∂ Let's see if you can guess this?
<!-- Example ID: 81aa9fbe-bd63-4283-b56d-6fdd14c9105e --->
```py
a, b = a[b] = {}, 5
```

**K·∫øt qu·∫£:**
```py
>>> a
{5: ({...}, 5)}
```

#### üí° Gi·∫£i th√≠ch:

* D·ª±a tr√™n [ngu·ªìn tham kh·∫£o ng√¥n ng·ªØ Python](https://docs.python.org/2/reference/simple_stmts.html#assignment-statements), c√°c c√¢u l·ªánh g√°n s·∫Ω c√≥ c√°ch khai b√°o nh∆∞ sau
  ```
  (target_list "=")+ (expression_list | yield_expression)
  ```
  v√†
M·ªôt c√¢u l·ªánh g√°n ƒë√°nh gi√° m·ªôt danh s√°ch bi·ªÉu di·ªÖn(nh·ªõ r·∫±ng ƒë√¢y c√≥ th·ªÉ l√† m·ªôt bi·ªÉu di·ªÖn ƒë∆°n l·∫ª ho·∫∑c m·ªôt danh s√°ch c√°c bi·ªÉu di·ªÖn ƒë∆∞·ª£c ph√¢n c√°ch b·ªüi d·∫•u ph·∫©y, ƒë·ªëi v·ªõi tr∆∞·ªùng h·ª£p ph√≠a sau th√¨ sainh ra m·ªôt tuple) v√† g√°n ƒë·ªëi t∆∞·ª£ng k·∫øt qu·∫£ ƒë∆°n cho m·ªói m·ªôt danh s√°ch m·ª•c ti√™u, t·ª´ tr√°i sang ph·∫£i. 


* To√°n t·ª≠ `+` trong `(target_list "=")+` c√≥ nghƒ©a l√† c√≥ th·ªÉ c√≥ **m·ªôt hay nhi·ªÅu** danh s√°ch m·ª•c ti√™u (target lists). Trong tr∆∞·ªùng h·ª£p n√†y, c√°c danh s√°ch m·ª•c ti√™u l√† `a, b` v√† `a[b]` (ch√∫ √Ω l√† danh s√°ch bi·ªÉu di·ªÖn ch·ªâ c√≥ ch√≠nh x√°c m·ªôt, trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta l√† `{}, 5`)


* Sau khi bi·ªÉu di·ªÖn danh s√°ch ƒë∆∞·ª£c ƒë√°nh gi√°, gi√° tr·ªã c·ªßa n√≥ ƒë∆∞·ª£c gi·∫£i n√©n th√†nh c√°c danh s√°ch ƒë∆∞·ª£c gi·∫£i n√©n th√†nh c√°c danh s√°ch m·ª•c ti√™u t·ª´ **tr√°i sang ph·∫£i**. Do ƒë√≥, trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta, ƒë·∫ßu ti√™n tuple `{}, 5` ƒë∆∞·ª£c gi·∫£i n√©n ra `a, b` v√† ch√∫ng ta c√≥ `a = {}` v√† `b = 5`.

* `a` ƒë∆∞·ª£c g√°n cho `{}`, ƒë√¢y l√† m·ªôt ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c gi√° tr·ªã (mutable object).

* Danh s√°ch m·ª•c ti√™u th·ª© hai l√† `a[b]` (b·∫°n c√≥ th·ªÉ c√≥ th·ªÉ nghƒ© ta s·∫Ω g·∫∑p m·ªôt l·ªói b·ªüi v√¨ c·∫£ `a` v√† `b` ƒë·ªÅu ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong c√°c c√¢u l·ªánh tr∆∞·ªõc ƒë√≥. Nh∆∞ng nh·ªõ r·∫±ng, ch√∫ng ta ƒë√£ g√°n `a` b·∫±ng `{}` v√† `b` b·∫±ng `5`).

* B√¢y gi·ªù, ch√∫ng ta thi·∫øt l·∫≠p kho√° `5` trong t·ª´ ƒëi·ªÉn v·ªõi gi√° tr·ªã l√† tuple `({}, 5)` t·∫°o ra m·ªôt tham chi·∫øu v√≤ng tr√≤n (`{...}` trong k·∫øt qu·∫£ tr·ªè t·ªõi c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng m√† `a` ƒë√£ ƒëang tham chi·∫øu). M·ªôt v√≠ d·ª• ƒë∆°n gi·∫£n h∆°n v·ªÅ tham chi·∫øu v√≤ng tr√≤n l√†
  ```py
  >>> some_list = some_list[0] = [0]
  >>> some_list
  [[...]]
  >>> some_list[0]
  [[...]]
  >>> some_list is some_list[0]
  True
  >>> some_list[0][0][0][0][0][0] == some_list
  True
  ```
 T∆∞∆°ng t·ª± l√† trong v√≠ d·ª• c·ªßa ch√∫ng ta (`a[b][0]` l√† c√πng ƒë·ªëi t∆∞·ª£ng v·ªõi `a`)

* T·ªïng k·∫øt l·∫°i, b·∫°n c√≥ th·ªÉ chia v√≠ d·ª• n√†y ra
  ```py
  a, b = {}, 5
  a[b] = a, b
  ```
  V√† tham chi·∫øu v√≤ng c√≥ th·ªÉ ƒë∆∞·ª£c bi·ªán h·ªô b·ªüi m·ªôt ƒëi·ªÅu l√† `a[b][0]` l√† ƒë·ªëi t∆∞·ª£ng gi·ªëng  `a`
  ```py
  >>> a[b][0] is a
  True
  ```

---
---

## Section: Slippery Slopes

### ‚ñ∂ Modifying a dictionary while iterating over it
<!-- Example ID: b4e5cdfb-c3a8-4112-bd38-e2356d801c41 --->
```py
x = {0: None}

for i in x:
    del x[i]
    x[i+1] = None
    print(i)
```

**K·∫øt qu·∫£ (√Åp d·ª•ng cho c√°c phi√™n b·∫£n Python 2.7- Python 3.5):**

```
0
1
2
3
4
5
6
7
```

V√≤ng l·∫∑p ch·∫°y ƒë√∫ng *t√°m* l·∫ßn r·ªìi d·ª´ng l·∫°i

#### üí° Gi·∫£i th√≠ch:

* Vi·ªác l·∫∑p v√† ch·ªânh s·ª≠a m·ªôt t·ª´ ƒëi·ªÉn c√πng m·ªôt l√∫c kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£.
* C√≥ t√°m l·∫ßn ch·∫°y b·ªüi v√¨ t·∫°i th·ªùi ƒëi·ªÉm d·ª´ng ƒë√≥ l√† l√∫c t·ª´ ƒëi·ªÉn ƒëi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc ƒë·ªÉ gi·ªØ th√™m nhi·ªÅu kho√° h∆°n (ch√∫ng ta c√≥ t√°m ph·∫ßn t·ª´ xo√°, do ƒë√≥ ƒëi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc l√† c·∫ßn thi·∫øt). ƒê√¢y th·ª±c s·ª± l√† m·ªôt chi ti·∫øt trong tri·ªÉn khai.
* C√°ch c√°c kho√° b·ªã xo√° ƒë∆∞·ª£c x·ª≠ l√Ω v√† khi nao th√¨ vi·ªác ƒëi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc di·ªÖn ra s·∫Ω kh√°c bi·ªát ƒë·ªëi v·ªõi c√°c phi√™n b·∫£n Python kh√°c nhau
* Do ƒë√≥ c√°c phi√™n b·∫£n Python l·ªõn h∆°n 2.7 v√† nh·ªè h∆°n 3.5, s·ªë l∆∞·ª£ng c√° kho√° c√≥ th·ªÉ gi·ªØ dao ƒë·ªông t·ª´ 8 (nh∆∞ng khi b·∫°n ch·∫°y th√¨ con s·ªë n√†y s·∫Ω kh√¥ng thay ƒë·ªïi gi·ªØa c√°c l·∫ßn ch·∫°y). B·∫°n c√≥ th·ªÉ xem th√™m c√°c th·∫£o lu·∫≠n kh√°c ·ªü [ƒë√¢y](https://github.com/satwikkansal/wtfpython/issues/53) ho·∫∑c tr√™n Stackoverflow t·∫°i [ƒë√¢y](https://stackoverflow.com/questions/44763802/bug-in-python-dict)
* T·ª´ phi√™n b·∫£n 3.7.6 tr·ªü ƒëi, b·∫°n s·∫Ω g·∫∑p ngo·∫°i l·ªá `RuntimeError: dictionary keys changed during iteration` khi b·∫°n c·ªë g·∫Øng th·ª≠ v√≠ d·ª• tr√™n.
---

### ‚ñ∂ Stubborn `del` operation
<!-- Example ID: 777ed4fd-3a2d-466f-95e7-c4058e61d78e --->
<!-- read-only -->

```py
class SomeClass:
    def __del__(self):
        print("Deleted!")
```

**K·∫øt qu·∫£:**
1\.
```py
>>> x = SomeClass()
>>> y = x
>>> del x # this should print "Deleted!"
>>> del y
Deleted!
```


C√≥ th·ªÉ b·∫°n ƒëo√°n ƒë∆∞·ª£c l√†m sao m√† `__del__` kh√¥ng ƒë∆∞·ª£c g·ªçi khi ta c·ªë g·∫Øng xo√° `x` trong l·∫ßn ƒë·∫ßu ti√™n. H√£y th·ª≠ th√™m 
2\.
```py
>>> x = SomeClass()
>>> y = x
>>> del x
>>> y # check if y exists Ki·ªÉm tra y c√≥ t·ªìn t·∫°i
<__main__.SomeClass instance at 0x7f98a1a67fc8>
>>> del y # Nh∆∞ l·∫ßn tr∆∞·ªõc, ƒë√°ng l·∫Ω k·∫øt qu·∫£ n√™n l√† in ra "Deleted!"
>>> globals() # nh∆∞ng kh√¥ng, ta kh√¥ng c√≥ ƒë∆∞·ª£c k·∫øt qu·∫£ nh∆∞ mong mu·ªën. C√πng ki·ªÉm tra t·∫•t c·∫£ c√°c bi·∫øn to√†n c·ª•c v√† x√°c nh·∫≠n 
Deleted!
{'__builtins__': <module '__builtin__' (built-in)>, 'SomeClass': <class __main__.SomeClass at 0x7f98a1a5f668>, '__package__': None, '__name__': '__main__', '__doc__': None}
```

Ok gi·ªù th√¨ n√≥ ƒë√£ ƒë∆∞·ª£c xo√° :confused:

#### üí° Gi·∫£i th√≠ch:
+ `del x` kh√¥ng g·ªçi tr·ª±c ti·∫øp `x.__del__()`.
+ Khi `del x` ƒë∆∞·ª£c ch·∫°y, Python xo√°  t√™n  `x` kh·ªèi ph·∫°m vi hi·ªán h√†nh v√† gi·∫£m bi·∫øn ƒë·∫øm tham chi·∫øu c·ªßa ƒë·ªëi t∆∞·ª£ng ƒëi 1. `__del__()` ƒë∆∞·ª£c g·ªçi ch·ªâ khi bi·∫øn ƒë·∫øm n√†y gi·∫£m xu·ªëng 0.
+ Tron ƒëo·∫°n m√£ th·ª© hai, `__del__()` kh√¥ng ƒë∆∞·ª£c g·ªçi b·ªüi v√¨ c√¢u l·ªánh tr∆∞·ªõc ƒë√≥ (`>>> y`) t·∫°o m·ªôt tham chi·∫øu kh√°c t·ªõi c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng (c·ª• th·ªÉ l√†, bi·∫øn `_` tr·ªè t·ªõi gi√° tr·ªã k·∫øt qu·∫£ c·ªßa m·ªôt bi·ªÉu di·ªÖn kh√¥ng ph·∫£i `None` tron REPL), do ƒë√≥ ngƒÉn bi·∫øn ƒë·∫øm tham chi·∫øu gi·∫£m v·ªÅ 0 khi th·ª±c hi·ªán `del y`
+ G·ªçi `globals` (th·ª±c ra th√¨ th·ª±c hi·ªán b·∫•t c·ª© th·ª© g√¨ t·∫°o ra k·∫øt qu·∫£ kh√¥ng ph·∫£i l√† `None`) l√†m cho `_` tham chi·∫øu t·ªõi k·∫øt qu·∫£ m·ªõi, b·ªè ƒëi tham chi·∫øu hi·ªán t·ªìn t·∫°i. B√¢y gi·ªù th√¨ bi·∫øn ƒë·∫øm tham chi·∫øu gi·∫£m ve 0 v√† b·∫°n c√≥ th·ªÉ t·ª´ "Deleted!" ƒë∆∞·ª£c hi·ªÉn th·ªã.
---

### ‚ñ∂ The out of scope variable
<!-- Example ID: 75c03015-7be9-4289-9e22-4f5fdda056f7 --->
```py
a = 1
def some_func():
    return a

def another_func():
    a += 1
    return a
```

**K·∫øt qu·∫£:**
```py
>>> some_func()
1
>>> another_func()
UnboundLocalError: local variable 'a' referenced before assignment (tham chi·∫øu t·ªõi 'a' tr∆∞·ªõc khi g√°n gi√° tr·ªã)
```

#### üí° Gi·∫£i th√≠ch:
* Khi b·∫°n g√°n gi√° tr·ªã cho m·ªôt bi·∫øn trong m·ªôt ph·∫°m vi, th√¨ bi·∫øn n√†y tr·ªü th√†nh c·ª•c b·ªô cho ph·∫°m vi ƒë√≥. Do ƒë√≥ `a` tr·ªü th√†nh c·ª•c b·ªô ƒë·ªëi v·ªõi `another_func`, nh∆∞ng n√≥ ch∆∞a ƒë∆∞·ª£c kh·ªüi t·∫°o trong c√πng ph·∫°m vi, n√™n ta g·∫∑p l·ªói v·ªÅ tham chi·∫øu ph√≠a tr√™n.
* ƒê·ªçc [b√†i n√†y](http://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html) ƒë·ªÉ h·ªçc v·ªÅ c√°ch ho·∫°t ƒë·ªông c·ªßa c√°c kh√¥ng gian t√™n (namespaces) v√† vi·ªác ph√¢n gi·∫£i ph·∫°m vi trong Python.
* ƒê·ªÉ thay ƒë·ªïi bi√™n b√™n ngo√†i ph·∫°m vi `a` b√™n trong h√†m `another_func`, s·ª≠ d·ª•ng t·ª´ kho√° `global`
  ```py
  def another_func()
      global a
      a += 1
      return a
  ```

  **K·∫øt qu·∫£:**
  ```py
  >>> another_func()
  2
  ```

---

### ‚ñ∂ Deleting a list item while iterating
<!-- Example ID: 4cc52d4e-d42b-4e09-b25f-fbf5699b7d4e --->
```py
list_1 = [1, 2, 3, 4]
list_2 = [1, 2, 3, 4]
list_3 = [1, 2, 3, 4]
list_4 = [1, 2, 3, 4]

for idx, item in enumerate(list_1):
    del item

for idx, item in enumerate(list_2):
    list_2.remove(item)

for idx, item in enumerate(list_3[:]):
    list_3.remove(item)

for idx, item in enumerate(list_4):
    list_4.pop(idx)
```

**K·∫øt qu·∫£:**
```py
>>> list_1
[1, 2, 3, 4]
>>> list_2
[2, 4]
>>> list_3
[]
>>> list_4
[2, 4]
```

V√¨ sao l·∫°i c√≥ k·∫øt qu·∫£ l√† `[2, 4]`?
#### üí° Gi·∫£i th√≠ch:

* Thay ƒë·ªïi ƒë·ªëi t∆∞·ª£ng trong khi l·∫∑p kh√¥ng ph·∫£i l√† m·ªôt c√°ch l√†m hay. C√°ch th·ª±c hi·ªán ƒë√∫ng l√† l·∫∑p qua m·ªôt b·∫£n sao c·ªßa ch√≠nh ƒë·ªëi t∆∞·ª£ng ƒë√≥ nh∆∞ tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng `list_3[:]`

     ```py
     >>> some_list = [1, 2, 3, 4]
     >>> id(some_list)
     139798789457608
     >>> id(some_list[:]) # Ch√∫ √Ω r·∫±ng Python t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi sinh ra t·ª´ vi·ªác c·∫Øt (slice) list.
     139798779601192
     ```

**S·ª± kh√°c bi·ªát gi·ªØa `del`, `remove`, v√† `pop`:**
* `del var_name` ch·ªâ lo·∫°i b·ªè s·ª± c√≥ mƒÉt c·ªßa `var_name` kh·ªèi kh√¥ gian t√™n c·ª•c b·ªô v√† to√†n c·ª•c (ƒë√≥ la l√Ω do t·∫°i sao `list_1` kh√¥ng b·ªã ·∫£nh h∆∞·ªüng ) 
* `remove` lo·∫°i b·ªè gi√° tr·ªã ƒë∆∞·ª£c kh·ªõp ƒë·∫ßu ti√™n, kh√¥ng ph·∫£i t·∫°i m·ªôt ch·ªâ s·ªë c·ª• th·ªÉ, ngo·∫°i l·ªá `ValueError` s·∫Ω x·∫£y ra n·∫øu gi√° tr·ªã mu·ªën lo·∫°i b·ªè kh√¥ng t·ªìn t·∫°i.
* `pop` lo·∫°i b·ªè ph·∫ßn t·ª≠ c·ªßa danh s√°ch ·ªü m·ªói ch·ªâ s·ªë c·ª• th·ªÉ v√† tr·∫£ v·ªÅ ph·∫ßn t·ª´ ƒë√≥, `pop` s·∫Ω kh·ªüi l√™n `IndexError` n·∫øu n√≥ nh·∫≠n m·ªôt ch·ªâ s·ªë kh√¥ng h·ª£p l·ªá

**T·∫°i sao k·∫øt qu·∫£ l·∫°i ra `[2, 4]`?**
- Vi·ªác l·∫∑p qua danh s√°ch ƒë∆∞·ª£c th·ª±c hi·ªán theo t·ª´ng ch·ªâ s·ªë m·ªôt, v√† khi ch√∫ng ta lo·∫°i b·ªè `1` kh·ªèi `list_2` hay `list_4`, c√°c danh s√°ch n√†y s·∫Ω c√≤n l·∫°i `[2, 3, 4]`. C√°c ph·∫ßn t·ª≠ c√≤n l·∫°i trong list ƒë∆∞·ª£c d·ªãch chuy·ªÉn sang tr√°i, v√≠ d·ª• nh∆∞ `2` s·∫Ω c√≥ ch·ªâ s·ªë l√† 0, v√† `3` c√≥ ch·ªâ s·ªë l√† 1. Do l·∫ßn l·∫∑p ti·∫øp theo s·∫Ω x·ª≠ l√Ω ph·∫ßn t·ª≠ c√≥ ch·ªâ s·ªë l√† 1 (`3`), n√™n ph·∫ßn t·ª≠ t·∫°i ch·ªâ s·ªë 0 (`2`) s·∫Ω b·ªã b·ªè qua. 

* Xem th√™m t·∫°i StackOverflow [thread](https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it) explaining the example
* V√† xem th√™m ·ªü ƒë√¢y ƒë·ªÉ c√≥ c√°c v√≠ d·ª• li√™n quan t·ªõi c√°c t·ª´ ƒëi·ªÉn [thread](https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items).

---


### ‚ñ∂ Lossy zip of iterators *
<!-- Example ID: c28ed154-e59f-4070-8eb6-8967a4acac6d --->

```py
>>> numbers = list(range(7))
>>> numbers
[0, 1, 2, 3, 4, 5, 6]
>>> first_three, remaining = numbers[:3], numbers[3:]
>>> first_three, remaining
([0, 1, 2], [3, 4, 5, 6])
>>> numbers_iter = iter(numbers)
>>> list(zip(numbers_iter, first_three)) 
[(0, 0), (1, 1), (2, 2)]
# so far so good, let's zip the remaining
>>> list(zip(numbers_iter, remaining))
[(4, 3), (5, 4), (6, 5)]
```
Ph·∫ßn t·ª≠  `3` trong `numbers` ƒë√¢u?
#### üí° Gi·∫£i th√≠ch:

- Theo t√†i li·ªáu c·ªßa Python [docs](https://docs.python.org/3.3/library/functions.html#zip), tri·ªÉn khai g·∫ßn nh·∫•t c·ªßa h√†m zip nh∆∞ sau,
    ```py
    def zip(*iterables):
        sentinel = object()
        iterators = [iter(it) for it in iterables]
        while iterators:
            result = []
            for it in iterators:
                elem = next(it, sentinel)
                if elem is sentinel: return
                result.append(elem)
            yield tuple(result)
    ```
- H√†m n√†y nh·∫≠n v√†o m·ªôt s·ªë tu·ª≥ √Ω c√°c ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ l·∫∑p (iterable objects), th√™m m·ªói ph·∫ßn t·ª≠ c·ªßa c√°c ƒë·ªëi t∆∞·ª£ng n√†y v√†o danh s√°ch `result` th√¥ng qua vi·ªác g·ªçi h√†m `next` tr√™n ƒë·ªëi t∆∞·ª£ng n√†y, v√† d∆∞ng l·∫°i khi ƒë√¥i t∆∞·ª£ng n√†y h·∫øt c√°c ph·∫ßn t·ª≠ ƒë·ªÉ l·∫∑p   
- Ch√∫ √Ω l√† khi b·∫•t c·ª© ƒë·ªëi t∆∞·ª£ng l·∫∑p n√†o c·∫°n ki·ªát ƒë·ªëi t∆∞·ª£ng l·∫∑p, c√°c ph·∫ßn t·ª≠ t·ªìn t·∫°i trong danh s√°ch `result` ƒë∆∞·ª£c b·ªè qua. ƒê√≥ l√† nh·ªØng g√¨ x·∫£y v·ªõi `3` trong `numbers_iter`
- ƒê·ªÉ th·ª±c hi·ªán ƒë√∫ng, ta c·∫ßn l√†m nh∆∞ sau
    ```py
    >>> numbers = list(range(7))
    >>> numbers_iter = iter(numbers)
    >>> list(zip(first_three, numbers_iter))
    [(0, 0), (1, 1), (2, 2)]
    >>> list(zip(remaining, numbers_iter))
    [(3, 3), (4, 4), (5, 5), (6, 6)]
    ```
    Tham s·ªë ƒë·∫ßu ti√™n c·ªßa zip n√™n l√† ƒë·ªëi t∆∞·ª£ng c√≥ s·ªë l∆∞·ª£ng c√°c ph·∫ßn t·ª≠ √≠t nh·∫•t.

---

### ‚ñ∂ Loop variables leaking out!
<!-- Example ID: ccec7bf6-7679-4963-907a-1cd8587be9ea --->
1\.
```py
for x in range(7):
    if x == 6:
        print(x, ': for x inside loop')
print(x, ': x in global')
```

**K·∫øt qu·∫£:**
```py
6 : for x inside loop
6 : x in global
```

Nh∆∞ng m√† `x` ch∆∞a bao gi·ªù ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b√™n ngo√†i v√≤ng l·∫∑p...
2\.
```py
# L·∫ßn n√†y kh·ªüi t·∫°o x tr∆∞·ªõc
x = -1
for x in range(7):
    if x == 6:
        print(x, ': for x inside loop')
print(x, ': x in global')
```

**K·∫øt qu·∫£:**
```py
6 : for x inside loop
6 : x in global
```

3\.

**K·∫øt qu·∫£ (Python 2.x):**
```py
>>> x = 1
>>> print([x for x in range(5)])
[0, 1, 2, 3, 4]
>>> print(x)
4
```

**K·∫øt qu·∫£ (Python 3.x):**
```py
>>> x = 1
>>> print([x for x in range(5)])
[0, 1, 2, 3, 4]
>>> print(x)
1
```

#### üí° Gi·∫£i th√≠ch:

- Trong Python, v√≤ng l·∫∑p for s·ª≠ d·ª•ng ph·∫°m vi m√† ch√∫ng t·ªìn t·∫°i b√™n trong v√† ƒë·ªÉ bi·∫øn l·∫∑p (loop-variable) ƒë√£ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a c·ªßa ch√∫ng ƒë·∫±ng sau. ƒêi·ªÅu n√†y c≈©ng √°p d·ª•ng khi ch√∫ng ta ƒë·ªãnh nghƒ©a r√µ bi·∫øn l·∫∑p trong kh√¥ng gian t√™n to√†n c·ª•c tr∆∞·ªõc ƒë√≥. Trong tr∆∞·ªùng h·ª£p n√†y v√≤ng l·∫∑p s·∫Ω g·∫Øn l·∫°i bi·∫øn ƒë√£ t·ªìn t·∫°i. 

- S·ª± kh√°c nhau gi·ªØa k·∫øt qu·∫£ c·ªßa tr√¨nh th√¥ng d·ªãch Python 2.x v√† Python 3.x li√™n quan t·ªõi v√≠ d·ª• list comprehension c√≥ th·ªÉ ƒë∆∞·ª£c gi·∫£i th√≠ch b·∫±ng t√†i li·ªáu [Nh·ªØng ƒëi·ªÅu m·ªõi trong Python 3.0](https://docs.python.org/3/whatsnew/3.0.html):

    > "List comprehensions kh√¥ng c√≤n h·ªó tr·ª£ d·∫°ng c√∫ ph√°p `[... for var in item1, item2, ...]`. H√£y S·ª≠ d·ª•ng `[... for var in (item1, item2, ...)]`. C√≤n n·ªØa, ch√∫ √Ω r·∫±ng list comprehensions c√≥ c√°c ng·ªØ nghƒ©a kh√°c nhau: ch√∫ng kh√° g·∫ßn v·ªõi c√∫ ph√°p ƒë·∫∑c bi·ªát c·ªßa m·ªôt bi·ªÉu di·ªÖn generator b√™n trong h√†m x√¢y d·ª±ng `list()` , v√† c·ª• th·ªÉ l√†,  c√°c bi·∫øn ƒëi·ªÅu khi·ªÉn v√≤ng l·∫∑p kh√¥ng c√≤n b·ªã r√≤ r·ªâ (leaked) trong ph·∫°m vi xung quanh"

---

### ‚ñ∂ Beware of default mutable arguments!
<!-- Example ID: 7d42dade-e20d-4a7b-9ed7-16fb58505fe9 --->

```py
def some_func(default_arg=[]):
    default_arg.append("some_string")
    return default_arg
```

**K·∫øt qu·∫£:**
```py
>>> some_func()
['some_string']
>>> some_func()
['some_string', 'some_string']
>>> some_func([])
['some_string']
>>> some_func()
['some_string', 'some_string', 'some_string']
```

#### üí° Gi·∫£i th√≠ch:

- C√°c tham s·ªë m·∫∑c ƒë·ªãnh c√≥ ki·ªÉu gi√° tr·ªã thay ƒë·ªïi ƒë∆∞·ª£c (mutable) c·ªßa c√°c h√†m trong Python kh√¥ng th·ª±c s·ª± ƒë∆∞·ª£c kh·ªüi t·∫°o m·ªói l·∫ßn ta g·ªçi h√†m. Thay v√†o ƒë√≥ gi√° tr·ªã tr·ªã m·ªõi ƒë∆∞·ª£c g√°n cho ch√∫ng ƒë∆∞·ª£c s·ª≠ d·ª•ng v·ªõi vai tr√≤  gi√° tr·ªã m·∫∑c ƒë·ªãnh. Khi ta truy·ªÅn v√†o h√†m `some_func` gi√° tr·ªã `[]`, gi√° tr·ªã m·∫∑c ƒë·ªãnh c·ªßa bi·∫øn `default_arg` kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng, do ƒë√≥ h√†m tr·∫£ v·ªÅ k·∫øt qu·∫£ nh∆∞  mong ƒë·ª£i

    ```py
    def some_func(default_arg=[]):
        default_arg.append("some_string")
        return default_arg
    ```

    **K·∫øt qu·∫£:**
    ```py
    >>> some_func.__defaults__ # Thu·ªôc t√≠nh n√†y s·∫Ω cho ta th·∫•y c√°c gi√° tr·ªã m·∫∑c ƒë·ªãnh c·ªßa tham s·ªë truy·ªÅn v√†o h√†m 
    ([],)
    >>> some_func()
    >>> some_func.__defaults__
    (['some_string'],)
    >>> some_func()
    >>> some_func.__defaults__
    (['some_string', 'some_string'],)
    >>> some_func([])
    >>> some_func.__defaults__
    (['some_string', 'some_string'],)
    ```

- ƒê·ªÉ tr√°nh c√°c bugs li√™n quan t·ªõi c√°c tham s·ªë c√≥ th·ªÉ thay ƒë·ªïi gi√° tr·ªã, ta c√≥ th·ªÉ g√°n cho ch√∫ng gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† `None` v√† sau ƒë√≥ vi·∫øt m√£ ki·ªÉm tra xem gi√° tr·ªã truy·ªÅn v√†o h√†m c√≥ t∆∞∆°ng ·ª©ng v·ªõi tham s·ªë ƒë√≥ hay kh√¥ng. V√≠ d·ª•:

    ```py
    def some_func(default_arg=None):
        if default_arg is None:
            default_arg = []
        default_arg.append("some_string")
        return default_arg
    ```

---

### ‚ñ∂ Catching the Exceptions
<!-- Example ID: b5ca5e6a-47b9-4f69-9375-cda0f8c6755d --->
```py
some_list = [1, 2, 3]
try:
    # C√¢u l·ªánh sau s·∫Ω g√¢y ra ngo·∫°i l·ªá ``IndexError``
    print(some_list[4])
except IndexError, ValueError:
    print("Caught!")

try:
    # C√¢u l·ªánh sau s·∫Ω g√¢y ra ngo·∫°i l·ªá ``ValueError``
    some_list.remove(4)
except IndexError, ValueError:
    print("Caught again!")
```

**K·∫øt qu·∫£ (Python 2.x):**
```py
Caught!

ValueError: list.remove(x): x not in list
```

**K·∫øt qu·∫£ (Python 3.x):**
```py
  File "<input>", line 3
    except IndexError, ValueError:
                     ^
SyntaxError: invalid syntax
```

#### üí° Gi·∫£i th√≠ch

* ƒê·ªÉ th√™m nhi·ªÅu ngo·∫°i l·ªá tr√™n c√πng m·ªôt d√≤ng except, b·∫°n c·∫ßn truy·ªÅn v√†o m·ªôt tuple v·ªõi c√°c ngo·∫°i l·ªá ƒë∆∞·ª£c li·ªát k√™ b√™n trong hai d·∫•u ngo·∫∑c ƒë∆°n. V√≠ d·ª•,
  ```py
  some_list = [1, 2, 3]
  try:
     # This should raise a ``ValueError``
     some_list.remove(4)
  except (IndexError, ValueError), e:
     print("Caught again!")
     print(e)
  ```
  **K·∫øt qu·∫£ (Python 2.x):**
  ```
  Caught again!
  list.remove(x): x not in list
  ```
  **K·∫øt qu·∫£ (Python 3.x):**
  ```py
    File "<input>", line 4
      except (IndexError, ValueError), e:
                                       ^
  IndentationError: unindent does not match any outer indentation level
  ```

* T√°ch bi·ªát ngo·∫°i l·ªá v·ªõi bi·∫øn d√πng d·∫•u ph·∫©y ƒë√£ kh√¥n c√≤n ƒë∆∞·ª£c √°p d·ª•ng n·ªØa v√† khi vi·∫øt nh∆∞ v·∫≠y thi code s·∫Ω kh√¥ng ch·∫°y trong Python 3; C√°ch l√†m ƒë√∫ng l√† s·ª≠ d·ª•ng `as`. V√≠ d·ª•, 
  ```py
  some_list = [1, 2, 3]
  try:
      some_list.remove(4)

  except (IndexError, ValueError) as e:
      print("Caught again!")
      print(e)
  ```
  **K·∫øt qu·∫£:**
  ```
  Caught again!
  list.remove(x): x not in list
  ```

---

### ‚ñ∂ Same operands, different story!
<!-- Example ID: ca052cdf-dd2d-4105-b936-65c28adc18a0 --->
1\.
```py
a = [1, 2, 3, 4]
b = a
a = a + [5, 6, 7, 8]
```

**K·∫øt qu·∫£:**
```py
>>> a
[1, 2, 3, 4, 5, 6, 7, 8]
>>> b
[1, 2, 3, 4]
```

2\.
```py
a = [1, 2, 3, 4]
b = a
a += [5, 6, 7, 8]
```

**K·∫øt qu·∫£:**
```py
>>> a
[1, 2, 3, 4, 5, 6, 7, 8]
>>> b
[1, 2, 3, 4, 5, 6, 7, 8]
```

#### üí° Gi·∫£i th√≠ch:

* `a += b` kh√¥ng ph·∫£i lu√¥n lu√¥n cho ra k·∫øt qu·∫£ gi·ªëng nh∆∞ `a = a + b`. C√°c l∆°p *c√≥ th·ªÉ* tri·ªÉn khai ph√©p *`op=`* kh√°c nhau.

* Bi·ªÉu di·ªÖn `a = a + [5,6,7,8]` sinh ra m·ªôt danh s√°ch m·ªõi v√† tham chi·∫øu c·ªßa `a` tr·ªè t·ªõi danh s√°ch m·ªõi, v√† ƒë·ªÉ cho `b` kh√¥ng ƒë·ªïi.
* Bi·ªÉn di·ªÖn `a += [5,6,7,8]` th·ª±c s·ª± t∆∞∆°ng ƒë∆∞∆°ng v∆°i h√†m "m·ªü r·ªông" √°p d·ª•ng cho danh s√°ch ∆° ƒë√≥ `a` v√† `b` v·∫´n tr·ªè v·ªÅ c√πng m·ªôt danh s√°ch ƒë√£ ƒë∆∞·ª£c thay ƒë·ªïi ngay t·∫°i ch·ªó.

---

### ‚ñ∂ Name resolution ignoring class scope
<!-- Example ID: 03f73d96-151c-4929-b0a8-f74430788324 --->
1\.
```py
x = 5
class SomeClass:
    x = 17
    y = (x for i in range(10))
```

**K·∫øt qu·∫£:**
```py
>>> list(SomeClass.y)[0]
5
```

2\.
```py
x = 5
class SomeClass:
    x = 17
    y = [x for i in range(10)]
```

**K·∫øt qu·∫£ (Python 2.x):**
```py
>>> SomeClass.y[0]
17
```

**K·∫øt qu·∫£ (Python 3.x):**
```py
>>> SomeClass.y[0]
5
```

#### üí° Gi·∫£i th√≠ch
- C√°c ph·∫°m vi ƒë∆∞·ª£c l·ªìng b√™n trong ƒë·ªãnh nghƒ©a c·ªßa l·ªõp l·ªù ƒëi c√°c t√™n (bi·∫øn) ƒë∆∞·ª£c khai b√°o ·ªü m·ª©c l·ªõp (bi·∫øn g√°n v·ªõi l·ªõp)
- Bi·ªÖn di·ªÖn b·ªô sinh (generator) c√≥ ph·∫°m vi ri√™ng c·ªßa ch√∫ng
- B·∫Øt ƒë·∫ßu t·ª´ Python 3.X, c√°c list comprehensions c≈©ng c√≥ ph·∫°m ri√™ng c·ªßa ch√∫ng

---

### ‚ñ∂ Needles in a Haystack *

<!-- Example ID: 52a199b1-989a-4b28-8910-dff562cebba9 --->

T√¥i ch∆∞a bao gi·ªù g·∫∑p m·ªôt l·∫≠p tr√¨nh vi√™n Python kinh nghi·ªám n√†o m√† ch∆∞a g·∫∑p ph·∫£i m·ªôt trong nh·ªØng t√¨nh hu·ªëng √©o le d∆∞·ªõi ƒë√¢y
1\.

```py
x, y = (0, 1) if True else None, None
```

**K·∫øt q·ªßa:**

```py
>>> x, y  # K·∫øt qu·∫£ mong ƒë·ª£i (0, 1)
((0, 1), None)
```

2\.

```py
t = ('one', 'two')
for i in t:
    print(i)

t = ('one')
for i in t:
    print(i)

t = ()
print(t)
```

**K·∫øt qu·∫£:**

```py
one
two
o
n
e
tuple()
```

3\.

```
ten_words_list = [
    "some",
    "very",
    "big",
    "list",
    "that"
    "consists",
    "of",
    "exactly",
    "ten",
    "words"
]
```

**K·∫øt qu·∫£**

```py
>>> len(ten_words_list)
9
```

4\. Not asserting strongly enough

```py
a = "python"
b = "javascript"
```

**K·∫øt qu·∫£:**

```py
# G·ªçi m·ªôt c√¢u l·ªánh assert v·ªõi m·ªôt th√¥ng ƒëi·ªáp ch·ªâ r√µ l√Ω do b·ªã l·ªói
>>> assert(a == b, "Both languages are different")
# Kh√¥ng th·∫•y m·ªôt ngo·∫°i l·ªá l·ªói AssertionError 
```

5\.

```py
some_list = [1, 2, 3]
some_dict = {
  "key_1": 1,
  "key_2": 2,
  "key_3": 3
}

some_list = some_list.append(4) 
some_dict = some_dict.update({"key_4": 4})
```

**K·∫øt qu·∫£:**

```py
>>> print(some_list)
None
>>> print(some_dict)
None
```

6\.

```py
def some_recursive_func(a):
    if a[0] == 0:
        return 
    a[0] -= 1
    some_recursive_func(a)
    return a

def similar_recursive_func(a):
        if a == 0:
                return a
        a -= 1
        similar_recursive_func(a)
        return a
```

**K·∫øt qu·∫£:**

```py
>>> some_recursive_func([5, 0])
[0, 0]
>>> similar_recursive_func(5)
4
```

#### üí° Gi·∫£i th√≠ch:

* Tr∆∞·ªùng h·ª£p th·ª© nh·∫•t c√°ch vi·∫øt ƒë·ªÉ c√≥ k·∫øt qu·∫£ nh∆∞ mong ƒë·ª£i l√† `x, y = (0, 1) if True else (None, None)`.

* Trong tr∆∞·ªùng h·ª£p th·ª© hai c√°ch vi·∫øt ƒë√∫ng ph·∫£i l√† `t = ('one',)` ho·∫∑c `t = 'one',` (c√≥ th√™m d·∫•u ph·∫©y ph√≠a sau) n·∫øu kh√¥ng tr√¨nh th√¥ng d·ªãch s·∫Ω xem `t` nh∆∞ l√† m·ªôt `str` v√† l·∫∑p qua t·ª´ng k√≠ t·ª± c·ªßa string n√†y.

* `()` l√† m·ªôt c·∫∑p k√≠ hi·ªáu ƒë·∫∑c bi·ªát ƒë·ªãnh nghƒ©a m·ªôt `tuple` r·ªóng. 

* Trong v√≠ d·ª• th·ª© ba, b·∫°n c√≥ th·ªÉ ƒë·ªÉ √Ω th·∫•y thi·∫øu m·ªôt d·∫•u ph·∫©y ƒë·∫±ng sau ph·∫ßn t·ª≠ th·ª© 5 (`"that"`) c·ªßa danh s√°ch. Do ƒë√≥, Python ng·∫ßm n·ªëi hai string li·ªÅn k·ªÅ,
  ```py
  >>> ten_words_list
  ['some', 'very', 'big', 'list', 'thatconsists', 'of', 'exactly', 'ten', 'words']
  ```

* Kh√¥ng c√≥ ngo·∫°i l·ªá `AssertionError` trong v√≠ d·ª• th·ª© t∆∞ b·ªüi v√¨ thay v√¨ ki·ªÉm tra t√≠nh ƒë√∫ng sai c·ªßa bi·ªÉu di·ªÖn `a == b`, ch√∫ng ta ki·ªÉm tra m·ªôt tuple. V√≠ d·ª• d∆∞·ªõi ƒë√¢y l√†m r√µ h∆°n ƒëi·ªÅu n√†y,
  ```py
  >>> a = "python"
  >>> b = "javascript"
  >>> assert a == b
  Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
  AssertionError
  
  >>> assert (a == b, "Values are not equal")
  <stdin>:1: SyntaxWarning: assertion is always true, perhaps remove parentheses?
  
  >>> assert a == b, "Values are not equal"
  Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
  AssertionError: Values are not equal
  ```

* Trong v√≠ d·ª• th·ª© nƒÉm, h·∫ßu h·∫øt c√°c ph∆∞∆°ng th·ª©c thay ƒë·ªïi c√°c ph·∫ßn t·ª≠ c·ªßa c√°c ƒë·ªëi t∆∞·ª£ng chu·ªói (sequence) hay √°nh x·∫° nh∆∞ `list.append`, `dict.update`,`list.sort`, v√† v√¢n v√¢n. thay ƒë·ªïi ngay t·∫°i ch·ªó (in-place) c√°c ƒë·ªëi t∆∞·ª£ng n√†y v√† tr·∫£ v·ªÅ  `None`. Nguy√™n nh√¢n s√¢u xa l√† nh·∫±m tƒÉng hi·ªáu nƒÉng th√¥ng qua vi·ªác tr√°nh t·∫°o b·∫£n sao c·ªßa ƒë·ªëi t∆∞·ª£ng n·∫øu h√†nh ƒë·ªông ƒë∆∞·ª£c th·ª±c hi·ªán tr√™n ƒë·ªëi t∆∞·ª£ng mang t√≠nh "ngay t·∫°i ch·ªó" (Tham kh·∫£o th√™m t·∫°i [ƒë√¢y](http://docs.python.org/2/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list)).
* Tr∆∞·ªùng h·ª£p cu·ªëi c√πng d∆∞·ªùng nh∆∞ kh√° r√µ r·∫±ng, ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ thay ƒë·ªïi gi√° tr·ªã (nh∆∞ `list` ) c√≥ th·ªÉ ƒë∆∞·ª£c thay ƒë·ªïi trong h√†m, v√† vi·ªác g√°n bi·∫øn n√†y l·∫°i cho m·ªôt ƒë·ªëi t∆∞·ª£ng kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã ()`a -= 1` kh√¥ng l√†m thay ƒë·ªïi gi√° tr·ªã.
* L∆∞u √Ω ƒë·∫øn nh·ªØng ƒëi·ªÅu k·ªÉ tr√™n c√≥ th·ªÉ gi√∫p b·∫°n ti·∫øt ki·ªám ƒë∆∞·ª£c nhi·ªÅu th·ªùi gian cho vi·ªác t√¨m s·ª≠a l·ªói trong c√°c ch∆∞∆°ng tr√¨nh l·ªõn.
---


### ‚ñ∂ Splitsies *
<!-- Example ID: ec3168ba-a81a-4482-afb0-691f1cc8d65a --->
```py
# th·ª±c hi·ªán c√¢u l·ªánh n√†y
>>> 'a'.split()
['a']

# c≈©ng gi·ªëng nh∆∞
>>> 'a'.split(' ')
['a']

# nh∆∞ng khi ch·∫°y
>>> len(''.split())
0

# l·∫°i cho k·∫øt qu·∫£ kh√¥ng gi·ªëng nhau
>>> len(''.split(' '))
1
```

#### üí° Gi·∫£i th√≠ch:

- Ta d∆∞·ªùng nh∆∞ th·∫•y ngay l√† k√≠ t·ª± ph√¢n c√°ch m·∫∑c ƒë·ªãnh d√πng cho split l√† m·ªôt kho·∫£ng c√°ch ƒë∆°n (single space) `' '`, nh∆∞ng trong t√†i li·ªáu [docs] (https://docs.python.org/2.7/library/stdtypes.html#str.split)
    >  N·∫øu k√≠ t·ª± ph√¢n c√°ch kh√¥ng ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh ho·∫∑c l√†  `None`, m·ªôt gi·∫£i thu·∫≠t chia t√°ch kh√°c ƒë∆∞·ª£c √°p d·ª•ng: c√°c kho·∫£ng tr·∫Øng li√™n t·ª•c ƒë∆∞·ª£c xem nh∆∞ l√† m·ªôt ph√¢n c√°ch ƒë∆°n, v√† k·∫øt qu·∫£ s·∫Ω ch·ª©a c√°c strings kh√°c r·ªóng t·∫°i ph·∫ßn ƒë·∫ßu ho·∫∑c cu·ªëi n·∫øu string c√≥ c√°c kho·∫£ng tr·∫Øng ·ªü ph·∫ßn ƒë·∫ßu v√† ƒëu√¥i. Do v·∫≠y, ph√¢n t√°ch m·ªôt string r·ªóng ho·∫∑c m·ªôt string ch·ª©a ch·ªâ kho·∫£ng tr·∫Øng v·ªõi m·ªôt ph√¢n t√°ch None s·∫Ω tr·∫£ v·ªÅ `[]`.
    > N·∫øu c√≥ k√≠ t·ª± ph√¢n c√°ch, c√°c d·∫•u ph√¢n c√°ch li√™n t·ª•c kh√¥ng ƒë∆∞·ª£c nh√≥m l·∫°i c√πng nhau v√† ƒë∆∞·ª£c coi l√† ƒë·ªÉ ph√¢n ƒë·ªãnh c√°c strings r·ªóng (v√≠ d·ª•, `'1,,2'.split(',')` tr·∫£ v·ªÅ `['1', '', '2']`). Ph√¢n t√°ch m·ªôt string r·ªóng v·ªõi m·ªôt k√≠ t·ª± ph√¢n t√°ch ch·ªâ ƒë·ªãnh tr·∫£ v·ªÅ  `['']`.
- V√≠ d·ª• d∆∞·ªõi ƒë√¢y ch·ªâ ra c√°ch c√°c kho·∫£ng tr·∫Øng ƒë∆∞·ª£c x·ª≠ l√Ω,
    ```py
    >>> ' a '.split(' ')
    ['', 'a', '']
    >>> ' a '.split()
    ['a']
    >>> ''.split(' ')
    ['']
    ```

---

### ‚ñ∂ Wild imports *
<!-- Example ID: 83deb561-bd55-4461-bb5e-77dd7f411e1c --->
<!-- read-only -->

```py
# File: module.py

def some_weird_name_func_():
    print("works!")

def _another_weird_name_func():
    print("works!")

```

**K·∫øt qu·∫£**

```py
>>> from module import *
>>> some_weird_name_func_()
"works!"
>>> _another_weird_name_func()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '_another_weird_name_func' is not defined
```

#### üí° Gi·∫£i th√≠ch:

- Ch√∫ng ta ƒë∆∞·ª£c khuy√™n l√† tr√°nh s·ª≠ d·ª•ng c√°c wildcard imports. V√¨ v·ªõi ch√∫ng, c√°c t√™n (v√≠ d·ª• h√†m) v·ªõi d·∫•u g·∫°ch ch√¢n ph√≠a tr∆∞·ªõc s·∫Ω kh√¥ng ƒë∆∞·ª£c import. ƒêi·ªÅu n√†y g√¢y ra l·ªói trong l√∫c code ch·∫°y
- Khi ch√∫ng ta d√πng `from ... import a, b, c`, l·ªói `NameError` s·∫Ω kh√¥n x·∫£y ra n·ªØa.
    ```py
    >>> from module import some_weird_name_func_, _another_weird_name_func
    >>> _another_weird_name_func()
    works!
    ```
- N·∫øu b·∫°n th·ª±c s·ª± mu·ªën s·ª≠ d·ª•ng wildcard imports, b·∫°n se ph·∫£i ƒë·ªãnh nghƒ©a bi·∫øn `__all__` trong module c·ªßa b·∫°n, bi·∫øn n√†y s·∫Ω ch∆∞a m·ªôt danh s√°ch c√°c ƒë·ªëi t∆∞·ª£ng c√¥ng c·ªông ƒë∆∞·ª£c import khi s·ª≠ d·ª•ng wildcard imports.
    ```py
    __all__ = ['_another_weird_name_func']

    def some_weird_name_func_():
        print("works!")

    def _another_weird_name_func():
        print("works!")
    ```
    **K·∫øt qu·∫£**

    ```py
    >>> _another_weird_name_func()
    "works!"
    >>> some_weird_name_func_()
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    NameError: name 'some_weird_name_func_' is not defined (h√†m "some_weird_name_func_" kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a)
    ```

---

### ‚ñ∂ All sorted? *

<!-- Example ID: e5ff1eaf-8823-4738-b4ce-b73f7c9d5511 -->

```py
>>> x = 7, 8, 9
>>> sorted(x) == x
False
>>> sorted(x) == sorted(x)
True

>>> y = reversed(x)
>>> sorted(y) == sorted(y)
False
```

#### üí° Gi·∫£i th√≠ch:

- Ph∆∞∆°ng th·ª©c `sorted` lu√¥n lu√¥n tr·∫£ v·ªÅ m·ªôt list, v√† trong Python so s√°nh gi·ªØa lists v√† tuples lu√¥n lu√¥n cho ra k·∫øt qu·∫£ `False`.
- ```py
  >>> [] == tuple()
  False
  >>> x = 7, 8, 9
  >>> type(x), type(sorted(x))
  (tuple, list)
  ```

- Kh√°c v·ªõi `sorted`, ph∆∞∆°ng th·ª©c `reversed` tr·∫£ v·ªÅ m·ªôt iterator. T·∫°i sao? B·ªüi v√¨ vi·ªác s·∫Øp x·∫øp y√™u c·∫ßu iterator c√≥ th·ªÉ ƒë∆∞·ª£c thay ƒë·ªïi ngay t·∫°i ch·ªó (in-place) ho·∫∑c s·ª≠ d·ª•ng m·ªôt b·ªô ch·ª©a b·ªï sung (m·ªôt list), tr√°i l·∫°i vi·ªác ƒë·∫£o chi·ªÅu (reversing) c√≥ th·ªÉ ho·∫°t ƒë·ªông ƒë∆°n gi·∫£n l√† l·∫∑p t·ª´ ch·ªâ s·ªë cu·ªëi v·ªÅ ph·∫ßn t·ª≠ ƒë·∫ßu
- Do ƒë√≥ khi so s√°nh `sorted(y) == sorted(y)`, l·ªùi g·ªçi ƒë·∫ßu ti√™n `sorted()` s·∫Ω ti√™u th·ª• iterator `y`, v√† l·ªùi g·ªçi ti·∫øp theo s·∫Ω tr·∫£ v·ªÅ m·ªôt list r·ªóng. 

  ```py
  >>> x = 7, 8, 9
  >>> y = reversed(x)
  >>> sorted(y), sorted(y)
  ([7, 8, 9], [])
  ```

---

### ‚ñ∂ Midnight time doesn't exist?
<!-- Example ID: 1bce8294-5619-4d70-8ce3-fe0bade690d1 --->
```py
from datetime import datetime

midnight = datetime(2018, 1, 1, 0, 0)
midnight_time = midnight.time()

noon = datetime(2018, 1, 1, 12, 0)
noon_time = noon.time()

if midnight_time:
    print("Time at midnight is", midnight_time)

if noon_time:
    print("Time at noon is", noon_time)
```

**K·∫øt qu·∫£ (< 3.5):**

```py
('Time at noon is', datetime.time(12, 0))
```
Th·ªùi gian n·ª≠a ƒë√™m kh√¥ng ƒë∆∞·ª£c hi·ªÉn th·ªã
#### üí° Gi·∫£i th√™m:

Tr∆∞·ªõc Python 3.5, gi√° tr·ªã lu·∫≠n l√Ω cho ƒë·ªëi t∆∞·ª£ng `datetime.time` ƒë∆∞·ª£c xem nh∆∞ l√† `False` n·∫øu ƒë·ªëi t∆∞·ª£ng n√†y bi·ªÉu di·ªÖn n·ª≠a ƒë√™m trong UTC. Code d·ªÖ sai khi s·ª≠ d·ª•ng c√∫ ph√°p `if obj:` ƒë·ªÉ ki·ªÉm tra `obj` l√† null hay nh·ªØng gi√° tr·ªã t∆∞∆°ng t∆∞∆°ng v·ªõi "r·ªóng".

---
---



## Section: The Hidden treasures!

Ph·∫ßn n√†y bao g·ªìm nh·ªØng ƒëi·ªÅu √≠t ƒë∆∞·ª£c bi·∫øt t·ªõi v·ªÅ Python, nh·ªØng ƒëi·ªÅu h·∫•p d·∫´n n√†y h·∫ßu h·∫øt nh·ªØng ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu nh∆∞ t√¥i ƒë·ªÅu kh√¥ng bi·∫øt

### ‚ñ∂ Okay Python, Can you make me fly?
<!-- Example ID: a92f3645-1899-4d50-9721-0031be4aec3f --->
H√£y b·∫Øt ƒë·∫ßu n√†o

```py
import antigravity
```

**K·∫øt qu·∫£:**
Sshh... M·ªôt b√≠ m·∫≠t l·ªõn.

#### üí° Gi·∫£i th√≠ch:
+ `antigravity` l√† m·ªôt trong v√†i qu·∫£ tr·ª©ng ph·ª•c sinh ƒë∆∞·ª£c t·∫°o ra b·ªüi c√°c l·∫≠p tr√¨nh vi√™n Python 
+ `import antigravity` m·ªü trang web [truy·ªán h√†i XKCD ](http://xkcd.com/353/) trong m·ªôt tr√¨nh duy·ªát.
+ C√≤n nhi·ªÅu h∆°n th·∫ø n·ªØa. C√≥ c√°c **qu·∫£ tr·ª©ng ph·ª•c sinh kh√°c b√™n trong qu·∫£ tr·ª©ng ph·ª•c sinh**. N·∫øu b·∫°n xem ƒëo·∫°n [m√£] (https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17), c√≥ m·ªôt h√†m ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a ƒë·ªÉ tri·ªÉn khai [Gi·∫£i thu·∫≠t geohashing c·ªßa XKCD] 

---

### ‚ñ∂ `goto`, but why?
<!-- Example ID: 2aff961e-7fa5-4986-a18a-9e5894bd89fe --->

```py
from goto import goto, label
for i in range(9):
    for j in range(9):
        for k in range(9):
            print("I am trapped, please rescue!")
            if k == 2:
                goto .breakout # breaking out from a deeply nested loop
label .breakout
print("Freedom!")
```

**K·∫øt qu·∫£ (Python 2.3):**
```py
I am trapped, please rescue!
I am trapped, please rescue!
Freedom!
```

#### üí° Gi·∫£i th√≠ch:
- M·ªôt phi√™n b·∫£n Python c·ªßa `goto` ƒë∆∞·ª£c  [c√¥ng b·ªë](https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html) trong ng√†y c√° th√°ng t∆∞ nƒÉm 2004 nh∆∞ l√† m·ªôt l·ªùi ƒë√πa.
- C√°c phi√™n b·∫£n Python hi·ªán h√†nh kh√¥ng c√≥ module n√†y.
- M·∫∑c d√π tri·ªÉn khai `goto` ch·∫°y ƒë∆∞·ª£c, nh∆∞ng ƒë·ª´ng s·ª≠ d·ª•ng n√≥. [L√Ω do](https://docs.python.org/3/faq/design.html#why-is-there-no-goto) t·∫°i sao Python kh√¥ng c√≥ `goto`.

---

### ‚ñ∂ Brace yourself!
<!-- Example ID: 5c0c75f2-ddd9-4da3-ba49-c4be7ec39acf --->
N·∫øu b·∫°n kh√¥ng th√≠ch s·ª≠ d·ª•ng kho·∫£ng tr·∫Øng ƒë·ªÉ bi·ªÉu th·ªã c√°c ph·∫°m vi, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng phonng c√°ch nh∆∞ trong ng√¥n ng·ªØ C {} b·∫±ng c√°ch import
```py
from __future__ import braces
```

**K·∫øt qu·∫£:**
```py
  File "some_file.py", line 1
    from __future__ import braces
SyntaxError: not a chance
```

C√°c d·∫•u ngo·∫∑c nh·ªçn? Kh√¥ng ƒë∆∞·ª£c ƒë√¢u! N·∫øu b·∫°n nghƒ© r·∫±ng ƒëi·ªÅu g√¢y th·∫•t v·ªçng, s·ª≠ d·ª•ng Java. C√≤n m·ªôt ƒëi·ªÅu ng·∫°c nhi√™n n·ªØa ƒë√¢y, b·∫°n c√≥ th·ªÉ t√¨m th·∫•y ngo·∫°i l·ªá `SyntaxError` ƒë∆∞·ª£c kh·ªüi l√™n ·ªü ƒë√¢u trong module `__future__` hay kh√¥ng (https://github.com/python/cpython/blob/master/Lib/__future__.py)?

#### üí° Gi·∫£i th√≠ch:
+ Module `__future__` th∆∞·ªùng ƒë∆∞·ª£c d√πng ƒë·ªÉ cung c·∫•p c√°c t√≠nh nƒÉng ƒë·∫øn t·ª´ c√°c phi√™n b·∫£n m·ªõi c·ªßa Python. Tuy nhi√™n "t∆∞∆°ng lai" ("feature") trong ho√†n c·∫£nh n√†y c√≥ v·∫ª h∆°i m·ªâa mai.
+ C√≥ m·ªôt qu·∫£ tr·ª©ng ph·ª•c sinh li√™n quan ƒë·∫øn t√¢m tr·∫°ng c·ªßa c·ªông ƒë·ªìng Python v·ªÅ v·∫•n ƒë·ªÅ n√†y. 
+ ƒêo·∫°n m√£ ƒë∆∞·ª£c t√¨m th·∫•y [·ªü ƒë√¢y](https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49) trong file `future.c`.
+ Khi tr√¨nh bi√™n d·ªãch Cpython g·∫∑p m·ªôt [c√¢u l·ªánh future](https://docs.python.org/3.3/reference/simple_stmts.html#future-statements),  N√≥ ch·∫°y ƒëo·∫°n m√£ t∆∞∆°ng ·ª©ng trong  `future.c` tr∆∞·ªõc khi th·ª±c hi·ªán c√¢u l·ªánh import th√¥ng th∆∞·ªùng.

---

### ‚ñ∂ Let's meet Friendly Language Uncle For Life
<!-- Example ID: 6427fae6-e959-462d-85da-ce4c94ce41be --->
**Output (Python 3.x)**
```py
>>> from __future__ import barry_as_FLUFL
>>> "Ruby" != "Python" # ch·∫£ c√≥ g√¨ ph·∫£i nghi ng·ªù v·ªÅ c√¢u l·ªánh so s√°nh n√†y c·∫£
  File "some_file.py", line 1
    "Ruby" != "Python"
              ^
SyntaxError: invalid syntax

>>> "Ruby" <> "Python"
True
```

R·ªìi! c√≥ th·ª© ƒë·ªÉ xem.


#### üí° Gi·∫£i th√≠ch:
- ƒêi·ªÅu ta mu·ªën t√¨m hi·ªÉu li√™n quan t·ªõi [PEP-401](https://www.python.org/dev/peps/pep-0401/), PEP n√†y ƒë∆∞·ª£c xu·∫•t b·∫£n v√†o ng√†y m·ªôt th√°ng t∆∞ nƒÉm 2009 (l√† g√¨ th√¨ b·∫°n bi·∫øt r·ªìi ƒë√≥).
- ƒêo·∫°n d∆∞·ªõi ƒë√¢y ƒë∆∞·ª£c tr√≠ch ra t·ª´ PEP-401
  
  > Nh·∫≠n ra r·∫±ng k√≠ hi·ªáu to√°n t·ª≠ so s√°nh kh√¥ng b·∫±ng != trong Python 3.0 th·∫•y g·ªõm, g√µ th·∫≠t kh√≥, FLUFL kh√¥i ph·ª•c l·∫°i k√≠ hi·ªáu h√¨nh kim c∆∞∆°ng <>.
- B·∫°n nhi·ªÅu th·ª© ƒë√°ng xem trong PEP n√†y; b·∫°n c√≥ th·ªÉ ƒë·ªçc ch√∫ng [·ªü ƒë√¢y]
(https://www.python.org/dev/peps/pep-0401/).
- To√°n t·ª≠ h√¨nh kim c∆∞∆°ng n√†y ho·∫°t ƒë·ªông t·ªët trong m√¥i tr∆∞·ªùng t∆∞∆°ng t√°c, nh∆∞ng l·∫°i g√¢y ra ngo·∫°i l·ªá `SyntaxError` khi ch·∫°y qua file python (h√£y xem [v·∫•n ƒë·ªÅ](https://github.com/satwikkansal/wtfpython/issues/94)). Tuy nhi√™n b·∫°n c√≥ th·ªÉ g√≥i c√¢u l·ªánh n√†y v√†o trong h√†m `eval` ho·∫∑c `compile` ƒë·ªÉ ch·∫°y ƒë∆∞·ª£c.
    ```py
    from __future__ import barry_as_FLUFL
    print(eval('"Ruby" <> "Python"'))
    ```

---

### ‚ñ∂ Even Python understands that love is complicated
<!-- Example ID: b93cad9e-d341-45d1-999c-fcdce65bed25 --->
```py
import this
```

N√†o, **this** l√† g√¨ th·∫ø? `this` l√† t√¨nh y√™u :heart:

**K·∫øt qu·∫£:**
```
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
```

`this` l√† Thi·ªÅn c·ªßa Python!

```py
>>> love = this
>>> this is love
True
>>> love is True
False
>>> love is False
False
>>> love is not True or False
True
>>> love is not True or False; love is love  # T√¨nh y√™u th·∫≠t ph·ª©c t·∫°p
True
```

#### üí° Gi·∫£i th√≠ch:
* Module `this` trong Python l√† m·ªôt qu·∫£ tr·ª©ng ph·ª•c sinh cho Thi·ªÅn c·ªßa Python ([PEP 20](https://www.python.org/dev/peps/pep-0020)).
* V√† n·∫øu b·∫°n th·∫•y n√≥ h·ª©ng th√∫, h√£y xem m√£ tri·ªÉn khai c·ªßa [this.py](https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py). H·∫•p d·∫´n thay, **m√£ c·ªßa Thi·ªÅn l·∫°i vi ph·∫°m ch√≠nh quy t·∫Øc thi·ªÅn**
* N√≥i v·ªÅ c√¢u `love is not True or False; love is love`, m·ªâa mai thay c√¢u nay t·ª± th·∫•y n√≥ co nghƒ©a (n·∫øu kh√¥ng, hay xnhinf c√° v√≠ d·ª• li√™n quan t·ªõi `is` v√† `is not`)
---

### ‚ñ∂ Yes, it exists!
<!-- Example ID: 4286db3d-1ea7-47c9-8fb6-a9a04cac6e49 --->
** Kh·ªëi `else` c·ªßa c√°c v√≤ng l·∫∑p .** D∆∞·ªõi ƒë√¢y l√† m·ªôt v√≠ d·ª• ƒëi·ªÉn h√¨nh:

```py
  def does_exists_num(l, to_find):
      for num in l:
          if num == to_find:
              print("Exists!")
              break
      else:
          print("Does not exist")
```

**K·∫øt qu·∫£:**
```py
>>> some_list = [1, 2, 3, 4, 5]
>>> does_exists_num(some_list, 4)
Exists! (T·ªìn t·∫°i)
>>> does_exists_num(some_list, -1)
Does not exist (Kh√¥ng t·ªìn t·∫°i)
```

**Kh·ªëi `else` trong x·ª≠ l√Ω ngo·∫°i l·ªá.** M·ªôt v√≠ d·ª•,

```py
try:
    pass
except:
    print("Exception occurred!!!")
else:
    print("Try block executed successfully...")
```

**K·∫øt qu·∫£:**
```py
Try block executed successfully...
```

#### üí° Gi·∫£i th√≠ch:
- Kh·ªëi `else` sau m·ªôt v√≤ng l·∫∑p ƒë∆∞·ª£c th·ª±c hi·ªán ch·ªâ khi trong qu√° tr√¨nh l·∫∑p kh√¥ng c√≥ m·ªôt `break` n√†o. B·∫°n c√≥ th·ªÉ nghƒ© n√≥ nh∆∞ l√† m·ªôt kh·ªëi "kh√¥ng ng·∫Øt" ("nobreak")
- Kh·ªëi `else` sau m·ªôt kh·ªëi try c√≤n ƒë∆∞·ª£c g·ªçi la "kh·ªëi ho√†n t·∫•t" ƒë√≥ khi c√°c c√¢u l·ªánh trong kh·ªëi n√†y s·∫Ω ƒë∆∞·ª£c th·ª±c thi khi kh·ªëi try ho√†n th√†nh tr·ªçn v·∫πn c√¥ng vi·ªác c·ªßa m√¨nh.

---
### ‚ñ∂ Ellipsis *
<!-- Example ID: 969b7100-ab3d-4a7d-ad7d-a6be16181b2b --->
```py
def some_func():
    Ellipsis
```

**K·∫øt qu·∫£**
```py
>>> some_func()
# No output, No Error

>>> SomeRandomString
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'SomeRandomString' is not defined

>>> Ellipsis
Ellipsis
```

#### üí° Gi·∫£i th√≠ch
- Trong Python, `Ellipsis` l√† m·ªôt ƒë·ªëi t∆∞·ª£ng c√≥ s·∫µn, to√†n c·ª•c t∆∞∆°ng ƒë∆∞∆°ng v·ªõi  `...`.
    ```py
    >>> ...
    Ellipsis
    ```
- Eliipsis c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng cho c√°c m·ª•c ƒë√≠ch sau
    + L√† m·ªôt ƒë·ªëi t∆∞·ª£ng "x√≠ ch·ªó" cho m√£ ch∆∞a ƒë∆∞·ª£c vi·∫øt (nh∆∞ c√¢u l·ªánh `pass`)
    + Trong c√∫ ph√°p l√°t c·∫Øt (slicing syntax), n√≥ ƒë∆∞·ª£c d√πng ƒë·ªÉ bi·ªÉu di·ªÖn c√°c l√°t c·∫Øt ƒë·∫ßy ƒë·ªß theo h∆∞·ªõng c√≤n l·∫°i
    + In slicing syntax to represent the full slices in remaining direction
    ```py
    >>> import numpy as np
    >>> three_dimensional_array = np.arange(8).reshape(2, 2, 2)
    array([
        [
            [0, 1],
            [2, 3]
        ],

        [
            [4, 5],
            [6, 7]
        ]
    ])
    ```
    `three_dimensional_array` l√† m·ªôt m·∫£ng c·ªßa m·∫£ng c·ªßa c√°c m·∫£ng. N√†o, ch√∫ng ta mu·ªën in ra ph·∫ßn t·ª≠ th·ª© hai (ch·ªâ s·ªë `1`) c·ªßa t·∫•t c·∫£ c√°c m·∫£ng ph√≠a trong c√πng, chugns ta c√≥ th·ªÉ s·ª≠ d·ª•ng Ellipsis ƒë·ªÉ "ch∆°i chi√™u qua m·∫∑t" (bypass) t·∫•t c·∫£ c√°c chi·ªÅu (dimensions) ph√≠a tr∆∞·ªõc ƒë√≥.
    ```py
    >>> three_dimensional_array[:,:,1]
    array([[1, 3],
       [5, 7]])
    >>> three_dimensional_array[..., 1] # using Ellipsis.
    array([[1, 3],
       [5, 7]])
    ```
    Ch√∫ √Ω r·∫±ng: c√°ch tr√™n c√≥ th·ªÉ th·ª±c tr√™n b·∫•t c·ª© m·∫£ng v·ªõi s·ªë l∆∞·ª£ng chi·ªÅu n√†o. B·∫°n c√≥ th·ªÉ l·ª±a tr√™n l√°t c·∫Øt (slice) tr∆∞·ªõc v√† chi·ªÅu cu·ªëi c√πng v√† l·ªù ƒëi c√°c chi·ªÅu n·∫±m ·ªü gi·ªØa (`n_dimensional_array[firs_dim_slice, ..., last_dim_slice]`)
    + Trong [G·ª£i √Ω ki·ªÉu](https://docs.python.org/3/library/typing.html), Ellipsis ƒë∆∞·ª£c d√πng ƒë·ªÉ ch·ªâ ra m·ªôt ph·∫ßn c·ªßa ki·ªÉu (nh∆∞ l√† `(Callable[..., int]` hay `Tuple[str, ...]`))
    + B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng Ellipsis nh∆∞ l√† m·ªôt tham s·ªë h√†m m·∫∑c ƒë·ªãnh (trong nh·ªØng tr∆∞·ªùng h·ª£p b·∫°n mu·ªën ph√¢n bi·ªát gi·ªØa hai t√≠nh hu·ªëng "kh√¥ng c√≥ tham s·ªë ƒë∆∞·ª£c truy·ªÅn v√†o") v√† "gi√° tr·ªã None ƒë∆∞·ª£c truy·ªÅn v√†o"

---

### ‚ñ∂ Inpinity
<!-- Example ID: ff473ea8-a3b1-4876-a6f0-4378aff790c1 --->
Vi·ªác vi·∫øt sai ch√≠nh t·∫£ l√† ch·ªß √Ω.
**K·∫øt qu·∫£ (Python 3.x):**
```py
>>> infinity = float('infinity')
>>> hash(infinity)
314159
>>> hash(float('-inf'))
-314159
```

#### üí° Gi·∫£i th√≠ch:
- M√£ bƒÉm c·ªßa v√¥ c·ª±c l√† 10‚Åµ x œÄ.
- Th√∫ v·ªã l√† ·ªü ch·ªó trong Python 3 m√£ bƒÉm c·ªßa `float('-inf')` l√† "-10‚Åµ x œÄ", tr√°i l·∫°i trong Python l√† "-10‚Åµ x e"
---

### ‚ñ∂ Let's mangle
<!-- Example ID: 37146d2d-9e67-43a9-8729-3c17934b910c --->
1\.
```py
class Yo(object):
    def __init__(self):
        self.__honey = True
        self.bro = True
```

**K·∫øt qu·∫£:**
```py
>>> Yo().bro
True
>>> Yo().__honey
AttributeError: 'Yo' object has no attribute '__honey' (ƒê·ªëi t∆∞·ª£ng 'Yo' kh√¥ng c√≥ thu·ªôc t√≠nh '__honey')
>>> Yo()._Yo__honey
True
```

2\.
```py
class Yo(object):
    def __init__(self):
        # Let's try something symmetrical this time
        self.__honey__ = True
        self.bro = True
```

**K·∫øt qu·∫£:**
```py
>>> Yo().bro
True

>>> Yo()._Yo__honey__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Yo' object has no attribute '_Yo__honey__' (ƒê·ªëi t∆∞·ª£ng 'Yo' kh√¥ng c√≥ thu·ªôc t√≠nh '_Yo__honey__')
```

T·∫°i sao `Yo()._Yo__honey` l·∫°i g√¢y ra l·ªói?

3\.

```py
_A__variable = "Some value"

class A(object):
    def some_func(self):
        return __variable # (bi·∫øn n√†y ch∆∞a ƒë∆∞·ª£c kh·ªüi t·∫°o)
```

**K·∫øt qu·∫£:**
```py
>>> A().__variable
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'A' object has no attribute '__variable' (ƒê·ªëi t∆∞·ª£ng 'A' kh√¥ng c√≥ thu·ªôc t√≠nh '__variable')

>>> A().some_func()
'Some value'
```


#### üí° Gi·∫£i th√≠ch:

* [Name Mangling](https://en.wikipedia.org/wiki/Name_mangling) ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ tr√°nh vi·ªác ƒë·ª•ng ƒë·ªô v·ªÅ t√™n (names) gi·ªØa c√°c kh√¥ng gian t√™n (namespaces).
* Trong Python, tr√¨nh th√¥ng d·ªãch thay ƒë·ªïi (mangles) t√™n c·ªßa c√°c th√†nh vi√™n c·ªßa m·ªôt l·ªõp m√† b·∫Øt ƒë·∫ßu v·ªõi `__` (hai d·∫•u g·∫°ch ch√¢n li·ªÅn nhau hay c√≤n g·ªçi l√† "dunder") v√† c√°c t√™n kh√¥ng th√∫c v·ªõi nhi·ªÅu h∆°n m·ªôt d·∫•u g·∫°ch ch√¢n b·∫±ng vi·ªác th√™m v√†o `_T√™nC·ªßaL·ªõp` v√†o tr∆∞·ªõc ƒë√≥
* V√¨ v·∫≠y, ƒë·ªÉ truy c·∫≠p v√†o thu·ªôc t√≠nh `__honey` trong ƒëo·∫°n m√£ ƒë·∫ßu ti√™n, b·∫°n ph·∫£i n·ªëi `_Yo` v√†o ph√≠a tr∆∞·ªõc, ƒë·ªÉ ngƒÉn vi·ªác xung ƒë·ªôt v·ªõi thu·ªôc t√≠nh c√≥ c√πng t√™n trong l·ªõp kh√°c.
* Nh∆∞ng t·∫°i sao trong ƒëo·∫°n m√£ th·ª© hai m·∫∑c d√π ƒë√£ dung t√™n ƒë√∫ng nh∆∞ng ta v·∫´n kh√¥ng truy c·∫≠p ƒë∆∞·ª£c v√†o thu·ªôc t√≠nh? B·ªüi v√¨ c√°ch th·ª©c mangling n√†y kh√¥ng √°p d·ª•ng ƒë·ªëi v·ªõi c√°c t√™n bi·∫øn k·∫øt th√∫c v·ªõi hai d·∫•u g·∫°ch ch√¢n.
* ƒêo·∫°n m√£ th·ª© ba c≈©ng l√† k·∫øt qu·∫£ c·ªßa vi·ªác mangling. T√™n `__variable` trong c√¢u l·ªánh `return __variable` ƒë∆∞·ª£c chuy·ªÉn th√†nh `_A__variable`, v√† l·∫°i v√¥ t√¨nh tr√πng v·ªõi t√™n bi·∫øn ƒë∆∞·ª£c khai b√°o ph√≠a b√™n ngo√†i
* C√≤n n·ªØa, n·∫øu t√™n b·ªã mangle nhi·ªÅu h∆°n 255 k√≠ t·ª±, vi·ªác c·∫Øt g·ªçn t√™n s·∫Ω di√™n ra.

---
---

## Section: Appearances are deceptive!

### ‚ñ∂ Skipping lines?
<!-- Example ID: d50bbde1-fb9d-4735-9633-3444b9d2f417 --->
**K·∫øt qu·∫£:**
```py
>>> value = 11
>>> valu–µ = 32
>>> value
11
```

C√°i qu√°i g√¨ th·∫ø?

**Ch√∫ √Ω:** ƒê·ªÉ l√†m ra k·∫øt qu·∫£ nh∆∞ tr√™n b·∫°n ch·ªâ c·∫ßn sao ch·∫øp c√°c c√¢u l·ªánh v√† d√°n n√≥ v√†o file hay shell.

#### üí° Gi·∫£i th√≠ch

M·ªôt v√†i k√≠ t·ª± kh√¥ng ph·∫£i l√† k√≠ t·ª± ph∆∞∆°ng t√¢y tr√¥ng gi·ªëng nh∆∞ c√°c k√≠ t·ª± trong b·∫£ng ch·ªØ c√°i ti·∫øng Anh nh∆∞ng l·∫°i ƒë∆∞·ª£c di·ªÖn gi·∫£i kh√°c b·ªüi tr√¨nh th√¥ng idhcj
```py
>>> ord('–µ') # K√≠ t·ª± cyrillic 'e' (Ye)
1077
>>> ord('e') # K√≠ t·ª± latin 'e', ƒë∆∞·ª£c s·ª≠ d·ª•ng trong ti·∫øng Anh v√† tr√™n c√°c b√†n ph√≠m chu·∫©n
101
>>> '–µ' == 'e'
False

>>> value = 42 # latin e
>>> valu–µ = 23 # cyrillic 'e', Python 2.x interpreter would raise a `SyntaxError` here
>>> value
42
```


H√†m t√≠ch h·ª£p s·∫µn `ord()` tr·∫£ v·ªÅ m√£ Unicode c·ªßa m·ªôt k√≠ t·ª± [code point](https://en.wikipedia.org/wiki/Code_point), v√† b·∫°n c√≥ th·ªÉ th·∫•y c√°c m√£ kh√°c nhau cho k√≠ t·ª±  Cyrillic 'e' v√† k√≠ t·ª± Latin 'e' .

---

### ‚ñ∂ Teleportation

<!-- Example ID: edafe923-0c20-4315-b6e1-0c31abfc38f5 --->

```py
# C√†i ƒë·∫∑t th∆∞ vi√™n numpy s·ª≠ d·ª•ng `pip install numpy` tr∆∞·ªõc
import numpy as np

def energy_send(x):
    # Kh·ªüi t·∫°o m·ªôt m·∫£ng numpy
    np.array([float(x)])

def energy_receive():
    # Tr·∫£ v·ªÅ m·ªôt mang numpy r·ªóng
    return np.empty((), dtype=np.float).tolist()
```

**K·∫øt qu·∫£:**
```py
>>> energy_send(123.456)
>>> energy_receive()
123.456
```

C√≥ g√¨ m·ªõi ·ªü ƒë√¢y n√†o ?

#### üí° Gi·∫£i th√≠ch:

* Ch√∫ √Ω r·∫±ng m·∫£ng numpy ƒë∆∞·ª£c t·∫°o trong h√†m `energy_send` kh√¥ng c√≥ ƒë∆∞·ª£c tr·∫£ v√¨, v√¨ v·∫≠y kh√¥ng gian b·ªô nh·ªõ ƒë∆∞·ª£c gi·∫£i ph√≥ng.
* `numpy.empty()` tr·∫£ v·ªÅ ph·∫ßn b·ªô nh∆° t·ª± do ti·∫øp theo m√† kh√¥ng kh·ªüi t·∫°o l·∫°i n√≥. Ph√¢n b·ªô nh·ªõ nay l·∫°i v√¥ t√¨nh trung v·ªõi ph·∫ßn b·ªô nh·ªõ tr∆∞·ªõc ƒë√≥ ƒë∆∞·ª£c gi·∫£i ph√≥ng (th∆∞·ªùng x·∫£y ra, nh∆∞ng kh√¥ng ph·∫£i l√† lu√¥n lu√¥n)

---


### ‚ñ∂ Well, something is fishy...
<!-- Example ID: cb6a37c5-74f7-44ca-b58c-3b902419b362 --->
```py
def square(x):
    """
    A simple function to calculate the square of a number by addition.
    """
    sum_so_far = 0
    for counter in range(x):
        sum_so_far = sum_so_far + x
  return sum_so_far
```

**K·∫øt qu·∫£ (Python 2.x):**

```py
>>> square(10)
10
```

Sao k·∫øt qu·∫£ l·∫°i ra 100?

**Ch√∫ √Ω:** N·∫øu b·∫°n kh√¥ng th·ª±c hi·ªán l·∫°i ƒë∆∞·ª£c v√≠ d·ª• tr√™n, ch·∫°y th·ª≠ file [mixed_tabs_and_spaces.py](/mixed_tabs_and_spaces.py) th√¥ng qua shell.
#### üí° Explanation

* **ƒê·ª´ng tr·ªôn l·∫´n tabs v√† c√°c kho·∫£ng tr·∫Øng (spaces)!** K√≠ t·ª± n·∫±m ph√≠a tr∆∞·ªõc l·ªánh return l√† m·ªôt "tab", v√† ƒëo·∫°n m√£ ·ªü ƒë√¢u ƒë√≥ trong code ƒë∆∞·ª£c th·ª•t l√πi theo b·ªôi s·ªë c·ªßa "4 kho·∫£ng tr·∫Øng"
* This is how Python handles tabs:
* ƒê√¢y l√† c√°ch Python x·ª≠ l√Ω tabs:  
  > ƒê·∫ßu ti√™n, tabs ƒë∆∞·ª£c thay th·∫ø (t·ª´ tr√°i sang ph·∫£i) b·∫±ng t·ª´ m·ªôt t·ªõi t√°m kho·∫£ng tr·∫Øng ƒë·ªÉ cho t·ªïng s·ªë l∆∞·ª£ng c√°c k√≠ t·ª± (bao g·ªìm c·∫£ k√≠ t·ª± thay th·∫ø) c√≥ gi√° tr·ªã l√† b·ªôi s·ªë c·ªßa t√°m <...>
* Do ƒë√≥ "tab" n·∫±m ·ªü d√≤ng cu·ªëi c·ªßa h√†m `square` ƒë∆∞·ª£c thay th·∫ø b·∫±ng t√°m kho·∫£ng tr·∫Øng, v√† n√≥ ƒëi v√†o n·∫±m trong v√≤ng l·∫∑p.
* Python 3 s·∫Ω vƒÉng ra m·ªôt l·ªói khi n√≥ g·∫∑p ph·∫£i c√°c l·ªói li√™n quan t·ªõi tabs v√† kho·∫£ng tr·∫Øng.
    **K·∫øt qu·∫£ (Python 3.x):**
    ```py
    TabError: inconsistent use of tabs and spaces in indentation
    ```

---
---

## Section: Miscellaneous


### ‚ñ∂ `+=` ch·∫°y nhanh h∆°n
<!-- Example ID: bfd19c60-a807-4a26-9598-4912b86ddb36 --->

```py
# S·ª≠ d·ª•ng "+" ƒë·ªÉ c·ªông 3 strings:
>>> timeit.timeit("s1 = s1 + s2 + s3", setup="s1 = ' ' * 100000; s2 = ' ' * 100000; s3 = ' ' * 100000", number=100)
0.25748300552368164
# S·ª≠ d·ª•ng "+=" ƒë·ªÉ c·ªông 3 strings:
>>> timeit.timeit("s1 += s2 + s3", setup="s1 = ' ' * 100000; s2 = ' ' * 100000; s3 = ' ' * 100000", number=100)
0.012188911437988281
```

#### üí° Gi·∫£i th√≠ch:
+ `+=` nhanh h∆°n `+` khi n·ªëi nhi·ªÅu h∆°n 2 strings b·ªüi v√¨ string ƒë·∫ßu ti√™n (v√≠ d·ª•, `s1` trong `s1 += s2 + s3`) kh√¥ng b·ªã hu·ª∑ ƒëi khi t·∫°o ra chu·ªói k·∫øt qu·∫£ cu·ªëi c√πng
---

### ‚ñ∂ Let's make a giant string!
<!-- Example ID: c7a07424-63fe-4504-9842-8f3d334f28fc --->
```py
def add_string_with_plus(iters):
    s = ""
    for i in range(iters):
        s += "xyz"
    assert len(s) == 3*iters

def add_bytes_with_plus(iters):
    s = b""
    for i in range(iters):
        s += b"xyz"
    assert len(s) == 3*iters

def add_string_with_format(iters):
    fs = "{}"*iters
    s = fs.format(*(["xyz"]*iters))
    assert len(s) == 3*iters

def add_string_with_join(iters):
    l = []
    for i in range(iters):
        l.append("xyz")
    s = "".join(l)
    assert len(s) == 3*iters

def convert_list_to_string(l, iters):
    s = "".join(l)
    assert len(s) == 3*iters
```

**K·∫øt qu·∫£:**

```py
# Ch·∫°y c√°c ƒëo·∫°n l·ªánh trong ipython shell s·ª≠ dung %timeit ƒë·ªÉ c√≥ k·∫øt qu·∫£ d·ªÖ ƒë·ªçc h∆°n
# B·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng module timeit trong python shell b√¨nh th∆∞·ªùng, nh∆∞ v√≠ d·ª• d∆∞·ªõi ƒë√¢y
# timeit.timeit('add_string_with_plus(10000)', number=1000, globals=globals())

>>> NUM_ITERS = 1000
>>> %timeit -n1000 add_string_with_plus(NUM_ITERS)
124 ¬µs ¬± 4.73 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
>>> %timeit -n1000 add_bytes_with_plus(NUM_ITERS)
211 ¬µs ¬± 10.5 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_format(NUM_ITERS)
61 ¬µs ¬± 2.18 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_join(NUM_ITERS)
117 ¬µs ¬± 3.21 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> l = ["xyz"]*NUM_ITERS
>>> %timeit -n1000 convert_list_to_string(l, NUM_ITERS)
10.1 ¬µs ¬± 1.06 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
```

B√¢y gi·ªù tƒÉng s·ªë v√≤ng l·∫∑p l√™n 10 l·∫ßn
```py
>>> NUM_ITERS = 10000
>>> %timeit -n1000 add_string_with_plus(NUM_ITERS) # Linear increase in execution time
1.26 ms ¬± 76.8 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_bytes_with_plus(NUM_ITERS) # Quadratic increase
6.82 ms ¬± 134 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_format(NUM_ITERS) # Linear increase
645 ¬µs ¬± 24.5 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_join(NUM_ITERS) # Linear increase
1.17 ms ¬± 7.25 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
>>> l = ["xyz"]*NUM_ITERS
>>> %timeit -n1000 convert_list_to_string(l, NUM_ITERS) # Linear increase
86.3 ¬µs ¬± 2 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
```

#### üí° Gi·∫£i th√≠ch
- B·∫°n c√≥ th·ªÉ ƒë·ªçc th√™m v·ªÅ [timeit] (https://docs.python.org/3/library/timeit.html) or [%timeit](https://ipython.org/ipython-doc/dev/interactive/magics.html#magic-timeit). Module n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒëo th·ªùi gian ch·∫°y c·ªßa c√°c ƒëo·∫°n code.
- ƒê·ª´ng d√πng `+` ƒë·ªÉ sinh ra c√°c strings d√†i. Trong Python, `str` kh√¥ng th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c gi√° tr·ªã, do ƒë√≥ c√°c strings ph√≠a b√™n tr√°i v√† ph·∫£i ph·∫£i ƒë∆∞·ª£c ch√©p v√†o string m·ªõi cho m·ªói c·∫∑p gh√©p string. N·∫øu b·∫°n n·ªëi strings c√≥ ƒë·ªô d√†i l√† 10, b·∫°n s·∫Ω ch√©p + ((10+10)+10) + (((10+10)+10)+10) = 90 k√≠ t·ª± thay v√¨ ch·ªâ 40 k√≠ t·ª±. S·∫Ω t·ªá h∆°n n·ªØa khi s·ªë l∆∞·ª£ng v√† k√≠ch th∆∞·ªõc c·ªßa string tƒÉng (nh∆∞ b·∫°n c√≥ th·ªÉ th·∫•y ·ªü h√†m `add_bytes_with_plus` )
- Do ƒë√≥, b√™n n√™n d√πng `.format.` hay `%` (m·∫∑c d√π c√°c c√°ch s·ª≠ d·ª•ng n√†y s·∫Ω ch·∫≠m h∆°n `+` ƒë·ªëi v·ªõi c√°c strings nh·ªè )
- Hay t·ªët h∆°n n·ªØa, n·∫øu b·∫°n ƒë√£ c√≥ s·∫µn nh·ªØng n·ªôi dung ·ªü d·∫°ng m·ªôt ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ l·∫∑p, khi ƒë√≥ s·ª≠ d·ª•ng `''.join(iterable_object)` s·∫Ω nhanh h∆°n. 
- Kh√¥ng gi·ªëng nh∆∞ `add_bytes_with_plus` v·ªõi c√°c t·ªëi ∆∞u ƒë·∫øn t·ª´ `+=` nh∆∞ ƒë√£ th·∫£o lu·∫≠n ·ªü v√≠ d·ª• tr∆∞·ªõc ƒë√≥, `add_string_with_plus` kh√¥ng cho th·∫•y s·ª± tƒÉng c·∫•p b·∫≠c hai v·ªÅ th·ªùi gian th∆∞ucj thi. S·ª≠ d·ª•ng `s = s + "x" + "y" + "z"` thay v√¨ `s += "xyz"` s·∫Ω l√†m tƒÉng th·ªùi gian ch·∫°y l√™n hai l·∫ßn..
  ```py
  def add_string_with_plus(iters):
      s = ""
      for i in range(iters):
          s = s + "x" + "y" + "z"
      assert len(s) == 3*iters

  >>> %timeit -n100 add_string_with_plus(1000)
  388 ¬µs ¬± 22.4 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
  >>> %timeit -n100 add_string_with_plus(10000) # Quadratic increase in execution time
  9 ms ¬± 298 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
  ```
  
- C√≥ nhi·ªÅu c√°ch ƒë·ªÉ ƒë·ªãnh d·∫°ng v√† t·∫°o m·ªôt string kh·ªïng l·ªì, tr√°i ng∆∞·ª£c v·ªõi ƒëi·ªÅu trong [Zen of Python](https://www.python.org/dev/peps/pep-0020/), nh∆∞ sau  
    > Ch·ªâ n√™n c√≥ m·ªôt -- v√† t·ªët h∆°n l√† ch·ªâ m·ªôt -- c√°ch r√µ r√†ng ƒë·ªÉ l√†m ƒëi·ªÅu n√†y.
---

 
### ‚ñ∂ Minor Ones *
<!-- Example ID: f885cb82-f1e4-4daa-9ff3-972b14cb1324 --->
* `join()` l√† m·ªôt h√†m d√†nh cho string thay v√¨ d√†nh cho list. (n·∫øu nh√¨n v√†o th√¨ ta c√≥ th·ªÉ th·∫•y n√≥ h∆°i ng∆∞·ª£c ng∆∞·ª£c)
  **üí° Gi·∫£i th√≠ch:** N·∫øu `join()` l√† m·ªôt ph∆∞∆°ng th·ª©c ho·∫°t ƒë·ªông v·ªõi m·ªôt string, khi ƒë√≥ n√≥ c≈©ng c√≥ th·ªÉ l√†m vi·ªác ƒë∆∞·ª£c v·ªõi b·∫•t c·ª© ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ l·∫∑p kh√°c (nh∆∞ list, tuple, iterators). N·∫øu n√≥ l√† m·ªôt ph∆∞∆°ng th·ª©c ho·∫°t ƒë·ªông ƒë∆∞·ª£c tr√™n list, th√¨ n√≥ ph·∫£i ƒë∆∞·ª£c tri·ªÉn khai m·ªôt c√°ch t√°ch bi·ªát v·ªõi m·ªçi ki·ªÉu. C√≤n n·ªØa, s·∫Ω l√† kh√¥ng h·ª£p l√Ω ƒë·ªÉ ƒë·∫∑t m·ªôt ph∆∞∆°ng th·ª©c ch·ªâ d√†nh ri√™ng cho string l√™n m·ªôt ƒë·ªëi t∆∞·ª£ng t·ªïng qu√°t `list`.
  
* C√°c c√¢u l·ªánh d∆∞·ªõi ƒë√¢y nh√¨n c√≥ v·∫ª l·∫°, nh∆∞ng ƒë√∫ng v·ªÅ ng·ªØ nghƒ©a:
  + `[] = ()` v·∫´n ƒë√∫ng v·ªÅ m·∫∑t ng·ªØ nghƒ©a (Gi·∫£i n√©n m·ªôt `tuple` r·ªóng s·∫Ω t·∫°o ra m·ªôt `list` r·ªóng)
  + `'a'[0][0][0][0][0]` c≈©ng ƒë√∫ng v·ªÅ ng·ªØ nghƒ©a b·ªüi c√°c strings l√† c√°c [chu·ªói](https://docs.python.org/3/glossary.html#term-sequence) (c√°c ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ l·∫∑p h·ªó tr·ª£ truy c·∫≠p v√† c√°c ph·∫ßn t·ª≠ n√≥ ch·ª©a s·ª≠ d·ª•ng c√°c ch·ªâ s·ªë s·ªë nguy√™n) trong Python.
  + C·∫£ `3 --0-- 5 == 8` v√† `--5 == 5` ƒë·ªÅu ƒë√∫ng v·ªÅ ng·ªØ nghƒ©a v√† cho ra k·∫øt qu·∫£ l√† `True`.

* V·ªõi `a` l√† m·ªôt s·ªë, `++a` v√† `--a` ƒë·ªÅu l√† c√°c c√¢u l·ªánh Python h·ª£p l·ªá nh∆∞ng ch√∫ng kh√¥ng ch·∫°y gi·ªëng nh∆∞ c√°c c√¢u l·ªánh t∆∞∆°ng t·ª± trong c√°c ng√¥n ng·ªØ kh√°c nh∆∞ C, C++, hay Java.
  ```py
  >>> a = 5
  >>> a
  5
  >>> ++a
  5
  >>> --a
  5
  ```

  **üí° Gi·∫£i th√≠ch:**
  + Trong Python, kh√¥ng c√≥ ph√©p `++`. Th·ª±c ra n√≥ ch·ªâ l√† hai ph√©p t√≠nh  `+`.
  + `++a` ƒë∆∞·ª£c ph√¢n t√≠ch nh∆∞  `+(+a)` v√† ƒë∆∞·ª£c d·ªãch ra l√† `a`. T∆∞∆°ng t·ª± l√† `--a`.
  + [B√†i ƒëƒÉng](https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python) tr√™n StackOverflow th·∫£o lu·∫≠n l√Ω do t·∫°i sao kh√¥ng c√≥ c√°c ph√©p t√≠nh tƒÉng v√† gi·∫£m trong Python.

* B·∫°n ph·∫£i bi·∫øt v·ªÅ k√≠ hi·ªáu con h√† m√£ trong Python. Nh∆∞ng b·∫°n c√≥ bao gi·ªù nghe t·ªõi *k√≠ hi·ªáu x√¢m l∆∞·ª£c kh√¥ng gian*?
  ```py
  >>> a = 42
  >>> a -=- 1
  >>> a
  43
  ```
  N√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng nh∆∞ ph√©p t√≠nh tƒÉng, nh∆∞ v·ªõi m·ªôt v√≠ d·ª• kh√°c sau ƒë√¢y
  ```py
  >>> a +=+ 1
  >>> a
  >>> 44
  ```
  **üí° Gi·∫£i th√≠ch:** Tr√≤ ch∆°i khƒÉm n√†y xu·∫•t ph√°t t·ª´ [Raymond Hettinger's tweet](https://twitter.com/raymondh/status/1131103570856632321?lang=en). K√≠ hi·ªáu x√¢m l∆∞·ª£c kh√¥ng gian ch·ªâ ƒë∆∞·ª£c ƒë·ªãnh d·∫°ng kh√°c ƒëi l√† `a -= (-1)`. T∆∞∆°ng t·ª± v·ªõi `a = a - (- 1)`. T∆∞∆°ng t·ª± v·ªõi tr∆∞·ªùng h·ª£p `a += (+ 1)`.
  
* Python c√≥ m·ªôt t√†i li·ªáu v·ªÅ ph√©p [h√†m √Ω ƒë·∫£o ng∆∞·ª£c](https://en.wikipedia.org/wiki/Converse_implication). 
     
     ```py
     >>> False ** False == True
     True
     >>> False ** True == False
     True
     >>> True ** False == True
     True
     >>> True ** True == True
     True
     ```

     **üí° Gi·∫£i th√≠ch:** N·∫øu b·∫°n thay th·∫ø `False` v√† `True` b·∫±ng 0 v√† 1 v√† sau ƒë√≥ l√†m c√°c ph√©p to√°n, b·∫£ng ch√¢n tr·ªã t∆∞∆°ng ƒë∆∞∆°ng v·ªõi ph√©p √°m ch·ªâ ng∆∞·ª£c. ([Ngu·ªìn](https://github.com/cosmologicon/pywat/blob/master/explanation.md#the-undocumented-converse-implication-operator))
     
* Do ch√∫ng ta ƒëang b√†n v·ªÅ c√°c ph√©p t√≠nh, c≈©ng c√≥ ph√©p `@` d√†nh cho vi·ªác nh√¢n ma tr·∫≠n (ƒë·ª´ng lo, ƒë√¢y l√† ph√©p t√≠nh th·ª±c s·ª±)
     ```py
     >>> import numpy as np
     >>> np.array([2, 2, 2]) @ np.array([7, 8, 8])
     46
     ```

     **üí° Gi·∫£i th√≠ch:** Ph√©p t√≠nh `@` ƒë∆∞·ª£c th√™m v√†o Python 3.5 v·ªõi s·ª± ch√∫ √Ω d√†nh cho c·ªông ƒë·ªìng khoa h·ªçc. B·∫•t c·ª© ƒë·ªëi t∆∞·ª£ng n√†o c≈©ng c√≥ th·ªÉ ghi ƒë√® l√™n ph∆∞∆°ng th·ª©c ma thu·∫≠t (magic method)  `__matmul__` ƒë·ªÉ ƒë·ªãnh nghƒ©a h√†nh vi cho ph√©p t√≠nh..

* T·ª´ Python 3.8 tr·ªü ƒëi b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c√∫ ph√°p f-string nh∆∞ `f'{some_var=}` ƒë·ªÉ debugging cho d·ªÖ. V√≠ d·ª•
    ```py
    >>> some_string = "wtfpython"
    >>> f'{some_string=}'
    "some_string='wtfpython'"
    ``` 

* Python s·ª≠ d·ª•ng 2 bytes cho l∆∞u tr·ªØ bi·∫øn c·ª• b·ªô trong c√°c h√†m. V·ªÅ m·∫∑t l√Ω thuy·∫øt, ƒëi·ªÅu n√†y c√≥ nghƒ©a l√† ch·ªâ c√≥ 65536 bi·∫øn c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong m·ªôt h√†m. Tuy nhi√™n, Python c√≥ m·ªôt gi·∫£i ph√°p kh√©o l√©o, t√≠ch h·ª£p s·∫µn ƒë·ªÉ l∆∞u nhi·ªÅu h∆°n 2^16 t√™n bi·∫øn. ƒêo·∫°n code ph√≠a d∆∞·ªõi cho ta th·∫•y ƒëi·ªÅu g√¨ x·∫£y ra trong stack khi c√≥ nhi·ªÅu h∆°n 65536 bi·∫øn c·ª•c b·ªô ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a (C·∫£nh b√°o: ƒëo·∫°n m√£ n√†y in ra 2^18 d√≤ng vƒÉn b·∫£n, h·∫£y chu·∫©n b·ªã!):
     
     ```py
     import dis
    exec("""
    def f():
        """ + """
        """.join(["X" + str(x) + "=" + str(x) for x in range(65539)]))

    f()

    print(dis.dis(f))
    ```
     
* Nhi·ªÅu Python threads s·∫Ω kh√¥ng ch·∫°y *Python code* ƒë·ªìng th·ªùi. √≥ v·∫ª t·ª± nhi√™n khi sinh ra m·ªôt s·ªë lu·ªìng v√† ƒë·ªÉ n√≥ ch·∫°y code Python c·ªßa b·∫°n ƒë·ªìng th·ªùi, nh∆∞ng b·ªüi v√¨ [Kho√° tr√¨nh th√¥ng d·ªãch to√†n c·ª•c](https://wiki.python.org/moin/GlobalInterpreterLock) trong Python, t·∫•t c·∫£ nh·ªØng g√¨ b·∫°n l√†m l√† l√†m cho c√°c lu·ªìng c·ªßa b·∫°n th·ª±c thi tr√™n c√πng m·ªôt core theo th·ª© t·ª±. C√°c lu·ªìng Python r·∫•t t·ªët cho c√°c t√°c v·ªã li√™n quan t·ªõi IO, nh∆∞ng ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c vi·ªác x·ª≠ l√Ω song song trong Python cho c√°c t√°c v·ª• g·∫Øn v·ªõi CPY, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng module [multiprocessing](https://docs.python.org/2/library/multiprocessing.html) 

     ```py
     # File some_file.py
     import time
     
     print("wtfpython", end="_")
     time.sleep(3)
     ```

    ƒêo·∫°n m√£ tr√™n in ra `wtfpython` sau 3 seconds b·ªüi v√¨ tham s·ªë `end` b·ªô ƒë·ªám k·∫øt qu·∫£ ƒë∆∞·ª£c d·ªçn s·∫°ch sau khi gƒÉp `\n` ho·∫∑c khi ch∆∞∆°ng tr√¨nh k·∫øt th√∫c th·ª±c thi. B·∫°n c√≥ th·ªÉ b·∫Øt d·ªçn s·∫°ch b·ªô ƒë·ªám th√¥ng qua vi·ªác g·ª≠i v√†o tham s·ªë `flush=True`..
 
* C·∫Øt danh s√°ch v·ªõi c√°c ch·ªâ s·ªë n·∫±m ngo√†i ph·∫°m v·ªã s·∫Ω kh√¥ng tr·∫£ v·ªÅ l·ªói
* 
  ```py
  >>> some_list = [1, 2, 3, 4, 5]
  >>> some_list[111:]
  []
  ```
* C·∫Øt m·ªôt ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ l·∫∑p kh√¥ng ph·∫£i l√∫c n√†o c≈©ng t·∫°o ra m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi. V√≠ d·ª•,
    ```py
    >>> some_str = "wtfpython"
    >>> some_list = ['w', 't', 'f', 'p', 'y', 't', 'h', 'o', 'n']
    >>> some_list is some_list[:] # False l√† b·ªüi v√¨ m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi ƒë∆∞·ª£c t·∫°o
    False
    >>> some_str is some_str[:] # True l√† b·ªüi v√¨ c√°c strings kh√¥ng th·ªÉ thay ƒë·ªïi gi√° tr·ªã, do v·∫≠y kh√¥ng t·∫°o ra m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi khi c·∫Øt.
    True
    ```

* `int('Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©')` tr·∫£ v·ªÅ `123456789` trong Python 3. Trong Python, c√°c k√≠ t·ª± s·ªë th·∫≠p ph√¢n bao g·ªìm c√°c k√≠ t·ª± s·ªë, v√† t·∫•t c·∫£ c√°c k√≠ t·ª± c√≥ th·ªÉ ƒë∆∞·ª£c d√πng ƒë·ªÉ t·∫°o n√™n c√≥ s·ªë c∆° s·ªë th·∫≠p ph√¢n, v√≠ d·ª•. U+0660, ARABIC-INDIC DIGIT ZERO. ƒê·∫≠y l√†  [m·ªôt c√¢u chuy·ªán h·∫•p d√¢n](http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/) li√™n quan 

* B·∫°n c√≥ th·ªÉ ngƒÉn c√°ch c√°c s·ªë ƒë∆°n v·ªõi d·∫•u g·∫°ch ch√¢n (ƒë·ªÉ ƒë·ªçc d·ªÖ h∆°n), t·ª´ Python 3 tr·ªü ƒëi.

     ```py
     >>> six_million = 6_000_000
     >>> six_million
     6000000
     >>> hex_address = 0xF00D_CAFE
     >>> hex_address
     4027435774
     ```

* `'abc'.count('') == 4`. D∆∞·ªõi ƒë√¢y l√† m·ªôt c√°ch tri·ªÉn khai g·∫ßn t∆∞∆°ng t·ª± v·ªõi ph∆∞∆°ng th·ª©c `count`, v√≠ d·ª• n√†y s·∫Ω l√†m m·ªçi th·ª© r√µ r√†ng h∆°n
  ```py
  def count(s, sub):
      result = 0
      for i in range(len(s) + 1 - len(sub)):
          result += (s[i:i + len(sub)] == sub)
      return result
  ```
  C∆∞ x·ª≠ c·ªßa h√†m tr√™n l√† do vi·ªác so kh·ªõp c√°c chu·ªói con (substring) r·ªóng v·ªõi c√°c l√°t c·∫Øt c√≥ ƒë·ªô d√†i b·∫±ng 0 trong string g·ªëc. 
---
---

# ƒê√≥ng g√≥p

B·∫°n c√≥ th·ªÉ ƒë√≥ng g√≥p cho wtfpython theo nh·ªØng c√°ch d∆∞·ªõi ƒë√¢y

- Cho ch√∫ng t√¥i bi·∫øt nh·ªØng v√≠ d·ª• m·ªõi
- D·ªãch wtfpython sang c√°c ng√¥n gnuwx kh√°c (Xem t·∫°i [issues labeled translation](https://github.com/satwikkansal/wtfpython/issues?q=is%3Aissue+is%3Aopen+label%3Atranslation))
- Minor corrections like pointing out outdated snippets, typos, formatting errors, etc.
- S·ª≠a c√°c l·ªói ph·ª• kh√°c nh∆∞ c√°c ƒëo·∫°n m√£ b·ªã l·ªói th·ªùi, c√°c l·ªói c√∫ ph√°p, l·ªói ƒë·ªãnh d·∫°ng, v√¢n v√¢n.
- Identifying gaps (things like inadequate explanation, redundant examples, etc.)
- T√¨m nh·ªØng thi·∫øu s√≥t (v√≠ d·ª• nh∆∞ gi·∫£i th√≠ch ch∆∞a c·∫∑n k·∫Ω, c√°c v√≠ d·ª• kh√¥ng c·∫ßn thi·∫øt, v√¢n v√¢n.)
- B·∫•t c·ª© ƒë·ªÅ xu·∫•t s√°ng t·∫°o n√†o c≈©ng l√†m cho wtfpython th√∫ v·ªã v√† h·ªØu d·ª•ng h∆°n

Please see [CONTRIBUTING.md](/CONTRIBUTING.md) for more details. Feel free to create a new [issue](https://github.com/satwikkansal/wtfpython/issues/new) to discuss things.

PS: Please don't reach out with backlinking requests, no links will be added unless they're highly relevant to the project.

# L·ªùi c√°m ∆°n

√ù t∆∞·ªüng v√† thi·∫øt k·∫ø c·ªßa wtfpython l·∫•y c·∫£m h·ª©ng t·ª´ d·ª± √°n tuy·ªát v·ªùi c·ªßa Denys Dovhan's [wtfjs](https://github.com/denysdovhan/wtfjs). C√πng v·ªõi ƒë√≥ l√† s·ª± h·ªó tr·ª£ tuy·ªát v·ªùi c·ªßa nh·ªØng ng∆∞·ªùi y√™u Python, gi√∫p cho wtfpython c√≥ ƒë∆∞·ª£c nh∆∞ ng√†y h√¥m nay.

#### M·ªôt v√†i li√™n k·∫øt hay kh√°c!
* https://www.youtube.com/watch?v=sH4XF6pKKmk
* https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python
* https://sopython.com/wiki/Common_Gotchas_In_Python
* https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines
* https://stackoverflow.com/questions/1011431/common-pitfalls-in-python
* https://www.python.org/doc/humor/
* https://github.com/cosmologicon/pywat#the-undocumented-converse-implication-operator
* https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65
* https://github.com/wemake-services/wemake-python-styleguide/search?q=wtfpython&type=Issues
* WFTPython discussion threads on [Hacker News](https://news.ycombinator.com/item?id=21862073) and [Reddit](https://www.reddit.com/r/programming/comments/edsh3q/what_the_fck_python_30_exploring_and/).

# üéì License

[![WTFPL 2.0][license-image]][license-url]

&copy; [Satwik Kansal](https://satwikkansal.xyz)

[license-url]: http://www.wtfpl.net
[license-image]: https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square

## Chia s·∫ª cho b·∫°n b√®!

N·∫øu b·∫°n th√≠ch wtfpython, b·∫°n c√≥ th·ªÉ chia s·∫ª c√°c li√™n k·∫øt d∆∞·ªõi ƒë√¢y cho b·∫°n b√®,

[Twitter](https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&text=If%20you%20really%20think%20you%20know%20Python,%20think%20once%20more!%20Check%20out%20wtfpython&hashtags=python,wtfpython) | [Linkedin](https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&title=What%20the%20f*ck%20Python!&summary=If%20you%20really%20thing%20you%20know%20Python,%20think%20once%20more!) | [Facebook](https://www.facebook.com/dialog/share?app_id=536779657179021&display=page&href=https%3A%2F%2Fgithub.com%2Fsatwikkansal%2Fwtfpython&quote=If%20you%20really%20think%20you%20know%20Python%2C%20think%20once%20more!)  

## B·∫°n c√≥ c·∫ßn b·∫£n pdf c·ªßa wtf hay kh√¥ng?

I've received a few requests for the pdf (and epub) version of wtfpython. You can add your details [here](https://satwikkansal.xyz/wtfpython-pdf/) to get them as soon as they are finished.

T√¥i nh·∫≠n ƒë∆∞·ª£c m·ªôt v√†i y√™u c·∫ßu cho phi√™n b·∫£n pdf (v√† epub) c·ªßa wtfpython. N·∫øu b·∫°n mu·ªën, b·∫°n c√≥ th·ªÉ th√™m th√¥ng tin chi ti·∫øt c·ªßa m√¨nh ·ªü ƒë√¢y [here](https://satwikkansal.xyz/wtfpython-pdf/) ƒë·ªÉ c√≥ phi√™n b·∫£n pdf s·ªõm nh·∫•t.

**That's all folks!** For upcoming content like this, you can add your email [here](https://www.satwikkansal.xyz/content-like-wtfpython/).

*PS: On a sidenote, consider donating a dollar to [plant a tree](https://teamtrees.org/).*
