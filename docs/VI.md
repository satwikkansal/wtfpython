---
hide:
  - toc
---

<p align="center"><img src="../images/logo.png" alt=""></p>
<h1 align="center">What the f*ck Python! ğŸ˜±</h1>
<p align="center">
<a href="https://github.com/satwikkansal/wtfpython">English</a>
| <a href="#">Tiáº¿ng Viá»‡t</a>
</p>
<p align="center">CÃ¹ng khÃ¡m phÃ¡ vÃ  tÃ¬m hiá»ƒu Python thÃ´ng qua cÃ¡c Ä‘oáº¡n mÃ£ khiáº¿n báº¡n báº¥t ngá».</p>



CÃ¡c báº£n dá»‹ch tiáº¿ng nÆ°á»›c ngoÃ i khÃ¡c: [Tiáº¿ng Trung ä¸­æ–‡](https://github.com/leisurelicht/wtfpython-cn) | [ThÃªm báº£n dá»‹ch](https://github.com/satwikkansal/wtfpython/issues/new?title=Add%20translation%20for%20[LANGUAGE]&body=Expected%20time%20to%20finish:%20[X]%20weeks.%20I%27ll%20start%20working%20on%20it%20from%20[Y].)

Báº¡n cÃ³ thá»ƒ tham kháº£o cÃ¡c Ä‘oáº¡n mÃ£ vá»›i: [Cháº¿ Ä‘á»™ trá»±c quan](https://colab.research.google.com/github/vuduclyunitn/wtfptyhon-vi/blob/master/irrelevant/wtf.ipynb) | [Giao diá»‡n dÃ²ng lá»‡nh](https://pypi.python.org/pypi/wtfpython)


Python lÃ  má»™t ngÃ´n ngá»¯ cáº¥p cao, vá»›i cÃ¡c mÃ£ Ä‘Æ°á»£c thÃ´ng dá»‹ch thay vÃ¬ biÃªn dá»‹ch nhÆ° cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhÆ° C hay Java. Python cÃ³ ráº¥t nhiá»u cÃ¡c tÃ­nh nÄƒng giÃºp viá»‡c láº­p trÃ¬nh dá»… dÃ ng, thuáº­n tiá»‡n. Tuy nhiÃªn, cÃ¡c Ä‘oáº¡n mÃ£ viáº¿t báº±ng Python thá»‰nh thoáº£ng cho ra káº¿t quáº£ khÃ´ng rÃµ rÃ ng, gÃ¢y khÃ³ hiá»ƒu khi má»›i nhÃ¬n vÃ o.


wtfpython Ä‘Æ°á»£c táº¡o ra vá»›i mong muá»‘n giáº£i thÃ­ch chÃ­nh xÃ¡c cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a cÃ¡c Ä‘oáº¡n mÃ£ thoáº¡t nhÃ¬n khÃ³ hiá»ƒu vÃ  cÃ¡c tÃ­nh nÄƒng Ã­t Ä‘Æ°á»£c biáº¿t tá»›i trong Python.


Má»™t vÃ i vÃ­ dá»¥ cÃ³ thá»ƒ khÃ´ng lÃ m báº¡n quÃ¡ ngáº¡c nhiÃªn, tuy váº­y báº¡n sáº½ khÃ¡m phÃ¡ Ä‘Æ°á»£c nhá»¯ng Ä‘iá»u hay ho vá» Python mÃ  cÃ³ thá»ƒ báº¡n chÆ°a tá»«ng biáº¿t tá»›i. Há»c láº­p trÃ¬nh thÃ´ng qua nhá»¯ng vÃ­ dá»¥ nhÆ° váº­y giÃºp báº¡n hiá»ƒu sÃ¢u hÆ¡n nhá»¯ng thá»© náº±m bÃªn trong cá»§a má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh, khi Ä‘Ã³ báº¡n sáº½ tháº¥y há»©ng thÃº hÆ¡n trong quÃ¡ trÃ¬nh há»c.


Náº¿u Ä‘á»™c giáº£ lÃ  má»™t láº­p trÃ¬nh viÃªn cÃ³ thÃ¢m niÃªn, hÃ£y thá»­ thá»©c mÃ¬nh vá»›i cÃ¡c Ä‘oáº¡n mÃ£ sáº¯p tá»›i, cá»‘ gáº¯ng lÃ m Ä‘Ãºng má»—i thá»­ thÃ¡ch ngay trong láº§n Ä‘áº§u tiÃªn. Äá»™c giáº£ cÃ³ thá»ƒ Ä‘Ã£ thá»­ quáº£ má»™t vÃ i trong sá»‘ cÃ¡c bÃ i toÃ¡n trÆ°á»›c Ä‘Ã³, Ä‘á»c vÃ  lÃ m cÃ¡c bÃ i toÃ¡n dÆ°á»›i Ä‘Ã¢y cÃ³ thá»ƒ giÃºp báº¡n Ã´n láº¡i chÃºng.


PS: Náº¿u báº¡n Ä‘Ã£ Ä‘á»c bÃ i nÃ y trÆ°á»›c Ä‘Ã³, báº¡n cÃ³ thá»ƒ muá»‘n xem nhá»¯ng thay Ä‘á»•i má»›i [á»Ÿ Ä‘Ã¢y](https://github.com/satwikkansal/wtfpython/releases/).



NÃ o ta báº¯t Ä‘áº§u ...

# Nhá»¯ng ná»™i dung chÃ­nh
<!-- Generated using "markdown-toc -i README.md --maxdepth 3"-->

<!-- toc -->

- [Cáº¥u trÃºc cá»§a cÃ¡c vÃ­ dá»¥](#structure-of-the-examples)
    + [â–¶ Some fancy Title](#-some-fancy-title)
- [CÃ¡ch sá»­ dá»¥ng](#usage)
- [ğŸ‘€ CÃ¡c vÃ­ dá»¥](#-examples)
  * [Section: Strain your brain!](#section-strain-your-brain)
    + [â–¶ First things first! *](#-first-things-first-)
    + [â–¶ Strings can be tricky sometimes](#-strings-can-be-tricky-sometimes)
    + [â–¶ Be careful with chained operations](#-be-careful-with-chained-operations)
    + [â–¶ How not to use `is` operator](#-how-not-to-use-is-operator)
    + [â–¶ Hash brownies](#-hash-brownies)
    + [â–¶ Deep down, we're all the same.](#-deep-down-were-all-the-same)
    + [â–¶ Disorder within order *](#-disorder-within-order-)
    + [â–¶ Keep trying... *](#-keep-trying-)
    + [â–¶ For what?](#-for-what)
    + [â–¶ Evaluation time discrepancy](#-evaluation-time-discrepancy)
    + [â–¶ `is not ...` is not `is (not ...)`](#-is-not--is-not-is-not-)
    + [â–¶ A tic-tac-toe where X wins in the first attempt!](#-a-tic-tac-toe-where-x-wins-in-the-first-attempt)
    + [â–¶ The sticky output function](#-the-sticky-output-function)
    + [â–¶ The chicken-egg problem *](#-the-chicken-egg-problem-)
    + [â–¶ Subclass relationships](#-subclass-relationships)
    + [â–¶ All-true-ation *](#-all-true-ation-)
    + [â–¶ The surprising comma](#-the-surprising-comma)
    + [â–¶ Strings and the backslashes](#-strings-and-the-backslashes)
    + [â–¶ not knot!](#-not-knot)
    + [â–¶ Half triple-quoted strings](#-half-triple-quoted-strings)
    + [â–¶ What's wrong with booleans?](#-whats-wrong-with-booleans)
    + [â–¶ Class attributes and instance attributes](#-class-attributes-and-instance-attributes)
    + [â–¶ Non-reflexive class method *](#-non-reflexive-class-method-)
    + [â–¶ yielding None](#-yielding-none)
    + [â–¶ Yielding from... return! *](#-yielding-from-return-)
    + [â–¶ Nan-reflexivity *](#-nan-reflexivity-)
    + [â–¶ Mutating the immutable!](#-mutating-the-immutable)
    + [â–¶ The disappearing variable from outer scope](#-the-disappearing-variable-from-outer-scope)
    + [â–¶ The mysterious key type conversion](#-the-mysterious-key-type-conversion)
    + [â–¶ Let's see if you can guess this?](#-lets-see-if-you-can-guess-this)
  * [Section: Slippery Slopes](#section-slippery-slopes)
    + [â–¶ Modifying a dictionary while iterating over it](#-modifying-a-dictionary-while-iterating-over-it)
    + [â–¶ Stubborn `del` operation](#-stubborn-del-operation)
    + [â–¶ The out of scope variable](#-the-out-of-scope-variable)
    + [â–¶ Deleting a list item while iterating](#-deleting-a-list-item-while-iterating)
    + [â–¶ Lossy zip of iterators *](#-lossy-zip-of-iterators-)
    + [â–¶ Loop variables leaking out!](#-loop-variables-leaking-out)
    + [â–¶ Beware of default mutable arguments!](#-beware-of-default-mutable-arguments)
    + [â–¶ Catching the Exceptions](#-catching-the-exceptions)
    + [â–¶ Same operands, different story!](#-same-operands-different-story)
    + [â–¶ Name resolution ignoring class scope](#-name-resolution-ignoring-class-scope)
    + [â–¶ Needles in a Haystack *](#-needles-in-a-haystack-)
    + [â–¶ Splitsies *](#-splitsies-)
    + [â–¶ Wild imports *](#-wild-imports-)
    + [â–¶ All sorted? *](#-all-sorted-)
    + [â–¶ Midnight time doesn't exist?](#-midnight-time-doesnt-exist)
  * [Section: The Hidden treasures!](#section-the-hidden-treasures)
    + [â–¶ Okay Python, Can you make me fly?](#-okay-python-can-you-make-me-fly)
    + [â–¶ `goto`, but why?](#-goto-but-why)
    + [â–¶ Brace yourself!](#-brace-yourself)
    + [â–¶ Let's meet Friendly Language Uncle For Life](#-lets-meet-friendly-language-uncle-for-life)
    + [â–¶ Even Python understands that love is complicated](#-even-python-understands-that-love-is-complicated)
    + [â–¶ Yes, it exists!](#-yes-it-exists)
    + [â–¶ Ellipsis *](#-ellipsis-)
    + [â–¶ Inpinity](#-inpinity)
    + [â–¶ Let's mangle](#-lets-mangle)
  * [Section: Appearances are deceptive!](#section-appearances-are-deceptive)
    + [â–¶ Skipping lines?](#-skipping-lines)
    + [â–¶ Teleportation](#-teleportation)
    + [â–¶ Well, something is fishy...](#-well-something-is-fishy)
  * [Section: Miscellaneous](#section-miscellaneous)
    + [â–¶ `+=` is faster](#--is-faster)
    + [â–¶ Let's make a giant string!](#-lets-make-a-giant-string)
    + [â–¶ Minor Ones *](#-minor-ones-)
- [Contributing](#contributing)
- [Acknowledgements](#acknowledgements)
- [ğŸ“ License](#-license)
  * [Surprise your friends as well!](#surprise-your-friends-as-well)
  * [More content like this?](#more-content-like-this)

<!-- tocstop -->

# Cáº¥u trÃºc cá»§a cÃ¡c vÃ­ dá»¥

Táº¥t cáº£ cÃ¡c cÃ¡c vÃ­ dá»¥ Ä‘Æ°á»£c trÃ¬nh bÃ y vá»›i cáº¥u trÃºc nhÆ° sau:
> ### â–¶ Má»™t tiÃªu Ä‘á» háº¥p dáº«n
>
> ```py
> # Äoáº¡n mÃ£ táº¡o dá»±ng vÃ­ dá»¥.
> # Äoáº¡n mÃ£ chá»§ thá»ƒ cáº§n khÃ¡m phÃ¡...
> ```
>
> **Káº¿t quáº£ (CÃ¡c phiÃªn báº£n Python):**
>
> ```py
> >>> cÃ¢u lá»‡nh kÃ­ch hoáº¡t?
> Má»™t vÃ i káº¿t quáº£ báº¥t ngá», khÃ´ng nhÆ° mong Ä‘á»£i
> ```
> (CÃ³ thá»ƒ cÃ³ hay khÃ´ng): Má»™t dÃ²ng mÃ´ táº£ káº¿t quáº£
>
>
> #### ğŸ’¡ Giáº£i thÃ­ch:
>
> * Giáº£i thÃ­ch nhá»¯ng Ä‘iá»u Ä‘ang diá»…n ra vÃ  táº¡i sao.
> ```py
> # Äoáº¡n mÃ£ táº¡o dá»±ng vÃ­ dá»¥
> # Trong trÆ°á»ng há»£p cáº§n thiáº¿t, chÃºng tÃ´i liá»‡t kÃª thÃªm nhiá»u vÃ­ dá»¥ khÃ¡c Ä‘á»ƒ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n
> ```
> **Káº¿t quáº£ (CÃ¡c phiÃªn báº£n Python):**
>
> ```py
> >>> trigger # some example that makes it easy to unveil the magic
> >>> trigger # Má»™t vÃ i vÃ­ dá»¥ giÃºp báº¡n hiá»ƒu cÃ¡c Ä‘oáº¡n mÃ£
> # some justified output
> ```

**LÆ°u Ã½:** Táº¥t cáº£ cÃ¡c vÃ­ dá»¥ Ä‘Ã£ Ä‘Æ°á»£c chá»©ng minh cháº¡y thÃ nh cÃ´ng trÃªn trÃ¬nh thÃ´ng dá»‹ch Python 3.5.2 cháº¿ Ä‘á»™ tÆ°Æ¡ng tÃ¡c, vá»›i cÃ¡c phiÃªn báº£n Python khÃ¡c cÃ¡c vÃ­ dá»¥ sáº½ váº«n cháº¡y bÃ¬nh thÆ°á»ng, ngoáº¡i trá»« má»™t sá»‘ vÃ­ dá»¥ chÃºng tÃ´i sáº½ lÆ°u Ã½ trÆ°á»›c pháº§n káº¿t quáº£.
# CÃ¡ch dÃ¹ng cÃ¡c vÃ­ dá»¥

Theo tÃ´i, Ä‘á»ƒ há»c cÃ¡c vÃ­ dá»¥ trong bÃ i, báº¡n nÃªn Ä‘á»c theo trÃ¬nh tá»± thá»i gian, vÃ  Ä‘á»‘i vá»›i má»—i vÃ­ dá»¥ hÃ£y:
- Äá»c kÄ© Ä‘oáº¡n mÃ£ táº¡o dá»±ng nÃªn vÃ­ dá»¥. Náº¿u báº¡n Ä‘Ã£ láº­p trÃ¬nh lÃ¢u rá»“i, báº¡n sáº½ Ä‘oÃ¡n Ä‘Æ°á»£c nhá»¯ng Ä‘iá»u sáº¯p tá»›i ngay.
- Äá»c káº¿t quáº£ cá»§a cÃ¡c vÃ­ dá»¥ vÃ  thá»±c hiá»‡n hai viá»‡c sau:
  + Kiá»ƒm tra xem káº¿t quáº£ cÃ³ giá»‘ng nhÆ° báº¡n nghÄ© hay khÃ´ng.
  + Má»™t khi Ä‘á»c xong, hÃ£y há»i chÃ­nh báº¡n xem mÃ¬nh Ä‘Ã£ hiá»ƒu thÃ´ng suá»‘t lÃ½ do mÃ  cÃ³ káº¿t quáº£ nhÆ° váº­y chÆ°a.
    - Náº¿u cÃ¢u tráº£ lá»i lÃ  "chÆ°a, tÃ´i chÆ°a hiá»ƒu" (khÃ´ng sao cáº£), hÃ­t má»™t hÆ¡i tháº­t sau, vÃ  Ä‘á»c pháº§n giáº£i thÃ­ch (náº¿u báº¡n váº«n chÆ°a hiá»ƒu, hÃ£y táº¡o má»™t issue [á»Ÿ dÃ¢y](https://github.com/satwikkansal/wtfpython/issues/new)).
    - Náº¿u cÃ¢u tráº£ lá»i lÃ  "cÃ³, tÃ´i Ä‘Ã£ hiá»ƒu", báº¡n cÃ³ thá»ƒ Ä‘á»c vÃ­ dá»¥ tiáº¿p theo.
PS: Báº¡n cÃ³ thá»ƒ Ä‘á»c WTFPython dÃ¹ng cháº¿ Ä‘á»™ dÃ²ng lá»‡nh sá»­ dá»¥ng [pypi package](https://pypi.python.org/pypi/wtfpython),
```sh
$ pip install wtfpython -U
$ wtfpython
```
---

# ğŸ‘€ CÃ¡c vÃ­ dá»¥

## ChÆ°Æ¡ng 1: Hack nÃ£o!

### â–¶ MÃ³n khai vá»‹! *

<!-- Example ID: d3d73936-3cf1-4632-b5ab-817981338863 -->
<!-- read-only -->

KÃ­ hiá»‡u "con hÃ  mÃ£" ("Walrus" operator), Ä‘Æ°á»£c giá»›i thiá»‡u trong phiÃªn báº£n Python 3.8 Ä‘Ã£ trá»Ÿ nÃªn khÃ¡ phá»• biáº¿n vÃ¬ má»™t vÃ i lÃ½ do. HÃ£y thá»­ qua nÃ³ xem
1\.

```py
# PhiÃªn báº£n Python 3.8+

>>> a = "wtf_walrus"
>>> a
'wtf_walrus'

>>> a := "wtf_walrus"
File "<stdin>", line 1
    a := "wtf_walrus"
      ^
SyntaxError: invalid syntax (Lá»—i vá» cÃº phÃ¡p: CÃº phÃ¡p khÃ´ng há»£p lá»‡)

>>> (a := "wtf_walrus") # This works though
>>> a
'wtf_walrus'
```

2 \.

```py
# PhiÃªn báº£n Python 3.8+

>>> a = 6, 9
>>> a
(6, 9)

>>> (a := 6, 9)
>>> a
6

>>> a, b = 6, 9 # PhÃ¢n rÃ£ (unpacking) cÃ¡c giÃ¡ trá»‹, hay cÃ²n gá»i lÃ  cÃ¢u lá»‡nh gÃ¡n Ä‘a giÃ¡ trá»‹ (multiple assignments)
>>> a, b
(6, 9)
>>> (a, b = 16, 19) # CÃ³ 
  File "<stdin>", line 1
    (a, b = 6, 9)
          ^
SyntaxError: invalid syntax (Lá»—i cÃº phÃ¡p: cÃº phÃ¡p khÃ´ng há»£p lá»‡)

>>> (a, b := 16, 19) # CÃ¢u lá»‡nh nÃ y in ra má»™t tuple cÃ³ 3 pháº§n tá»­ khÃ´ng nhÆ° mong Ä‘á»£i (Ä‘Ã¡ng láº½ lÃ  2 pháº§n tá»­ 16 vÃ  19)
(6, 16, 19)

>>> a # a Ä‘Æ°á»£c Ä‘Æ°á»£c gÃ¡n láº¡i giÃ¡ trá»‹ trÆ°á»›c Ä‘Ã³, nhÆ°ng giÃ¡ trá»‹ phÃ­a dÆ°á»›i váº«n giá»¯ nguyÃªn, lÃ  sao?
6

>>> b 
16
```



#### ğŸ’¡ Giáº£i thÃ­ch

**Ã”n láº¡i má»™t chÃºt vá» kÃ­ hiá»‡u "con hÃ  mÃ£"**

KÃ­ hiá»‡u con hÃ  mÃ£ (`:=`) láº§n Ä‘áº§u tiÃªn Ä‘Æ°á»£c giá»›i thiá»‡u trong phiÃªn báº£n Python 3.8, nÃ³ há»¯u dá»¥ng khi báº¡n muá»‘n gÃ¡n giÃ¡ trá»‹ cho cÃ¡c biáº¿n bÃªn trong má»™t biá»ƒu diá»…n (expression).

```py
def some_func():
        # Giáº£ Ä‘á»‹nh ráº±ng ta thá»±c hiá»‡n má»™t vÃ i phÃ©p tÃ­nh tá»‘n nhiá»u tÃ i nguyÃªn (thá»i gian, I/O) á»Ÿ Ä‘Ã¢y
        # time.sleep(1000)
        return 5

# Thay vÃ¬ thá»±c hiá»‡n viá»‡c kiá»ƒm tra káº¿t quáº£ tráº£ vá» cá»§a hÃ m trÃªn,
if some_func():
        print(some_func()) # VÃ  gá»i láº¡i hÃ m Ä‘Ã³ trong thÃ¢n Ä‘iá»u kiá»‡n, nghÄ©a lÃ  thá»±c hiá»‡n cÃ¡c tÃ­nh toÃ¡n trong hÃ m 2 láº§n.
# Hay tá»‘t hÆ¡n, ta cÃ³ thá»ƒ tiáº¿t kiá»‡m má»™t lá»i gá»i hÃ m thÃ´ng qua viá»‡c láº¥y vá» giÃ¡ trá»‹ tráº£ vá» á»Ÿ má»™t láº§n gá»i vÃ  thá»±c hiá»‡n so sÃ¡nh trÃªn giÃ¡ trá»‹ Ä‘Ã³:
a = some_func()
if a:
    print(a)

# DÃ¹ng kÄ© hiá»‡u con hÃ  mÃ£ báº¡n cÃ³ thá»ƒ viáº¿t ngáº¯n gá»n hÆ¡n nhÆ° dÆ°á»›i Ä‘Ã¢y, phÃ©p gÃ¡n Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° má»‡nh Ä‘á» Ä‘iá»u kiá»‡n vÃ  ta cÃ³ thá»ƒ sá»­ dá»¥ng biáº¿n Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ trong thÃ¢n cÃ¢u Ä‘iá»u kiá»‡n if:
if a := some_func():
        print(a)
```

**Káº¿t quáº£ (> 3.8):**

```py
5
5
5
```

Sá»­ dá»¥ng kÃ­ hiá»‡u con hÃ  mÃ£ giÃºp ta rÃºt ngáº¯n Ä‘Æ°á»£c Ä‘oáº¡n mÃ£ Ä‘i má»™t dÃ²ng vÃ  trÃ¡nh Ä‘Æ°á»£c viá»‡c gá»i `some_func` hai láº§n.
  
- Ta chá»‰ Ä‘Æ°á»£c sá»­ dá»¥ng phÃ©p gÃ¡n cÃ³ kÃ­ hiá»‡u hÃ  mÃ£ á»Ÿ cáº¥p Ä‘á»™ cao nháº¥t do Ä‘Ã³ lá»—i cÃº phÃ¡p (`SyntaxError`) trong cÃ¢u lá»‡nh `a := "wtf_walrus"` xáº£y ra. Khi ta cho phÃ©p gÃ¡n nÃ y vÃ o hai dáº¥u ngoáº·c Ä‘Æ¡n `()` thÃ¬ sáº½ khÃ´ng bá»‹ lá»—i ná»¯a.  

- ThÃ´ng thÆ°á»ng, cÃ¢u lá»‡nh cÃ³ dáº¥u báº±ng `=` sáº½ khÃ´ng Ä‘Æ°á»£c phÃ©p Ä‘áº·t trong dáº¥u ngoáº·c Ä‘Æ¡n. Do váº­y cÃ¢u lá»‡nh `(a, b = 6, 9)` bá»‹ lá»—i cÃº phÃ¡p. 

- CÃº phÃ¡p cá»§a kÃ­ hiá»‡u gÃ¡n con hÃ  mÃ£ nhÆ° sau: `NAME:= expr`, á»Ÿ Ä‘Ã³ `NAME` lÃ  má»™t tÃªn biáº¿n há»£p lá»‡, vÃ  `expr` lÃ  má»™t biá»ƒu diá»…n há»£p lá»‡. Do váº­y, viá»‡c sá»­ dá»¥ng cÃ¡c phÃ©p gá»™p (packing) hay phÃ¢n rÃ£ trong trÆ°á»ng há»£p nÃ y sáº½ khÃ´ng Ä‘Æ°á»£c há»— trá»£, nghÃ£i lÃ  
  - `(a := 6, 9)` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `((a := 6), 9)` vÃ  buá»•i diá»…n cuá»‘i cÃ¹ng lÃ   `(a, 9) ` (á»Ÿ Ä‘Ã³ giÃ¡ trá»‹ cá»§a  `a` lÃ  6). Báº¡n cÃ³ thá»ƒ kiá»ƒm tra láº¡i vá»›i cÃ¡c dÃ²ng lá»‡nh dÆ°á»›i Ä‘Ã¢y

    ```py
    >>> (a := 6, 9) == ((a := 6), 9)
    True # Biá»ƒu diá»…n bÃªn trÃ¡i báº±ng bÃªn pháº£i do phÃ©p phÃ¢n rÃ£ khÃ´ng Ä‘Æ°á»£c phÃ©p (nhÆ° Ä‘Ã£ giáº£i thÃ­ch phÃ­a trÃªn)
    >>> x = (a := 696, 9)
    >>> x
    (696, 9)
    >>> x[0] is a # Cáº£ x[0] vÃ  a cÃ¹ng trá» vá» chung má»™t Ä‘á»‹a chá»‰ trong bá»™ nhá»› 
    True
    ```

  - TÆ°Æ¡ng tá»±, `(a, b := 16, 19)` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `(a, (b := 16), 19)` khi ta cÃ³ 3 giÃ¡ trá»‹ trong má»™t tuple. 

---

### â–¶ Strings thá»‰nh thoáº£ng cÃ³ thá»ƒ khÃ¡ oÃ¡i oÄƒm

<!-- Example ID: 30f1d3fc-e267-4b30-84ef-4d9e7091ac1a --->
1\.

```py
>>> a = "some_string"
>>> id(a)
140420665652016
>>> id("some" + "_" + "string") # Äá»ƒ Ã½ ráº±ng cáº£ hai giÃ¡ trá»‹ id Ä‘á»u giá»‘ng nhau (140420665652016).
140420665652016
```

2\.
```py
>>> a = "wtf"
>>> b = "wtf"
>>> a is b
True # a vÃ  b cÃ¹ng trá» tá»›i má»™t Ä‘á»‹a chá»‰ trong bá»™ nhá»›

>>> a = "wtf!"
>>> b = "wtf!"
>>> a is b
False # a vÃ  b khÃ´ng cÃ¹ng trá» tá»›i má»™t Ä‘á»‹a chá»‰ trong bá»™ nhá»›

```

3\.

```py
>>> a, b = "wtf!", "wtf!"
>>> a is b # Ãp dá»¥ng cho táº¥t cáº£ cÃ¡c phiÃªn báº£n Python, ngoáº¡i trá»« cÃ¡c phiÃªn báº£n 3.7.x
True # a vÃ  b cÃ¹ng trá» tá»›i má»™t Ä‘á»‹a chá»‰ trong bá»™ nhá»›

>>> a = "wtf!"; b = "wtf!"
>>> a is b # Káº¿t quáº£ lÃ  True hoáº·c False tuá»³ thuá»™c vÃ o mÃ´i trÆ°á»ng bÃªn cháº¡y Ä‘oáº¡n mÃ£ (python shell / ipython / as a script)
False
```

```py
# Táº¡o má»™t file tÃªn some_file.py, chá»©a ba dÃ²ng code dÆ°á»›i Ä‘Ã¢y:
a = "wtf!"
b = "wtf!"
print(a is b)

# Khi file nÃ y Ä‘Æ°á»£c cháº¡y káº¿t quáº£ in ra lÃ  True

```

4\.

**Káº¿t quáº£ (< Python3.7 )**

```py
>>> 'a' * 20 is 'aaaaaaaaaaaaaaaaaaaa'
True
>>> 'a' * 21 is 'aaaaaaaaaaaaaaaaaaaaa'
False
```

CÃ³ gÃ¬ Ä‘Ã³ sai sai?

#### ğŸ’¡Giáº£i thÃ­ch:
+ Nhá»¯ng Ä‘iá»u xáº£y ra trong cÃ¡c Ä‘oáº¡n mÃ£ Ä‘áº§u tiÃªn vÃ  thá»© hai Ä‘áº¿n tá»« má»™t tá»‘i Æ°u cá»§a CPython (Ä‘Æ°á»£c gá»i lÃ  string interning), tá»‘i Æ°u nÃ y cá»‘ gáº¯ng sá»­ dá»¥ng cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ hiá»‡n tá»“n táº¡i trong má»™t vÃ i trÆ°á»ng há»£p thay vÃ¬ viá»‡c táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i má»—i láº§n.
+ Sau khi Ä‘Æ°á»£c "interned," nhiá»u biáº¿n cÃ³ thá»ƒ tham chiáº¿u tá»›i cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng string trong bá»™ nhá»› (do váº­y mÃ  tiáº¿t kiá»‡m bá»™ nhá»›).
+ Trong cÃ¡c Ä‘oáº¡n mÃ£ phÃ­a trÃªn, cÃ¡c strings Ä‘Æ°á»£c interned má»™t cÃ¡ch ngáº§m. Quyáº¿t Ä‘á»‹nh ki nÃ o thÃ¬ intern má»™t cÃ¡ch ngáº§m lÃ  phá»¥ thuá»™c vÃ o má»—i triá»ƒn khai Python. CÃ³ má»™t vÃ i luáº­t cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘oÃ¡n biáº¿t má»™t string sáº½ Ä‘Æ°á»£c intern hay khÃ´ng:
  * Táº¥t cáº£ strings cÃ³ Ä‘á»™ dÃ i báº±ng 0 vÃ  1 Ä‘Æ°á»£c intern.
  * CÃ¡c strings Ä‘Æ°á»£c intern táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch (`'wtf'` sáº½ Ä‘Æ°á»£c intern nhÆ°ng `''.join(['w', 't', 'f'])` sáº½ khÃ´ng Ä‘Æ°á»£c intern).
  * CÃ¡c strings khÃ´ng Ä‘Æ°á»£c táº¡o thÃ nh tá»« cÃ¡c máº«u tá»± ASCII, sá»‘, hoáº·c dáº¥u gáº¡ch chÃ¢n, sáº½ khÃ´ng Ä‘Æ°á»£c intern. Äiá»u Ä‘Ã³ giáº£i thÃ­ch táº¡i sao `'wtf!'` khÃ´ng Ä‘Æ°á»£c intern bá»Ÿi vÃ¬ kÃ­ tá»± `!`. Triá»ƒn khai Cpython cho luáº­t nÃ y cÃ³ thá»ƒ tÃ¬m tháº¥y [á»Ÿ Ä‘Ã¢y](https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19)
  ![image](../images/string-intern/string_intern.png)
+ Khi `a` and `b` Ä‘Æ°á»£c cho nháº­n giÃ¡ trá»‹ `"wtf!"` trÃªn cÃ¹ng má»™t dÃ²ng, trÃ¬nh thÃ´ng dá»‹ch Python sáº½ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i, sau Ä‘Ã³ tham chiáº¿u tá»›i biáº¿n thá»© hai táº¡i cÃ¹ng má»™t thá»i Ä‘iá»ƒm. Náº¿u báº¡n lÃ m cÃ¡c phÃ©p gÃ¡n trÃªn cÃ¡c dÃ²ng riÃªng biá»‡t, trÃ¬nh thÃ´ng dá»‹ch sáº½ khÃ´ng biáº¿t ráº±ng Ä‘Ã£ cÃ³ `"wtf!"` tá»“n táº¡i nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng (bá»Ÿi vÃ¬  `"wtf!"` khÃ´ng Ä‘Æ°á»£c intern ngáº§m nhÆ° Ä‘iá»u Ä‘Æ°á»£c trÃ¬nh bÃ y trÃªn). ÄÃ¢y lÃ  má»™t tá»‘i Æ°u táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch. Tá»‘i Æ°u nÃ y khÃ´ng Ã¡p dá»¥ng cho cÃ¡c phiÃªn báº£n CPython 3.7.x (xem thÃªm vá» váº¥n Ä‘á» nÃ y [á»Ÿ Ä‘Ã¢y] (https://github.com/satwikkansal/wtfpython/issues/100)).
+ Má»™t Ä‘Æ¡n vá»‹ biÃªn dá»‹ch trong mÃ´i trÆ°á»ng tÆ°Æ¡ng tÃ¡c nhÆ° IPython bao gá»“m chá»‰ má»™t cÃ¢u lá»‡nh Ä‘Æ¡n, trÃ¡i láº¡i `a = "wtf!"; b = "wtf!"`lÃ  hai cÃ¢u lá»‡nh. Äiá»u nÃ y giáº£i thÃ­ch táº¡i sao cÃ¡c danh Ä‘á»‹nh (identities) láº¡i khÃ¡c nhau trong `a = "wtf!"; b = "wtf!"`, vÃ  cÅ©ng giáº£i thÃ­ch táº¡i sao chÃºng láº¡i giá»‘ng nhau trong `some_file.py`.
+ Sá»± thay Ä‘á»•i Ä‘á»™t ngá»™t trong Ä‘oáº¡n mÃ£ thá»© tÆ° lÃ  do má»™t kÄ© thuáº­t [Tá»‘i Æ°u peephole](https://en.wikipedia.org/wiki/Peephole_optimization) hay cÃ²n Ä‘Æ°á»£c biáº¿t Ä‘áº¿n nhÆ° sá»± gáº¥p háº±ng sá»‘. Äiá»u nÃ y cÃ³ nghÄ©a lÃ   biá»ƒu diá»…n `'a'*20` Ä‘Æ°á»£c thay tháº¿ bá»Ÿ `'aaaaaaaaaaaaaaaaaaaa'` trong quÃ¡ trÃ¬nh biÃªn dá»‹ch tiáº¿t kiá»‡m má»™t vÃ i chu kÃ¬ Ä‘á»“ng há»“ trong suá»‘t thá»i gian cháº¡y . Sá»± gáº¥p háº±ng sá»‘ chá»‰ xáº£y ra Ä‘á»‘i vá»›i cÃ¡c strings cÃ³ Ä‘á»™ dÃ i nhá» hÆ¡n 20 (Táº¡i sao? tÆ°á»Ÿng tÆ°á»£ng kÃ­ch thÆ°á»›c cá»§a file `.pyc` sinh ra bá»Ÿi biá»ƒu diá»…n `'a'*10**10`). [Link nÃ y](https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288) dáº«n tá»›i triá»ƒn khai cá»§a tá»‘i Æ°u Ä‘Æ°á»£c Ä‘á» cáº­p.
+ ChÃº Ã½ ráº±ng: trong Python 3.7, gáº¥p háº±ng sá»‘ Ä‘Æ°á»£c chuyá»ƒn tá»« bá»™ tá»‘i Æ°u peephole sang bá»™ tá»‘i Æ°u má»›i AST vá»›i má»™t vÃ i thay Ä‘á»•i luáº­n lÃ½, nÃªn Ä‘oáº¡n mÃ£ thá»© tÆ° khÃ´ng cháº¡y Ä‘Æ°á»£c trong Python 3.7. Báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm vá» sá»± thay Ä‘á»•i nÃ y [á»Ÿ ](https://bugs.python.org/issue11549). 

---


### â–¶ Be careful with chained operations
<!-- Example ID: 07974979-9c86-4720-80bd-467aa19470d9 --->
```py
>>> (False == False) in [False] # makes sense
False
>>> False == (False in [False]) # makes sense
False
>>> False == False in [False] # now what?
True

>>> True is False == False
False
>>> False is False is False
True

>>> 1 > 0 < 1
True
>>> (1 > 0) < 1
False
>>> 1 > (0 < 1)
False
```

#### ğŸ’¡ Giáº£i thÃ­ch:

As per https://docs.python.org/2/reference/expressions.html#not-in


> Náº¿u a, b, c, ..., y, z lÃ  cÃ¡c biá»ƒu diá»…n (expressions) vÃ  op1, op2, ..., opN lÃ  cÃ¡c phÃ©p so sÃ¡nh, khi Ä‘Ã³ op1 b op2 c ... y opN z tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i op1 b and b op2 c and ... y opN, ngoáº¡i trÃ¬ viá»‡c má»—i biá»ƒu diá»…n Ä‘Æ°á»£c thá»±c hiá»‡n hay Ä‘Ã¡nh giÃ¡ nhiá»u nhÃ¢t má»™t láº§n

Trong khi nhá»¯ng Ä‘iá»u ta tháº¥y phÃ­a trÃªn cÃ³ thá»ƒ hÆ¡i ngá»› ngáº©n Ä‘á»‘i vá»›i báº¡n, ta cÃ³ thá»ƒ lÃ m nhá»¯ng thá»© thÃº vá»‹ hÆ¡n nhÆ° `a == b == c` vÃ  `0 <= x <= 100`.

* `False is False is False` tÆ°Æ¡ng Ä‘Æ°Æ¡ng `(False is False) and (False is False)`
* `True is False == False` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `True is False and False == False` vÃ  do pháº§n so sÃ¡nh Ä‘áº§u tiÃªn (`True is False`) cho ra káº¿t quáº£ `False`, do Ä‘Ã³ káº¿t quáº£ cuá»‘i cÃ¹ng lÃ  `False`.
* `1 > 0 < 1` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `1 > 0 and 0 < 1` vÃ  cho ra káº¿t quáº£ lÃ  `True`.
* Biá»ƒu diá»…n `(1 > 0) < 1` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `True < 1` vÃ 
  ```py
  >>> int(True)
  1
  >>> True + 1 #lÃ m cho vui thÃ´i, chá»© khÃ´ng liÃªn quan
  2
  ```
  do Ä‘Ã³, `1 < 1` cho ra káº¿t quáº£`False`

---

### â–¶ How not to use `is` operator
<!-- Example ID: 230fa2ac-ab36-4ad1-b675-5f5a1c1a6217 --->
VÃ­ dá»¥ dÆ°Æ¡i Ä‘Ã¢y ráº¥t ná»•i tiáº¿ng trÃªn Internet
1\.

```py
>>> a = 256
>>> b = 256
>>> a is b
True

>>> a = 257
>>> b = 257
>>> a is b
False
```

2\.

```py
>>> a = []
>>> b = []
>>> a is b
False

>>> a = tuple()
>>> b = tuple()
>>> a is b
True
```

3\.
**Káº¿t quáº£**

```py
>>> a, b = 257, 257
>>> a is b
True
```

**Káº¿t qá»§a (Chá»‰ Ã¡p dá»¥ng cho Python 3.7.x )**

```py
>>> a, b = 257, 257
>> a is b
False
```

#### ğŸ’¡ Giáº£i thÃ­ch:

**Sá»± khÃ¡c biá»‡t giá»¯a `is` vÃ  `==`**

* `is` kiá»ƒm tra xem cáº£ hai pháº§n tá»­ so sÃ¡nh cÃ³ trá» vá» cÃ¹ng má»™t Ä‘Ã´i tÆ°á»£ng (vÃ­ dá»¥, `is` kiá»ƒm tra Ä‘á»‹nh danh cá»§a cáº£ hai thÃ nh pháº§n Ä‘Æ°á»£c so sÃ¡nh cÃ³ khá»›p vá»›i nhau hay khÃ´ng)
* `==` so sÃ¡nh giÃ¡ trá»‹ cá»§a hai pháº§n tá»­ xem chÃºng cÃ³ báº±ng nhau hay khÃ´ng
* VÃ¬ tháº¿ `is` Ä‘Æ°á»£c dÃ¹ng cho viá»‡c so sÃ¡nh tham chiáº¿u vÃ  `==` Ä‘Æ°á»£c dÃ¹ng cho so sÃ¡nh tham trá»‹. HÃ£y xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n
  ```py
  >>> class A: pass
  >>> A() is A() # Hai Ä‘á»‘i tÆ°á»£ng rá»—ng nhÆ°ng náº±m á»Ÿ hai vá»‹ trÃ­ khÃ¡c nhau trong bá»™ nhá»›.
  False
  ```
** `256` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng hiá»‡n há»¯u nhÆ°ng `257` láº¡i khÃ´ng pháº£i lÃ  má»™t Ä‘á»‘i tÆ°á»£ng hiá»‡n há»¯u.

Khi báº¡n khá»Ÿi cháº¡y python cÃ¡c sá»‘ tá»« `-5` tá»›i `256` sáº½ Ä‘Æ°á»£c cáº¥p phÃ¡t. Nhá»¯ng sÃ´ nay Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t nhiá»u, do Ä‘Ã³ viá»‡c cáº¥p phÃ¡t nÃ y lÃ  há»£p lÃ½.
Tham kháº£o tá»« https://docs.python.org/3/c-api/long.html

> CÃ¡ch triá»ƒn khai hiá»‡n hÃ nh cá»§a Python duy trÃ¬ má»™t máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng sÃ´ nguyÃªn tá»« -5 tá»›i 256, khi báº¡n táº¡o má»™t sá»‘ nguyÃªn trong dáº£i nÃ y báº¡n sáº½ quay trá»Ÿ vá» láº¡i má»™t tham chiáº¿u tá»›i má»™t Ä‘Ã´i tÆ°á»£ng tá»“n táº¡i. Do váº­y ta váº«n cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a 1. 

```py
>>> id(256)
10922528
>>> a = 256
>>> b = 256
>>> id(a)
10922528
>>> id(b)
10922528
>>> id(257)
140084850247312
>>> x = 257
>>> y = 257
>>> id(x)
140084850247440
>>> id(y)
140084850247344
```


á» Ä‘Ã¢y trÃ¬nh thÃ´ng dá»‹ch khÃ´ng Ä‘á»§ thÃ´ng minh khi thá»±c thi `y = 257` vÃ  nháº­n ra ráº±ng chÃºng ta Ä‘Ã£ táº¡o má»™t sá»‘ nguyÃªn cÃ³ giÃ¡ trá»‹ lÃ  `257,` rá»“i, do Ä‘Ã³ nÃ³ tiáº¿p tá»¥c táº¡o má»™t Ä‘Ã´i tÆ°á»£ng khÃ¡c trong bá»™ nhá»›. 

Má»™t tá»‘i Æ°u tÆ°Æ¡ng tá»± Ã¡p dá»¥ng cho cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n (**immutable**) khÃ¡c nhÆ° lÃ  cÃ¡c tuples. Bá»Ÿi vÃ¬ lists cÃ³ thá»ƒ biáº¿n Ä‘á»•i Ä‘Æ°á»£c, do Ä‘Ã³ ta hiá»ƒu táº¡i sao `[] is []` sáº½ tráº£ vá» `False` vÃ  `() is ()` sáº½ tráº£ vá» `True`. Äiá»u nÃ y giáº£i thÃ­ch Ä‘oáº¡n mÃ£ thá»© hai. NÃ o hÃ£y cÃ¹ng Ä‘i qua vÃ­ dá»¥ thá»© 3.

** Cáº£ `a` vÃ  `b` Ä‘á»u trá» vá» cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng khi Ä‘Æ°á»£c khá»Ÿi táº¡o vá»›i cung má»™t giÃ¡ trá»‹ vÃ  trÃªn cÃ¹ng má»™t dÃ²ng code**
**Káº¿t quáº£**

```py
>>> a, b = 257, 257
>>> id(a)
140640774013296
>>> id(b)
140640774013296
>>> a = 257
>>> b = 257
>>> id(a)
140640774013392
>>> id(b)
140640774013488
```


* TrÃªn cÃ¹ng má»™t dÃ²ng code nÆ¡i cáº£ a va b Ä‘Æ°á»£c gÃ¡n cho giÃ¡ trá»‹ `257`, trinh thÃ´ng dá»‹ch Python táº¡o má»™t Ä‘Ã´i tÆ°á»£ng má»›i, sau Ä‘Ã³ trá» tá»›i biáº¿n thá»© hai cÃ¹ng má»™t lÃºc. Náº¿u báº¡n thá»±c hiá»‡n viá»‡c gÃ¡n trÃªn cÃ¡c dÃ²ng riÃªng biá»‡t, Python sáº½ khÃ´ng biáº¿t ráº±ng Ä‘Ã£ cÃ³ sÄƒn má»™t Ä‘á»‘i tÆ°á»£ng `257`

* ÄÃ¢y lÃ  má»™t tá»‘i Æ°u cá»§a trÃ¬nh biÃªn dá»‹ch, vÃ  Ã¡p dá»¥ng cá»¥ thá»ƒ cho mÃ´i trÆ°á»ng tÆ°Æ¡ng tÃ¡c (interactive environment). Khi báº¡n nháº­p hai dÃ²ng code trong phiÃªn thÃ´n dá»‹ch Ä‘á»™ng, chÃºng Ä‘Æ°á»£c biÃªn dá»‹ch riÃªng, do Ä‘Ã³ Ä‘Æ°á»£c tá»‘i Æ°u riÃªng. Náº¿u báº¡n thá»­ vÃ­ dá»¥ nÃ y trong má»™t file `.py` báº¡n sáº½ khÃ´ng tháº¥y Ä‘iá»u trÃªn xáº£y ra do file code Ä‘Æ°á»£c biÃªn dá»‹ch má»™t láº§n. Tá»‘i Æ°u nay khÃ´ng chá»‰ giÆ¡i háº¡n cho cÃ¡c sá»‘ nguyÃªn, nÃ³ cÃ²n hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c vá»›i cÃ¡c kiá»ƒu dá»¯ liá»‡u báº¥t biáº¿n khÃ¡c nhÆ° strings (xem "Strings are tricky example") vÃ  floats.
  ```py
  >>> a, b = 257.0, 257.0
  >>> a is b
  True
  ```

* Táº¡i sao vÃ­ dá»¥ nay láº¡i khÃ´ng cháº¡y Ä‘Æ°á»£c trÃªn Python 3.7? Äáº¡i khÃ¡i lÃ½ do lÃ  bá»Ÿi vÃ¬ cÃ¡c tá»‘i Æ°u cá»§a trÃ¬nh biÃªn dá»‹ch Ã¡p dá»¥ng cho cÃ¡c trÆ°á»ng há»£p cá»¥ thá»ƒ (vÃ­ dá»¥. má»™t cÃ¡ch tá»‘i Æ°u cÃ³ thá»ƒ thay Ä‘á»•i tuá»³ theo phiÃªn báº£n, há»‡ Ä‘iá»u hÃ nh, vÃ¢n vÃ¢n). TÃ´i vÃ¢n Ä‘ang tÃ¬m hiá»ƒu cÃ¡c thay Ä‘á»•i cá»¥ thá»ƒ trong code triá»ƒu khai, báº¡n cÃ³ thá»ƒ xem thÃªm [táº¡i Ä‘Ã¢y](https://github.com/satwikkansal/wtfpython/issues/100)
---


### â–¶ Hash brownies
<!-- Example ID: eb17db53-49fd-4b61-85d6-345c5ca213ff --->
1\.
```py
some_dict = {}
some_dict[5.5] = "JavaScript"
some_dict[5.0] = "Ruby"
some_dict[5] = "Python"
```

**Káº¿t quáº£:**

```py
>>> some_dict[5.5]
"JavaScript"
>>> some_dict[5.0] # "Python" chiáº¿m láº¥y khoÃ¡ (key) cá»§a "Ruby"?
"Python"
>>> some_dict[5] 
"Python"

>>> complex_five = 5 + 0j
>>> type(complex_five)
complex
>>> some_dict[complex_five]
"Python"
```

Tháº¿ quÃ¡i nÃ o mÃ  toÃ n in ra Python?


#### ğŸ’¡ Giáº£i thÃ­ch

* TÃ­nh duy nháº¥t cá»§a cÃ¡c khoÃ¡ (keys) trong cáº¥u trÃºc dá»¯ liá»‡u tá»« Ä‘iá»ƒn cá»§a Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi  *sá»± tÆ°Æ¡ng Ä‘Æ°Æ¡ng*, chá»© khÃ´ng pháº£i dá»±a trÃªn danh tÃ­nh. Do Ä‘Ã³ dáº«u cho `5`, `5.0`, vÃ  `5 + 0j` lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng riÃªng biá»‡t cÃ³ kiá»ƒu khÃ¡c nhau, nhÆ°ng bá»Ÿi vÃ¬ chÃºng bÄƒng nhau nÃªn khÃ´ng thá»ƒ tá»“n táº¡i nhÆ° má»™t khoÃ¡ riÃªng cá»§a `dict` (hoáº·c `set`). Khi báº¡n thÃªm cÃ¡c khoÃ¡ nÃ y vÃ o tá»« Ä‘iá»ƒn sau Ä‘Ã³ tra giÃ¡ trá»‹ cá»§a khoÃ¡ Ä‘Ã³ dá»±a trÃªn giáº£ Ä‘á»‹nh vá» sá»± tÆ°Æ¡ng Ä‘Æ°Æ¡ng thÃ¬ Python chá»‰ tráº£ vá» giÃ¡ trá»‹ cá»§a khoÃ¡ Ä‘Æ°á»£c chÃ¨n vÃ o ban Ä‘áº§u (thay vÃ¬ tráº£ láº¡i lá»—i vá» truy xuáº¥t khoÃ¡ `KeyError`):
  ```py
  >>> 5 == 5.0 == 5 + 0j
  True
  >>> 5 is not 5.0 is not 5 + 0j
  True
  >>> some_dict = {}
  >>> some_dict[5.0] = "Ruby"
  >>> 5.0 in some_dict
  True
  >>> (5 in some_dict) and (5 + 0j in some_dict)
  True
  ```
* NguyÃªn lÃ½ trÃªn cÅ©ng Ã¡p dá»¥ng khi báº¡n gÃ¡n giÃ¡ trá»‹ cho khoÃ¡. Khi báº¡n thá»±c hiá»‡n phÃ©p gÃ¡n `some_dict[5] = "Python"`, Python tÃ¬m pháº§n tá»­ cÃ³ sáºµn trong tá»« Ä‘iá»ƒn cÃ³ khoÃ¡ tÆ°Æ¡ng Ä‘Æ°Æ¡ng, trong trÆ°á»ng há»£p nÃ y nÃ¨ `5.0 -> "Ruby"`, ghi Ä‘Ã¨ lÃªn giÃ¡ trá»‹ cá»§a khoÃ¡ nÃ y ngay, vÃ  lá» Ä‘i khoÃ¡ tÆ°Æ¡ng Ä‘Æ°Æ¡ng mÃ  báº¡n má»›i cung cáº¥p.
  ```py
  >>> some_dict
  {5.0: 'Ruby'}
  >>> some_dict[5] = "Python"
  >>> some_dict
  {5.0: 'Python'}
  ```

* Váº­y lÃ m sao Ä‘á»ƒ cáº­p nháº­t khoÃ¡ `5` vÃ o tá»« Ä‘iá»ƒn (thay vÃ¬ `5.0`)? Thá»±c sá»± lÃ  chÃºng ta khÃ´ng thá»ƒ lÃ m Ä‘iá»u Ä‘Ã³ vÆ¡i má»™t thao tÃ¡c, nhÆ°ng ta cÃ³ thá»ƒ xoÃ¡ Ä‘i khoÃ¡ cÅ©  (`del some_dict[5.0]`), vÃ  sau Ä‘Ã³ thiáº¿t láº­p khoÃ¡ má»›i(`some_dict[5]`) Ä‘á»ƒ cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c khoÃ¡ `5` thay vÃ¬ `5.0`, tuy nhiÃªn cÃ¡ch nÃ y Ã­t ai xÃ i tá»›i láº¯m.


* LÃ m tháº¿ nÃ o Python tÃ¬m khoÃ¡ `5` trong tá»« Ä‘iá»ƒn cÃ³ chá»©a sáºµn khoÃ¡ `5.0`? NÃ³ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³ mÃ  khÃ´ng pháº£i dÃ² qua má»i pháº§n tá»­ trong tá»« Ä‘iá»ƒn thÃ´ng qua sá»­ dá»¥ng cÃ¡c hÃ m bÄƒm (hash functions), do Ä‘Ã³ tá»‘n thá»i gian cháº¡y háº±ng sá»‘ (constant time). Khi Python tra  khoÃ¡ tÃªn `foo` trong má»™t tÆ° Ä‘iá»ƒn, Ä‘áº§u tiÃªn nÃ³ thá»±c hiá»‡n hÃ m bÄƒm `hash(foo)` (vá»›i thá»i gian cháº¡y háº±ng sá»‘). Bá»Ÿi vÃ¬ trong Python cÃ¡c Ä‘á»‘i tÆ°á»£ng bÄƒng nhau khi chÃºng cÃ³ chung má»™t giÃ¡ trá»‹ bÄƒm ([Ä‘á»c thÃªm á»Ÿ Ä‘Ã¢y](https://docs.python.org/3/reference/datamodel.html#object.__hash__) here), `5`, `5.0`, and `5 + 0j` have the same hash value.
  ```py
  >>> 5 == 5.0 == 5 + 0j
  True
  >>> hash(5) == hash(5.0) == hash(5 + 0j)
  True
  ```
  **Ghi chÃº:** CÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ giÃ¡ trá»‹ bÄƒm bÄƒng nhau chÆ°a cháº¯c Ä‘Ã£ báº±ng nhau. (Váº«n Ä‘á» nÃ y Ä‘Æ°á»£c biáº¿t tá»›i vá»›i tÃªn gá»i [hash collision](https://en.wikipedia.org/wiki/Collision_(computer_science)), vÃ  giáº£m Ä‘i hiá»‡u nÄƒng vá»›i thá»i gian háº±ng sá»‘ qua viá»‡c dÃ¹ng hÃ m bÄƒm.)

---

### â–¶ Deep down, we're all the same.
<!-- Example ID: 8f99a35f-1736-43e2-920d-3b78ec35da9b --->
```py
class WTF:
  pass
```

**Káº¿t quáº£:**
```py
>>> WTF() == WTF() # two different instances can't be equal
False
>>> WTF() is WTF() # identities are also different
False
>>> hash(WTF()) == hash(WTF()) # hashes _should_ be different as well
True
>>> id(WTF()) == id(WTF())
True
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* Khi `id` Ä‘Æ°á»£c gá»i, Python táº¡o má»™t Ä‘á»‘i tÆ°á»£ng lá»›p `WTF` vÃ  truyá»n Ä‘á»‘i tÆ°á»£ng nÃ y cho hÃ m `id`. HÃ m `id` láº¥y `id` cá»§a Ä‘á»‘i tÆ°á»£ng (vÃ¹ng nhá»› cá»§a Ä‘á»‘i tÆ°á»£ng), vÃ  vá»©t Ä‘á»‘i tÆ°á»£ng nÃ y Ä‘i. Do Ä‘Ã³ Ä‘á»‘i tÆ°á»£ng bá»‹ tiÃªu huá»·.
* Khi chÃºng ta gá»i `id` hai láº§n, Python cáº¥p phÃ¡t cÃ¹ng má»™t vÃ¹ng nhÆ¡ cho Ä‘á»‘i tÆ°á»£ng thÆ° hai. Bá»Ÿi vi (trong CPython) `id` sá»­ dá»¥ng vÃ¹ng nhá»› cho id cá»§a Ä‘á»‘i tÆ°á»£ng, id cá»§a hai Ä‘á»‘i tÆ°á»£ng nÃ y lÃ  giá»‘ng nhau.
* VÃ¬ váº­y, id cá»§a Ä‘á»‘i tÆ°á»£ng chá»‰ duy nháº¥t trong vÃ²ng Ä‘á»i cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Sau khi Ä‘á»‘i tÆ°á»£ng bá»‹ tiÃªu hiá»ƒu, hay trÆ°á»›c khi nÃ³ Ä‘Æ°á»£c táº¡o, nhá»¯ng thá»© khÃ¡c cÃ³ thá»ƒ cÃ³ cÃ¹ng id vá»›i nÃ³.
* NhÆ°ng táº¡i sao phÃ©p `is` láº¡i cho ra káº¿t quáº£ `False`? HÃ£y nhÃ¬n vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y
```py
  class WTF(object):
    def __init__(self): print("I")
    def __del__(self): print("D")
  ```
  **Káº¿t quáº£:**
  ```py
  >>> WTF() is WTF()
  I
  I
  D
  D
  False
  >>> id(WTF()) == id(WTF())
  I
  D
  I
  D
  True
  ```
  NhÆ° báº¡n quan sÃ¡t tháº¥y, cÃ³ sá»± khÃ¡c biá»‡t á»Ÿ thá»© tá»± tiÃªu hiá»ƒu cÃ¡c Ä‘á»‘i tÆ°á»£ng, vÃ  Ä‘Ã³ táº¡o ra sá»± khÃ¡c biá»‡t.
  
---

### â–¶ VÃ´ tráº­t tá»± trong tráº­t tá»± *
<!-- Example ID: 91bff1f8-541d-455a-9de4-6cd8ff00ea66 --->
```py
from collections import OrderedDict


dictionary[1] = 'a'; dictionary[2] = 'b';

ordered_dict = OrderedDict()
ordered_dict[1] = 'a'; ordered_dict[2] = 'b';

another_ordered_dict = OrderedDict()
another_ordered_dict[2] = 'b'; another_ordered_dict[1] = 'a';

class DictWithHash(dict):
    """
    A dict that also implements __hash__ magic.
    """
    __hash__ = lambda self: 0

class OrderedDictWithHash(OrderedDict):
    """
    An OrderedDict that also implements __hash__ magic.
    """
    __hash__ = lambda self: 0
```

**Káº¿t quáº£**
```py
>>> dictionary == ordered_dict # Náº¿u a == b
True
>>> dictionary == another_ordered_dict # and b == c
True
>>> ordered_dict == another_ordered_dict # tháº¿ sao c != a ??
False

# ta biáº¿t rÄƒng set chá»‰ chá»©a cÃ¡c pháº§n tá»­ Ä‘á»™c nháº¥t,
# thá»­ táº¡o má»™t set chá»©a 3 tá»« Ä‘iá»ƒn phÃ­a trÃªn xem sao...

>>> len({dictionary, ordered_dict, another_ordered_dict})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'dict' (Lá»—i vá» kiá»ƒu: kiá»ƒu khÃ´ng thá»ƒ hash Ä‘Æ°á»£c)

# Lá»—i trÃªn xáº£y ra lÃ  Ä‘iá»u dÃª hiá»ƒu do tá»« Ä‘iá»ƒn khÃ´ng Ä‘Æ°á»£c tran bá»‹ __hash__, 
# sá»­ dá»¥ng cÃ¡c lá»›p bá»c (wrapper classes) ta xÃ¢y dá»±ng phÃ­a trÃªn thá»­ xem.
>>> dictionary = DictWithHash()
>>> dictionary[1] = 'a'; dictionary[2] = 'b';
>>> ordered_dict = OrderedDictWithHash()
>>> ordered_dict[1] = 'a'; ordered_dict[2] = 'b';
>>> another_ordered_dict = OrderedDictWithHash()
>>> another_ordered_dict[2] = 'b'; another_ordered_dict[1] = 'a';
>>> len({dictionary, ordered_dict, another_ordered_dict})
1
>>> len({ordered_dict, another_ordered_dict, dictionary}) # xÃ¡o trá»™n thá»© tá»± cÃ¡ pháº§n tá»­ trong set
2
```

CÃ¡i quÃ¡i gÃ¬ Ä‘ang xáº£y ra?

#### ğŸ’¡ Giáº£i thÃ­ch:

- LÃ½ do táº¡i sao quy táº¯c so sÃ¡nh báº¯c cáº§u khÃ´ng Ã¡p dá»¥ng Ä‘Æ°á»£c khi so sÃ¡nh  `dictionary`, `ordered_dict` vÃ  `another_ordered_dict` lÃ  do cÃ¡ch triá»ƒn khai phÆ°Æ¡ng thá»©c `__eq__` trong lá»›p `OrderedDict` . Xem thÃªm [tÃ i liá»‡u](https://docs.python.org/3/library/collections.html#ordereddict-objects)

    >  CÃ¡c phÃ©p so sÃ¡nh báº±ng giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng OrderedDict tuÃ´n theo thÆ° tá»± vÃ  Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ° sau. CÃ²n phÃ©p so sÃ¡nh bÄƒng giá»¯a cÃ¡ Ä‘á»‘i tÆ°á»£ng `OrderedDict` vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng Ã¡nh xáº¡ khÃ¡c (mapping objects) thÃ¬ khÃ´ng tuÃ¢n theo thá»© tá»± nhÆ° lÃ  cÃ¡c tá»« Ä‘iá»ƒn thÃ´ng thÆ°á»ng..

- LÃ½ do á»Ÿ Ä‘Ã¢y lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng `OrderedDict` Ä‘Æ°á»£c cho phÃ©p bá»‹ thay tháº¿ trá»±c tiáº¿p táº¡i báº¥t cá»© vá»‹ trÃ­ nao má»™t tá»« Ä‘iá»ƒn thÃ´ng thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng.
- Váº­y táº¡i sao thay Ä‘á»•i thÆ° tá»± cá»§a cÃ¡c tá»« Ä‘iá»ƒn láº¡i áº£nh hÆ°á»Ÿng tá»›i Ä‘á»‘i tÆ°á»£ng `set` Ä‘Æ°á»£c sinh ra? CÃ¢u tráº£ lá»i lÃ  do thiáº¿u sá»± so sÃ¡nh ná»™i Ä‘á»‘i tÆ°á»£ng (intrasitive) . Do sets lÃ  cÃ¡c táº­p há»£p khÃ´ng cÃ³ thá»© tá»± cá»§a cÃ¡c pháº§n tá»­ Ä‘á»™c nháº¥t, thá»© tá»± cÃ¡c pháº§n tá»­ khi chÃ¨n vÃ o khÃ´ng cÃ³ nghÄ©a lÃ½ gÃ¬ cáº£. NhÆ°ng trong trÆ°á»ng há»£p nÃ y, nÃ³ láº¡i cÃ³ váº¥n Ä‘á». HÃ£y tÃ¬m hiá»ƒu thÃªm xem sao

    ```py
    >>> some_set = set()
    >>> some_set.add(dictionary) # these are the mapping objects from the snippets above
    >>> ordered_dict in some_set
    True
    >>> some_set.add(ordered_dict)
    >>> len(some_set)
    1
    >>> another_ordered_dict in some_set
    True
    >>> some_set.add(another_ordered_dict)
    >>> len(some_set)
    1

    >>> another_set = set()
    >>> another_set.add(ordered_dict)
    >>> another_ordered_dict in another_set
    False
    >>> another_set.add(another_ordered_dict)
    >>> len(another_set)
    2
    >>> dictionary in another_set
    True
    >>> another_set.add(another_ordered_dict)
    >>> len(another_set)
    2
    ```
    Sá»± báº¥t nháº¥t á»Ÿ Ä‘Ã¢y  `another_ordered_dict in another_set` cho káº¿t quáº£ lÃ  `False` bá»Ÿi vÃ¬ `ordered_dict` Ä‘Ã£ tá»“n táº¡i trong `another_set` trÆ°á»›c Ä‘Ã³, `ordered_dict == another_ordered_dict` trá»Ÿ thÃ nh  `False`.
    

---

### â–¶ Cá»‘ thÃªm chÃºt ná»¯a... *
<!-- Example ID: b4349443-e89f-4d25-a109-82616be9d41a --->
```py
def some_func():
    try:
        return 'from_try'
    finally:
        return 'from_finally'

def another_func(): 
    for _ in range(3):
        try:
            continue
        finally:
            print("Finally!")

def one_more_func(): # A gotcha!
    try:
        for i in range(3):
            try:
                1 / i
            except ZeroDivisionError:
                # Let's throw it here and handle it outside for loop
                raise ZeroDivisionError("A trivial divide by zero error")
            finally:
                print("Iteration", i)
                break
    except ZeroDivisionError as e:
        print("Zero division error occurred", e)
```

**Káº¿t quáº£:**

```py
>>> some_func()
'from_finally'

>>> another_func()
Finally!
Finally!
Finally!

>>> 1 / 0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: division by zero (Ngoáº¡i lá»‡ sinh ra bá»Ÿi chia má»™t sá»‘ cho sá»‘ 0)

>>> one_more_func()
Iteration 0

```

#### ğŸ’¡ Giáº£i thÃ­ch:

- Khi cÃ¢u lá»‡nh `return`, `break` hay `continue` Ä‘Æ°á»£c thá»±c hiá»‡n trong pháº§n `try` cá»§a khá»‘i "tryâ€¦finally", pháº§n `finally` cÅ©ng Ä‘Æ°á»£c thá»±c hiá»‡n.
- GiÃ¡ trá»‹ tráº£ vá» cá»§a má»™t hÃ m Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi cÃ¢u lá»‡nh `return` cuá»‘i cung Ä‘Æ°á»£c thá»±c hiá»‡n. Bá»Ÿi vÃ¬ pháº§n `finally` luÃ´n Ä‘Æ°á»£c thá»±c hiá»‡n, cÃ¢u lá»‡nh `return` trong pháº§n `finally` sáº½ luÃ´n lÃ  cÃ¢u lá»‡nh tráº£ vá» gia trá»‹ cuá»‘i cÃ¹ng.
- Tuy nhiÃªn náº¿u pháº§n finally thá»±c hiá»‡n cÃ¢u lá»‡nh `return` hay `break` thÃ¬ pháº§n ngoáº¡i lá»‡ tá»“n táº¡i sáº½ bá»‹ bá» qua.

---


### â–¶ For what?
<!-- Example ID: 64a9dccf-5083-4bc9-98aa-8aeecde4f210 --->
```py
some_string = "wtf"
some_dict = {}
for i, some_dict[i] in enumerate(some_string):
    i = 10
```

**Káº¿t quáº£:**
```py
>>> some_dict # An indexed dict appears.
{0: 'w', 1: 't', 2: 'f'}
```

####  ğŸ’¡ Giáº£i thÃ­ch:

* CÃ¢u lá»‡nh `for` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong [ngá»¯ phÃ¡p Python](https://docs.python.org/3/reference/grammar.html) nhÆ° sau:
  ```
  for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]
  ```

  á» Ä‘Ã³ `exprlist` lÃ  biáº¿n má»¥c tiÃªu cá»§a phÃ©p gÃ¡n. Äiá»u Ä‘Ã³ co nghÄ©a lÃ  cÃ¢u lá»‡nh gÃ¡n `{exprlist} = {next_value}` Ä‘Æ°á»£c **thá»±c hiá»‡n Ä‘á»‘i vá»›i má»—i pháº§n tá»­** trong Ä‘á»‘i tÆ°á»£ng láº·p (iterable)
  An interesting example that illustrates this:
  ```py
  for i in range(4):
      print(i)
      i = 10
  ```

  **Káº¿t quáº£:**
  ```
  0
  1
  2
  3
  ```

  Báº¡n cÃ³ nghÄ© rÄƒng vÃ²ng láº·p trÃªn chá»‰ cháº¡y cÃ³ má»™t láº§n?

  **ğŸ’¡ Giáº£i thÃ­ch:**

- CÃ¢u lá»‡nh gÃ¡n `i = 10` khÃ´ng bao giá» áº£nh hÆ°á»Ÿng tá»›i cÃ¡c vÃ²ng láº·p do cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a vÃ²ng láº·p for tron Python. TrÆ°á»›c Ä‘iá»ƒm khá»Ÿi Ä‘áº§u cá»§a má»—i vÃ²ng láº·p, pháº§n tá»­ tiáº¿p theo Ä‘Æ°á»£c Ä‘Æ°a ra bá»Ÿi trÃ¬nh sinh (iterator, trong trÆ°á»ng há»£p nay lÃ  `range(4)`), pháº§n tá»­ nÃ y Ä‘Æ°á»£c giáº£i nÃ©n ra (unpacked) vÃ  gÃ¡n cho cÃ¡c biáº¿n cháº¡y (trong trÆ°á»ng há»£p nay lÃ  `i`)

* HÃ m `enumerate(some_string)` sinh ra giÃ¡ trá»‹ má»›i `i` (biáº¿n Ä‘áº¿m) vÃ  má»™t kÃ­ tá»± tá»« `some_string` táº¡i má»—i láº§n láº·p. Sau Ä‘Ã³ nÃ³ gÃ¡n khoÃ¡ `i` cá»§a tá»« Ä‘iá»ƒn `some_dict` cho kÃ­ tá»± Ä‘Ã³. TrÃ¬nh tá»± Ä‘Æ°á»£c thá»ƒ hiá»‡n Ä‘Æ¡n giáº£n nhÆ° dÆ°á»›i Ä‘Ã¢y:
  ```py
  >>> i, some_dict[i] = (0, 'w')
  >>> i, some_dict[i] = (1, 't')
  >>> i, some_dict[i] = (2, 'f')
  >>> some_dict
  ```

---

### â–¶ Sá»± khÃ¡c biá»‡t Ä‘áº¿n tá»« thá»i Ä‘iá»ƒm Ä‘Ã¡nh giÃ¡
<!-- Example ID: 6aa11a4b-4cf1-467a-b43a-810731517e98 --->
1\.
```py
array = [1, 8, 15]
# Má»™t biá»ƒu diá»…n generator thÃ´ng thÆ°á»ng
gen = (x for x in array if array.count(x) > 0)
array = [2, 8, 22]
```

**Káº¿t quáº£:**

```py
>>> print(list(gen)) # CÃ¡c giÃ¡ trá»‹ khÃ¡c Ä‘i Ä‘Ã¢u máº¥t rá»“i?
[8]
```

2\.

```py
array_1 = [1,2,3,4]
gen_1 = (x for x in array_1)
array_1 = [1,2,3,4,5]

array_2 = [1,2,3,4]
gen_2 = (x for x in array_2)
array_2[:] = [1,2,3,4,5]
```

**Káº¿t quáº£:**
```py
>>> print(list(gen_1))
[1, 2, 3, 4]

>>> print(list(gen_2))
[1, 2, 3, 4, 5]
```

3\.

```py
array_3 = [1, 2, 3]
array_4 = [10, 20, 30]
gen = (i + j for i in array_3 for j in array_4)

array_3 = [4, 5, 6]
array_4 = [400, 500, 600]
```

**Káº¿t quáº£:**
```py
>>> print(list(gen))
[401, 501, 601, 402, 502, 602, 403, 503, 603]
```

#### ğŸ’¡ LÃ½ giáº£i

- Trong má»™t biá»ƒu diá»…n [generator](https://wiki.python.org/moin/Generators), cÃ¢u `in` Ä‘Æ°á»£c thá»±c hiá»‡n táº¡i thá»i Ä‘iá»ƒm khai bÃ¡o, nhÆ°ng cÃ¢u Ä‘iá»u kiá»‡n Ä‘Æ°á»£c thá»±c hiá»‡n táº¡i thá»i Ä‘iá»ƒm cháº¡y (runtime).
- Do trÆ°á»›c thá»i Ä‘iá»ƒm cháº¡y, `array` Ä‘Æ°á»£c gÃ¡n cho giÃ¡ trá»‹ `[2, 8, 22]`, vÃ  trong ba sá»‘ Ä‘Æ°á»£c gÃ¡n trÆ°á»›c Ä‘Ã³ `1`, `8` and `15`, chá»‰ cÃ³ `8` cÃ³ sá»‘ láº§n xuáº¥t hiá»‡n trong máº£ng má»›i vÃ  do Ä‘Ã³ sá»‘ láº§n xuÃ¢t hiá»‡n lá»›n hÆ¡n `0`, nÃªn generator chá»‰ cho ra sá»‘ `8`.
- Sá»± khÃ¡c biá»‡t giá»¯a káº¿t quáº£ cá»§a `g1` and `g2` trong pháº§n thá»© hai lÃ  do cÃ¡ch cÃ¡c biáº¿n `array_1` vÃ  `array_2` Ä‘Æ°á»£c gÃ¡n láº¡i cÃ¡c giÃ¡ trá»‹.
- Trong trÆ°á»ng há»£p Ä‘áº§u tiÃªn, `array_1` Ä‘Æ°á»£c gÃ¡n cho má»™t Ä‘á»‘i tÆ°á»£ng má»›i `[1,2,3,4,5]` vÃ  vÃ¬ cÃ¢u `in` Ä‘Æ°á»£c thá»±c hiá»‡n táº¡i thá»i Ä‘iá»ƒm khai bÃ¡o nÃªn nÃ³ váº«n trá» tá»›i Ä‘á»‘i tÆ°á»£ng cÅ© `[1,2,3,4]` (Ä‘á»‘i tÆ°á»£ng nÃ y chÆ°a bá»‹ máº¥t Ä‘i).
- Trong trÆ°á»ng há»£p thÆ° hai, phÃ©p gÃ¡n lÃ¡t cáº¯t (slice assignment) `array_2` cáº­p nháº­t Ä‘á»‘i tÆ°á»£ng cÅ© `[1,2,3,4]` thÃ nh `[1,2,3,4,5]`. Hiá»ƒn nhiÃªn cáº£ `g2` vÃ  `array_2` Ä‘á»u trá» tá»›i cung má»™t Ä‘á»‘i tÆ°á»£ng (Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh `[1,2,3,4,5]`).
 - Okay, vá»›i nhá»¯ng gÃ¬ ta quan sÃ¡t trÃªn, co pháº£i giÃ¡ trá»‹ tráº£ vá» tá»« `list(g)` trong pháº§n thá»© ba pháº£i lÃ  `[11, 21, 31, 12, 22, 32, 13, 23, 33]`? (bá»Ÿi vÃ¬ `array_3` vÃ  `array_4` sáº½ giá»‘ng nhÆ° `array_1`). LÃ½ do chá»‰ `array_4` Ä‘Æ°á»£c cáº­p nháº­t Ä‘Æ°á»£c giáº£i thÃ­ch á»Ÿ Ä‘Ã¢y [PEP-289](https://www.python.org/dev/peps/pep-0289/#the-details)
    >Chá»‰ cÃ³ vÃ²ng for ngoÃ i cÃ¹ng Ä‘Æ°á»£c thá»±c hiá»‡n ngay láº­p tá»©c, cÃ¡c lá»‡nh khÃ¡c Ä‘Æ°á»£c trÃ¬ hoÃ£n cho Ä‘áº¿n khi generator Ä‘Æ°á»£c cháº¡y.
---


### â–¶ `is not ...` khÃ´ng pháº£i lÃ  `is (not ...)`

<!-- Example ID: b26fb1ed-0c7d-4b9c-8c6d-94a58a055c0d --->
```py
>>> 'something' is not None
True
>>> 'something' is (not None)
False
```

#### ğŸ’¡ Giáº£i thÃ­ch

- `is not` lÃ  má»™t toÃ¡n tá»­ nhá»‹ phÃ¢n Ä‘Æ¡n, vÃ  khi thá»±c hiá»‡n sáº½ cho káº¿t quáº£ khÃ¡c vá»›i sá»­ dá»¥ng `is` vÃ  `not` riÃªng biá»‡t.
- `is not` cho ra káº¿t quáº£ `False` khi cÃ¡c biáº¿n á»Ÿ hai Ä‘áº§u cá»§a nÃ³ trá» vá» cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng , vÃ  náº¿u hai biáº¿n nÃ y trá» vá» khÃ¡c Ä‘á»‘i tÆ°á»£ng, káº¿t quáº£ sáº½ lÃ  `True`. Cá»¥ thá»ƒ, `None` vÃ  `something` trá» vá» hai biáº¿n khÃ¡c nhau nÃªn káº¿t quáº£ lÃ  `True`
- Trong vÃ­ dá»¥ trÃªn, `(not None)` sáº½ cho ra káº¿t quáº£ `True` bá»Ÿi vÃ¬ khi sá»­ dá»¥ng trong phÃ©p so sÃ¡nh luáº­n lÃ½ `None` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `False`, do Ä‘Ã³ dÃ²ng mÃ£ trÃªn sáº½ trá»Ÿ thÃ nh `'something' is True`. Cá»¥ thá»ƒ, do `something` vÃ  `True` trá» vá» hai Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau nÃªn káº¿t quáº£ lÃ  `False`

---

### â–¶ A tic-tac-toe where X wins in the first attempt!
<!-- Example ID: 69329249-bdcb-424f-bd09-cca2e6705a7a --->

```py
# Khá»Ÿi táº¡o má»™t hÃ ng
row = [""] * 3 #row i['', '', '']
# VÃ  táº¡o má»™t báº£ng gá»“m cÃ¡c hÃ ng
board = [row] * 3
```

**Káº¿t quáº£:**

```py
>>> board
[['', '', ''], ['', '', ''], ['', '', '']]
>>> board[0]
['', '', '']
>>> board[0][0]
''
>>> board[0][0] = "X"
>>> board
[['X', '', ''], ['X', '', ''], ['X', '', '']]
```

ChÃºng ta Ä‘Ã£ gÃ¡n `"X"` cho ba vá»‹ trÃ­ trong báº£ng nÃ y chÄƒng?

#### ğŸ’¡ Giáº£i thÃ­ch:

Khi chÃºng ta khá»Ÿi táº¡oi biáº¿n `row`, hÃ¬nh mÃ´ phá»ng dÆ°á»›i Ä‘Ã¢y cho ta biáº¿t nhá»¯ng gÃ¬ diá»…n ra trong bá»™ nhá»›

![image](../images/tic-tac-toe/after_row_initialized.png)


Khi `board` Ä‘Æ°á»£c khá»Ÿi táº¡o bÄƒng viá»‡c nhÃ¢n báº£n `row`, minh hoáº¡ phÃ­a dÆ°á»›i mÃ´ táº£ nhá»¯ng gÃ¬ diÃªn ra trong bá»™ nhá»› (má»—i thÃ nh pháº§n cá»§a báº£ng `board[0]`, `board[1]` vÃ  `board[2]` lÃ  má»™t tham chiáº¿u tá»›i cung má»™t danh sÃ¡ch trá» bá»Ÿi `row`)

![image](../images/tic-tac-toe/after_board_initialized.png)

ChÃºng ta cÃ³ thá»ƒ trÃ¡nh Ä‘iá»u trÃªn xáº£y ra báº±ng cÃ¡ch khÃ´ng dÃ¹ng biáº¿n `row` Ä‘á»ƒ sinh ra `board`. (Tim hiá»ƒu thÃªm táº¡i (https://github.com/satwikkansal/wtfpython/issues/68) )
```py
>>> board = [['']*3 for _ in range(3)]
>>> board[0][0] = "X"
>>> board
[['X', '', ''], ['', '', ''], ['', '', '']]
```

---

### â–¶ The sticky output function
<!-- Example ID: 4dc42f77-94cb-4eb5-a120-8203d3ed7604 --->

1\.

```py
funcs = []
results = []
for x in range(7):
    def some_func():
        return x
    funcs.append(some_func)
    results.append(some_func())  # ChÃº Ã½ lá»i gá»i hÃ m á»Ÿ Ä‘Ã¢y

funcs_results = [func() for func in funcs]
```

**káº¿t quáº£:**

```py
>>> results
[0, 1, 2, 3, 4, 5, 6]
>>> funcs_results
[6, 6, 6, 6, 6, 6, 6]
```
Ngay cáº£ khi cÃ¡c giÃ¡ trá»‹ `x` khÃ¡c nhau trong má»i vÃ²ng láº·p trÆ°á»›c khi Ä‘áº·t `some_func` vÃ o trong danh sÃ¡ch `funcs`, táº¥t cáº£ cÃ¡c hÃ m Ä‘á»u tráº£ vá» 6.

2\.

```py
>>> powers_of_x = [lambda x: x**i for i in range(10)]
>>> [f(2) for f in powers_of_x]
[512, 512, 512, 512, 512, 512, 512, 512, 512, 512]
```

#### ğŸ’¡ LÃ½ giáº£i

- Khi Ä‘á»‹nh nghia má»™t hÃ m bÃªn trong má»™t vÃ²ng láº·p, vÃ²ng láº·p cÃ³ biáº¿n láº·p Ä‘Æ°á»£c sá»­ dá»¥ng trong thÃ¢n hÃ m, closure cá»§a hÃ m nÃ y Ä‘Æ°á»£c giÆ¡i háº¡n cho biáº¿n, chÆ° khÃ´ng pháº£i lÃ  giÃ¡ trá»‹. VÃ¬ váº­y táº¥t cáº£ cÃ¡c ham sá»­ dá»¥ng giÃ¡ trá»‹ cuá»‘i cung Ä‘Æ°á»£c gÃ¡n cho biáº¿n nÃ y Ä‘á»ƒ thá»±c hiá»‡n tÃ­nh toÃ¡n. Äá»ƒ rÃµ hÆ¡n ta tháº¥y Ä‘Æ°á»£c ráº±ng biáº¿n láº·p `x` (vÃ  giÃ¡ trá»‹ cá»§a cung cá»§a nÃ³ nháº­n Ä‘Æ°á»£c lÃ  `6`) trong vÃ­ dá»¥ thá»© nháº¥t Ä‘Æ°á»£c sá»­ dá»¥ng cho táº¥t cáº£ cÃ¡c hÃ m `func()`, hÃ m nÃ y sáº½ luÃ´n tráº£ vá» giÃ¡ trá»‹ lÃ  `6` 

- Äá»ƒ thá»±c hiá»‡n Ä‘Æ°á»£c tÃ­nh toÃ¡n mong muá»‘n báº¡n cÃ³ thá»ƒ truyá»n biáº¿n láº·p nhÆ° lÃ  biáº¿n Ä‘Æ°á»£c Ä‘áº·t tÃªn (named variable) cho hÃ m. **Sao mÃ  nÃ³ láº¡i cháº¡y Ä‘Ãºng Ä‘Æ°á»£c?** á»Ÿi vÃ¬ viá»‡c truyá»n biáº¿n nhÆ° váº­y sáº½ Ä‘á»‹nh nghÄ©a láº¡i biáº¿n nay bÃªn trong pháº¡m vi cá»§a hÃ m.

    ```py
    funcs = []
    for x in range(7):
        def some_func(x=x):
            return x
        funcs.append(some_func)
    ```

    **Káº¿t quáº£:**
    ```py
    >>> funcs_results = [func() for func in funcs]
    >>> funcs_results
    [0, 1, 2, 3, 4, 5, 6]
    ```

---

### â–¶ BÃ i toÃ¡n con gÃ  vÃ  quáº£ trá»©ng *
<!-- Example ID: 60730dc2-0d79-4416-8568-2a63323b3ce8 --->
1\.
```py
>>> isinstance(3, int)
True
>>> isinstance(type, object)
True
>>> isinstance(object, type)
True
```

ÄÃ¢u lÃ  lá»›p cÆ¡ báº£n cuá»‘i cÃ¹ng ? CÃ²n nhiá»u thá»© gÃ¢y khÃ³ hiá»ƒu hÆ¡n ná»¯a sau Ä‘Ã¢y

2\. 

```py
>>> class A: pass
>>> isinstance(A, A)
False
>>> isinstance(type, type)
True
>>> isinstance(object, object)
True
```

3\.

```py
>>> issubclass(int, object)
True
>>> issubclass(type, object)
True
>>> issubclass(object, type)
False
```


#### ğŸ’¡ Giáº£i thÃ­ch

- `type` lÃ  má»™t [metaclass](https://realpython.com/python-metaclasses/) trong Python.
- **Má»i thá»©** Ä‘á»u lÃ  má»™t Ä‘á»‘i tÆ°á»£ng `object` trong Python, bao gá»“m cáº£ cÃ¡c lá»›p (classes) cÅ©ng nhÆ° lÃ  cÃ¡c hiá»‡n thá»±c cá»§a chÃºng (instances).
- Lá»›p `type` lÃ  metaclass cá»§a lá»›p `object`, do Ä‘Ã³ má»i lá»›p (gá»“m cáº£ `type`) thá»«a hÆ°á»Ÿng trá»±c tiáº¿p hay giÃ¡n tiáº¿p tá»« `object`.
- KhÃ´ng cÃ³ má»™t lá»›p nÃ o náº±m giá»¯a lá»›p `object` vÃ  `type`. Váº¥n Ä‘á» Ä‘á»‘i vá»›i cÃ¡c Ä‘oáº¡n mÃ£ phÃ­a trÃªn náº±m á»Ÿ cÃ¡ch ta tÃ¬m cÃ¡c má»‘i quan há»‡ giá»¯a cÃ¡c lá»›p trong Python (dÃ¹ng `issubclass` vÃ  `isinstance`). Má»—i quan há»‡ giá»¯a `object` vÃ  `type` khÃ´ng thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong Python Ä‘Æ¡n thuáº§n. ChÃ­nh xÃ¡c hÆ¡n, nghÄ©a lÃ ,
    + Lá»›p A lÃ  má»™t hiá»‡n thá»±c cá»§a lá»›p B, vÃ  lá»›p B lÃ  má»™t hiá»‡n thá»±c cá»§a lá»›p A.  
    + Lá»›p A lÃ  má»™t hiá»‡n thá»±c cá»§a chÃ­nh nÃ³.
- CÃ¡c má»‘i quan há»‡ giá»¯a `object` vÃ  `type` (á»Ÿ cáº£ hai cáº¥p Ä‘á»™ hiá»‡n thá»±c cÅ©ng nhÆ° chÃ­nh lá»›p Ä‘Ã³) tá»“n táº¡i lÃ  do viá»‡c "Äƒn gian" khi triá»ƒn khai cÃ¡c lá»›p nÃ y.
---

### â–¶ CÃ¡c má»‘i quan há»‡ cá»§a lÆ¡p con (subclass)

<!-- Example ID: 9f6d8cf0-e1b5-42d0-84a0-4cfab25a0bc0 --->
**Káº¿t quáº£:**
```py
>>> from collections import Hashable
>>> issubclass(list, object)
True
>>> issubclass(object, Hashable)
True
>>> issubclass(list, Hashable)
False
```

Má»‘i quan há»‡ giá»¯a cÃ¡c lá»›p con cÃ³ tÃ­nh báº¯c cáº§u khÃ´ng?(vÃ­ dá»¥, náº¿u `A` lÃ  lá»›p con cá»§a `B`, vÃ  `B` lÃ  lá»›p con cá»§a `C`, váº­y `A` _nÃªn_ lÃ  lá»›p con cá»§a `C`)

#### ğŸ’¡ LÃ½ giáº£i:

* Trong Python má»‘i quan há»‡ giá»¯a cÃ¡ lá»›p con khÃ´ng nháº¥t thiáº¿t pháº£i mang tÃ­nh báº¯c cáº§u. Báº¥t cá»© ai cÅ©ng Ä‘Æ°á»£c phÃ©p Ä‘á»‹nh nghÄ©a má»™t lá»›p `__subclasscheck__` riÃªng, tuá»³ Ã½ trong má»™t siÃªu lá»›p (metaclass).
* Khi `issubclass(cls, Hashable)` Ä‘Æ°á»£c gá»i, nÃ³ chá»‰ tÃ¬m phÆ°Æ¡ng thá»©c non-Falsey "`__hash__`"  trong `cls` hoáº·c báº¥t cÆ° thÆ° gÃ¬ nÃ³ thá»«a hÆ°á»Ÿng tá»« Ä‘Ã³.
* Bá»Ÿi vÃ¬ `object` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ bÄƒm (hashable), cÃ²n `list` thi khÃ´ng, nÃªn nÃ³ phÃ¡ vá»¡ tÃ­nh báº¯c cáº§u.
* Giáº£i thÃ­ch chi tiáº¿t cÃ³ thá»ƒ xem [á»Ÿ Ä‘Ã¢y](https://www.naftaliharris.com/blog/python-subclass-intransitivity/).

---

### â–¶ All-true-ation *

<!-- Example ID: dfe6d845-e452-48fe-a2da-0ed3869a8042 -->

```py
>>> all([True, True, True])
True
>>> all([True, True, False])
False

>>> all([])
True
>>> all([[]])
False
>>> all([[[]]])
True
```

LÃ½ do vÃ¬ sao mÃ  lÃºc thÃ¬ True mÃ  lÃºc thÃ¬ láº¡i False

#### ğŸ’¡ Giáº£i thÃ­ch:

- HÃ m `all` tÆ°Æ¡ng Ä‘Æ°Æ¡ng nhÆ° Ä‘oáº¡n mÃ£ dÆ°á»›i

- ```py
  def all(iterable):
      for element in iterable:
          if not element:
              return False
      return True
  ```

- `all([])` tráº£ vá» `True` bá»Ÿi vÃ¬ danh sÃ¡ch nay rá»—ng. 
- `all([[]])` tráº£ vá» `False` bá»Ÿi vÃ¬ `not []` lÃ  `True` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `not False` bá»Ÿi vÃ¬ danh sÃ¡ch phÃ­a trong rá»—ng.
- `all([[[]]])` vÃ  cÃ¡c biáº¿n thá»ƒ Ä‘á»‡ quy cao hÆ¡n luÃ´n tráº£ vá» `True` bá»Ÿi vÃ¬ `not [[]]`, `not [[[]]]`, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i`not True`.
---

### â–¶ Dáº¥u pháº©y láº¡ lÃ¹ng
<!-- Example ID: 31a819c8-ed73-4dcc-84eb-91bedbb51e58 --->
**Káº¿t quáº£ (< 3.6):**

```py
>>> def f(x, y,):
...     print(x, y)
...
>>> def g(x=4, y=5,):
...     print(x, y)
...
>>> def h(x, **kwargs,):
  File "<stdin>", line 1
    def h(x, **kwargs,):
                     ^
SyntaxError: invalid syntax (Lá»—i cÃº phÃ¡p khÃ´ng há»£p lá»‡)

>>> def h(*args,):
  File "<stdin>", line 1
    def h(*args,):
                ^
SyntaxError: invalid syntax (Lá»—i cÃº phÃ¡p khÃ´ng há»£p lá»‡)
```

#### ğŸ’¡ LÃ½ giáº£i:

- Dáº¥u pháº©y náº±m á»Ÿ cuá»‘i danh sÃ¡ch cÃ¡c tham sá»‘ cá»§a má»™t hÃ m khÃ´ng pháº£i bao giá» cÅ©ng há»£p lá»‡.
-  Trong Python, danh sÃ¡ch tham sá»‘ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi má»™t pháº§n cÃ¡c dáº¥u pháº©y náº±m phÃ­a trÆ°á»›c vÃ  má»™t pháº§n cÃ¡c dáº¥y pháº©y náº±m phÃ­a sau. Äiá»u nay mÃ¢u thuáº«n vá»›i cÃ¡c tÃ¬nh huá»‘ng á»Ÿ Ä‘Ã³ má»™t dáº¥u pháº©y bá»‹ máº¯c káº¹t á»Ÿ giá»¯a danh sÃ¡ch, vÃ  cháº³ng cÃ³ má»™t luáº­t nÃ o cháº¥p nháº­n Ä‘iá»u nÃ y cáº£.
-  **ChÃº Ã½:** Váº¥n Ä‘á» vá» dÃ¢u pháº©y á»Ÿ cuá»‘i  [Ä‘Ã£ Ä‘Æ°á»£c sá»­a trong Python 3.6](https://bugs.python.org/issue9232). Tháº£o luáº­n [á»Ÿ Ä‘Ã¢y](https://bugs.python.org/issue9232#msg248399) cung cáº¥p nhá»¯ng cÃ¡ch dung khÃ¡c nhau cá»§a dÃ¢y pháº©y á»Ÿ cuá»‘i.

---

### â–¶ Strings and the backslashes
<!-- Example ID: 6ae622c3-6d99-4041-9b33-507bd1a4407b --->
**Káº¿t quáº£:**
```py
>>> print("\"")
"

>>> print(r"\"")
\"

>>> print(r"\")
File "<stdin>", line 1
    print(r"\")
              ^
SyntaxError: EOL while scanning string literal

>>> r'\'' == "\\'"
True
```

#### ğŸ’¡ Giáº£i thÃ­ch

- Trong má»™t string thÃ´ng thÆ°á»ng, dáº¥u xuyá»‡c ngÆ°á»£c Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ "escape" cÃ¡c kÃ­ tá»± cÃ³ má»™t Ã½ nghÄ©a Ä‘áº·c biá»‡t (nhÆ° lÃ  dáº¥u trÃ­ch dáº«n Ä‘Æ¡n, dáº¥u trÃ­ch dáº«n kÃ©p, va chÃ­nh dáº¥u xuyá»‡c ngÆ°á»£c).
    ```py
    >>> "wt\"f"
    'wt"f'
    ```
- Äá»‘i vá»›i má»™t string thÃ´ (raw string) (Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh bá»Ÿi tiáº¿p Ä‘áº§u ngá»¯ `r`), dáº¥u xuyá»‡c ngÆ°á»£c.
    ```py
    >>> r'wt\"f' == 'wt\\"f'
    True
    >>> print(repr(r'wt\"f')
    'wt\\"f'

    >>> print("\n")

    >>> print(r"\\n")
    '\\\\n'
    ```
- CÃ³ nghÄ©a lÃ  khi má»™t trÃ¬nh phÃ¢n tÃ­ch cÃº phÃ¡p gáº·p má»™t dáº¥u xuyá»‡c ngÆ°á»£c tron má»™t string thÃ´, trÃ¬nh nÃ y mong Ä‘á»£i má»™t kÃ­ tá»± khÃ¡c phÃ­a sau nÃ³. VÃ  tron trÆ°á»ng há»£p cá»§a chÃºng ta `print(r"\")`, dáº¥u xuyá»‡c ngÆ°á»£c vÃ´ hiá»‡u hoÃ¡ (escape) dáº¥u trÃ­ch dáº«n á»Ÿ Ä‘uÃ´i, Ä‘á»ƒ láº¡i cho trÃ¬nh thÃ´ng dá»‹ch xá»­ lÃ½ mÃ  khÃ´ng cÃ³ dáº¥u trÃ­ch dáº«n káº¿t thÃºc (do Ä‘Ã³ gÃ¢y ra lá»—i vá» cÃº phÃ¡p `SyntaxError`). ÄÃ³ lÃ  lÃ½ do táº¡i  sao cÃ¡c dáº¥u xuyá»‡c ngÆ°á»£c khÃ´ng cháº¡y Ä‘Æ°á»£c khi á»Ÿ cuá»‘i má»™t string thÃ´.

---

### â–¶ not knot!
<!-- Example ID: 7034deb1-7443-417d-94ee-29a800524de8 --->
```py
x = True
y = False
```

**Káº¿t quáº£:**
```py
>>> not x == y
True
>>> x == not y
  File "<input>", line 1
    x == not y
           ^
SyntaxError: invalid syntax (Lá»—i vá» cÃº phÃ¡p)
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* Thá»© tá»± Æ°u tiÃªn cá»§a cÃ¡c phÃ©p toÃ¡n áº£nh hÆ°á»Ÿng tÆ¡i cÃ¡ch má»™t cÃ¢u lá»‡nh Ä‘Æ°á»£c thá»±c thi, vÃ  phÃ©p `==` cÃ³ Ä‘á»™ Æ°u tiÃªn cao hÆ¡n phÃ©p `not` trong Python.
* VÃ¬ váº­y `not x == y` tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `not (x == y)` rá»“i tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i `not (True == False)` vÃ  káº¿t quáº£ lÃ `True`.
* NhÆ°ng `x == not y` gÃ¢y ra lá»—i cÃº phÃ¡p `SyntaxError` bá»Ÿi vÃ¬ Python nghÄ© ráº±ng nÃ³ sáº½ thá»±c hiá»‡n `(x == not) y` chá»© khÃ´ng pháº£i lÃ  `x == (not y)` do Ä‘Ã³ báº¡n má»›i gáº·p lá»—i vá» cÃº phÃ¡p.
* TrÃ¬nh phÃ¢n tÃ­ch cÃº phÃ¡p mong Ä‘á»£i `not` lÃ  má»™t pháº§n cá»§a phÃ©p toÃ¡n `not in` (bá»Ÿi vÃ¬ cáº£  `==` vÃ  `not in` cÃ³ cÃ¹ng Ä‘á»™ Æ°u tiÃªn), nhÆ°ng do trong trÆ°Æ¡ng há»£p cá»§a chÃºng ta, trÃ¬nh xá»­ lÃ½ khÃ´ng tÃ¬m tháº¥y `in` Ä‘áº±ng sau `not`, nÃªn nÃ³ gÃ¢y ra `SyntaxError`.

---

### â–¶ CÃ¡c chuá»—i rÆ°á»¡i trÃ­ch dáº«n
<!-- Example ID: c55da3e2-1034-43b9-abeb-a7a970a2ad9e --->
**Káº¿t quáº£:**
```py
>>> print('wtfpython''')
wtfpython
>>> print("wtfpython""")
wtfpython
>>> # CÃ¡c cÃ¢u lá»‡nh phÃ­a dÆ°á»›i gáº·p lá»—i cÃº phÃ¡p `SyntaxError` khi thá»±c thi
>>> # print('''wtfpython')
>>> # print("""wtfpython")
  File "<input>", line 3
    print("""wtfpython")
                        ^
SyntaxError: EOF while scanning triple-quoted string literal (Lá»—i cÃº phÃ¡p khi sá»­ lÃ½ chuá»—i Ä‘Æ°á»£c bao bá»Ÿi dáº¥u trÃ­ch dáº«n)
```

#### ğŸ’¡ Giáº£i thÃ­ch:
+ Python há»— trá»£ ngáº§m [ghÃ©p chuá»—i](https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation), vÃ­ dá»¥,
  ```
  >>> print("wtf" "python")
  wtfpython
  >>> print("wtf" "") # or "wtf"""
  wtf
  ```

+ `'''` vÃ  `"""` lÃ  cÃ¡c kÃ­ hiá»‡u phÃ¢n cÃ¡ch chuá»—i trong Python, chÃºng táº¡o ra lá»—i SyntaxError bá»Ÿi vÃ¬ trÃ¬nh thÃ´ng dá»‹ch Python chÆ¡ Ä‘á»£i kÃ­ hiá»‡u phÃ¢n cÃ¡ch káº¿t thÃºc khi nÃ³ dÃ² tÃ¬m chuá»—i kÃ­ tá»± trÃ­ch dáº«n cÃ³ ba dáº¥u nhÃ¡y .
---

### â–¶ CÃ³ gÃ¬ sai sai vá»›i cÃ¡c giÃ¡ trá»‹ luáº­n lÃ½ (booleans)?
<!-- Example ID: 0bba5fa7-9e6d-4cd2-8b94-952d061af5dd --->
1\.

```py
# Má»™t vÃ­ dá»¥ tÃ­nh toÃ¡n sá»‘ lÆ°á»£ng cÃ¡c giÃ¡ trá»‹ luáº­n lÃ½ vÃ 
# sÃ´ nguyÃªn trong má»™t danh sÃ¡ch láº«n lá»™n cÃ¡c kiá»ƒu pháº§n tá»­ khÃ¡c nhau.
mixed_list = [False, 1.0, "some_string", 3, True, [], False]
integers_found_so_far = 0
booleans_found_so_far = 0

for item in mixed_list:
    if isinstance(item, int):
        integers_found_so_far += 1
    elif isinstance(item, bool):
        booleans_found_so_far += 1
```

**Káº¿t quáº£:**
```py
>>> integers_found_so_far
4
>>> booleans_found_so_far
0
```


2\.
```py
>>> some_bool = True
>>> "wtf" * some_bool
'wtf'
>>> some_bool = False
>>> "wtf" * some_bool
''
```

3\.

```py
def tell_truth():
    True = False
    if True == False:
        print("I have lost faith in truth!")
```

**Káº¿t quáº£ (< 3.x):**

```py
>>> tell_truth()
I have lost faith in truth!
```

#### ğŸ’¡ LÃ½ giáº£i:

* `bool` lÃ  lÆ¡p con cá»§a `int` trong Python
    
    ```py
    >>> issubclass(bool, int)
    True
    >>> issubclass(int, bool)
    False
    ```
    
* VÃ  do váº­y, `True` vÃ  `False` lÃ  cÃ¡c hiá»‡n thá»±c (instances) cá»§a `int`
  ```py
  >>> isinstance(True, int)
  True
  >>> isinstance(False, int)
  True
  ```

* GiÃ¡ trá»‹ dáº¡ng sá»‘ nguyÃªn cá»§a `True` lÃ  `1` vÃ  cá»§a `False` lÃ  `0`.
  ```py
  >>> int(True)
  1
  >>> int(False)
  0
  ```

* Xem trÃªn [cÃ¢u tráº£ lá»i] trÃªn StackOverflow(https://stackoverflow.com/a/8169049/4354153) Ä‘á»ƒ biáº¿t lÃ½ do.

* LÃºc Ä‘áº§u, Python khÃ´ng cÃ³ kiá»ƒu `bool` (ngÆ°á»i ta dung 0 cho false vÃ  cÃ¡c giÃ¡ trá»‹ khÃ¡c khÃ´ng nhÆ° 1 cho true).  `True`, `False`, va kiá»ƒu `bool` Ä‘Æ°á»£c bá»• sung trong cÃ¡ phiÃªn báº£n 2.x, nhÆ°ng vi lÃ½ do há»— trá»£ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c (backward compatibility), `True` vÃ  `False` khÃ´ng thá»ƒ trÆ¡ thÃ nh cÃ¡c hÄƒng sá»‘ (constants). ChÃºng chá»‰ lÃ  cÃ¡c biáº¿n Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong Python, vÃ  ta cÃ³ thá»ƒ gÃ¡n láº¡i giÃ¡ trá»‹ cho chÃºng.

* Python 3 khÃ´ng há»— trá»£ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c, vÃ  do váº­y cÃ¡c Ä‘oáº¡n mÃ£ cuá»‘i cung khÃ´ng cháº¡y Ä‘Æ°á»£c trÃªn  Python 3.x!
---

### â–¶ Class attributes and instance attributes
<!-- Example ID: 6f332208-33bd-482d-8106-42863b739ed9 --->
1\.
```py
class A:
    x = 1

class B(A):
    pass

class C(A):
    pass
```

**Káº¿t quáº£:**
```py
>>> A.x, B.x, C.x
(1, 1, 1)
>>> B.x = 2
>>> A.x, B.x, C.x
(1, 2, 1)
>>> A.x = 3
>>> A.x, B.x, C.x # C.x thay Ä‘á»•i, nhÆ°ng B.x khÃ´ng thay Ä‘á»•i
(3, 2, 3)
>>> a = A()
>>> a.x, A.x
(3, 3)
>>> a.x += 1
>>> a.x, A.x
(4, 3)
```

2\.
```py
class SomeClass:
    some_var = 15
    some_list = [5]
    another_list = [5]
    def __init__(self, x):
        self.some_var = x + 1
        self.some_list = self.some_list + [x]
        self.another_list += [x]
```

**Káº¿t quáº£:**

```py
>>> some_obj = SomeClass(420)
>>> some_obj.some_list
[5, 420]
>>> some_obj.another_list
[5, 420]
>>> another_obj = SomeClass(111)
>>> another_obj.some_list
[5, 111]
>>> another_obj.another_list
[5, 420, 111]
>>> another_obj.another_list is SomeClass.another_list
True
>>> another_obj.another_list is some_obj.another_list
True
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* CÃ¡c biáº¿n thuá»™c vá» lá»›p vÃ  cÃ¡c biáº¿n thuá»™c vá» cÃ¡c hiá»‡n thá»±c cá»§a lÆ¡p (class instances) Ä‘Æ°á»£c xá»­ lÃ½ ná»™i táº¡i nhÆ° lÃ  cÃ¡c tá»« Ä‘iá»ƒn cá»§a má»™t Ä‘á»‘i tÆ°á»£ng lá»›p. Náº¿u má»™t biáº¿n khÃ´ng náº±m trong tá»« Ä‘iá»ƒn cá»§a lá»›p hiá»‡n hÃ nh, nÃ³ sáº½ Ä‘Æ°á»£c tÃ¬m trong cÃ¡c lá»›p cha. 
* PhÃ©p `+=` thay Ä‘á»•i Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ biáº¿n Ä‘á»•i (mutable) táº¡i chá»— mÃ  khÃ´n cáº§n pháº£i táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i. VÃ¬ váº­y thay Ä‘á»•i thuá»™c tÃ­nh cua má»™t hiá»‡n thá»±c áº£nh hÆ°á»Ÿng tá»›i thuá»™c tÃ­nh cá»§a cÃ¡c hiá»‡n thá»±c khÃ¡c vÃ  thuá»™c tÃ­nh lá»›p.
---

### â–¶ Non-reflexive class method *

<!-- Example ID: 3649771a-f733-413c-8060-3f9f167b83fd -->

```py
class SomeClass:
        def instance_method(self):
                pass
        
        @classmethod
        def class_method(cls):
                pass
```

**Káº¿t quáº£:**

```py
>>> SomeClass.instance_method is SomeClass.instance_method
True
>>> SomeClass.class_method is SomeClass.class_method
False
>>> id(SomeClass.class_method) == id(SomeClass.class_method)
True
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- LÃ½ do lÃ  vÃ¬ `SomeClass.class_method is SomeClass.class_method` tráº£ vá» `False` lÃ  bá»Ÿi vÃ¬ decorator `@classmethod`. 

  ```py
  >>> SomeClass.instance_method
  <function __main__.SomeClass.instance_method(self)>
  >>> SomeClass.class_method
  <bound method SomeClass.class_method of <class '__main__.SomeClass'>
  ```

  Má»—i láº§n truy cáº­p tá»›i `SomeClass.class_method` lÃ  láº¡i cÃ³ má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c bá»c má»›i sinh ra (new bound method) 
-  `id(SomeClass.class_method) == id(SomeClass.class_method)` tráº£ vá» `True` bá»Ÿi vÃ¬ quÃ¡ trÃ¬nh cáº¥p phÃ¡t bá»™ nhá»› cho `class_method` láº§n thá»© hai xáº£y ra táº¡i cung má»™t vÃ­ trÃ­ vá»›i quÃ¡ trÃ¬nh giáº£i phÃ³ng bá»™ nhá»› Ä‘áº§u tiÃªn (Xem láº¡i "Deep Down, we're all the same example" Ä‘á»ƒ cÃ³ lá»i giáº£i thÃ­ch rÃµ hÆ¡n). 
---


### â–¶ yielding None
<!-- Example ID: 5a40c241-2c30-40d0-8ba9-cf7e097b3b53 --->
```py
some_iterable = ('a', 'b')

def some_func(val):
    return "something"
```

**Káº¿t quáº£ (<= 3.7.x):**

```py
>>> [x for x in some_iterable]
['a', 'b']
>>> [(yield x) for x in some_iterable]
<generator object <listcomp> at 0x7f70b0a4ad58>
>>> list([(yield x) for x in some_iterable])
['a', 'b']
>>> list((yield x) for x in some_iterable)
['a', None, 'b', None]
>>> list(some_func((yield x)) for x in some_iterable)
['a', 'something', 'b', 'something']
```

#### ğŸ’¡ Giáº£i thÃ­ch:
- ÄÃ¢y lÃ  má»™t bug tá»“n táº¡i khi CPython xá»­ lÃ½ `yield` trong cÃ¡c generators vÃ  comprehensions.
- Báº¡n cÃ³ thá»ƒ tham kháº£o thÃªm vá» lá»—i nÃ y táº¡i Ä‘Ã¢y: https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions
- BÃ¡o cÃ¡o vá» bug nÃ y: http://bugs.python.org/issue10544
- Theo Python 3.8+  `yield` khÃ´ng Ä‘Æ°á»£c phÃ©p náº±m bÃªn trong  list comprehension vÃ  náº¿u báº¡n lÃ m nhÆ° váº­y sáº½ táº¡o ra lá»—i cÃº phÃ¡p `SyntaxError`.

---


### â–¶ Yielding from... return! *
<!-- Example ID: 5626d8ef-8802-49c2-adbc-7cda5c550816 --->
1\.

```py
def some_func(x):
    if x == 3:
        return ["wtf"]
    else:
        yield from range(x)
```

**Káº¿t quáº£ (> 3.3):**

```py
>>> list(some_func(3))
[]
```

ÄÃ¡ng láº½ pháº£i hiá»ƒn thá»‹ `"wtf"` chá»© nhá»‰? CÃ³ pháº£i lÃ  do `yield from`? CÃ¹ng tÃ¬m hiá»ƒu thÃªm nÃ o,

2\.

```py
def some_func(x):
    if x == 3:
        return ["wtf"]
    else:
        for i in range(x):
          yield i
```

**Káº¿t quáº£:**

```py
>>> list(some_func(3))
[]
```

Váº«n láº¡i khÃ´ng in ra `"wtf"` .

#### ğŸ’¡ Giáº£i thÃ­ch:

+ Tá»« Python 3.3 trá»Ÿ Ä‘i, ta cÃ³ thá»ƒ sá»­ dá»¥ng `return`  vá»›i cÃ¡c giÃ¡ trá»‹ bÃªn trong cÃ¡c generators (Xem thÃªm [PEP380](https://www.python.org/dev/peps/pep-0380/)). CÃ¡c [tÃ i liá»‡u chÃ­nh thá»©c](https://www.python.org/dev/peps/pep-0380/#enhancements-to-stopiteration) cÅ©ng nÃ³i nhÆ° váº­y,
> "... `return expr` tron má»™t generator táº¡o ra ngoáº¡i lá»‡ `StopIteration(expr)` khi thoÃ¡t ra tá»« generator."

+ Trong trÆ°á»ng há»£p `some_func(3)`, ngoáº¡i lá»‡ `StopIteration` Ä‘Æ°á»£c khá»Ÿi lÃªn ngay tá»« Ä‘áº§u bá»Ÿi vÃ¬ cÃ¢u lá»‡nh `return`. Ngoáº¡i lá»‡ `StopIteration` Ä‘Æ°á»£c tá»± Ä‘á»™ng báº¯t láº¡i trong dÃ²ng lá»‡nh bao `list(...)` vÃ  trong vÃ²ng láº·p `for`. Do Ä‘Ã³, cáº£ hai Ä‘oáº¡n mÃ£ trÃªn Ä‘á»u tráº£ vá» má»™t danh sÃ¡ch rá»—ng.

+ Äá»ƒ cÃ³ Ä‘Æ°á»£c `["wtf"]` tá»« generator `some_func` báº¡n cáº§n báº¯t ngoáº¡i lá»‡ `StopIteration`,

  ```py
  try:
      next(some_func(3))
  except StopIteration as e:
      some_string = e.value
  ```

  ```py
  >>> some_string
  ["wtf"]
  ```

---

### â–¶ TÃ­nh pháº£n xáº¡ cá»§a Nan *
<!-- Example ID: 59bee91a-36e0-47a4-8c7d-aa89bf1d3976 --->

1\.

```py
a = float('inf')
b = float('nan')
c = float('-iNf')  # CÃ¡c strings nÃ y khÃ´ng phÃ¢n biá»‡t hoa hay thÆ°á»ng
d = float('nan')
```

**Káº¿t quáº£:**

```py
>>> a
inf
>>> b
nan
>>> c
-inf
>>> float('some_other_string')
ValueError: could not convert string to float: some_other_string (Lá»—i giÃ¡ trá»‹: KhÃ´ng thá»ƒ chuyá»ƒn Ä‘á»•i tá»« string sang float)
>>> a == -c # inf==inf
True
>>> None == None # None == None
True
>>> b == d # nhÆ°ng nan!=nan
False
>>> 50 / a
0.0
>>> a / a
nan
>>> 23 + b
nan
```

2\.

```py
>>> x = float('nan')
>>> y = x / x
>>> y is y # Ä‘á»‹nh danh giá»‘ng nhau (cÃ¹ng trá» vá» má»™t Ä‘á»‘i tÆ°á»£ng)
True
>>> y == y # GÃ­a trá»‹ láº¡i khÃ´ng báº±ng nhau
False
>>> [y] == [y] # GiÃ¡ trá»‹ báº±ng nhau khi náº±m á»Ÿ trong má»™t list
True
```



#### ğŸ’¡ Giáº£i thÃ­ch:

- `'inf'` vÃ  `'nan'` lÃ  cÃ¡c strings Ä‘áº·c biá»‡t (khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng), khi Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i sang kiá»ƒu `float` sáº½ tÆ°Æ¡ng á»©ng biá»ƒu diá»…n cho giÃ¡ trá»‹ vÃ´ háº¡n "infinity" hay khÃ´ng pháº£i lÃ  má»™t sá»‘ "not a number".

- Theo chuáº©n cá»§a IEEE thÃ¬ ` NaN != NaN`, tuÃ¢n theo quy táº¯c trÃªn sáº½ phÃ¡ vá»¡ giáº£ Ä‘á»‹nh vá» tÃ­nh tÆ°Æ¡ng pháº£n cá»§a má»™t pháº§n tá»­ trong má»™t táº­p trong Python vÃ­ dá»¥. náº¿u `x` lÃ  má»™t pháº§n tá»­ cá»§a má»™t táº­p `list`, cÃ¡c phÃ©p toÃ¡n trÃªn cÃ¡c pháº§n tá»­ cá»§a táº­p nhÆ° lÃ  so sÃ¡nh sáº½ dá»±a trÃªn giáº£i Ä‘á»‹nh ráº±ng `x == x`.  Do giáº£ Ä‘á»‹nh nÃ y nÃªn Ä‘á»‹nh danh Ä‘Æ°á»£c so sÃ¡nh Ä‘áº§u tiÃªn (do nhanh hÆ¡n) khi so sÃ¡nh hai pháº§n tá»­, vÃ  cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c so sÃ¡nh chá»‰ khi cÃ¡c Ä‘á»‹nh danh khÃ´ng khá»›p. VÃ­ dá»¥ sau sáº½ giÃºp báº¡n dá»… hiá»ƒu hÆ¡n
  ```py
  >>> x = float('nan')
  >>> x == x, [x] == [x]
  (False, True)
  >>> y = float('nan')
  >>> y == y, [y] == [y]
  (False, True)
  >>> x == y, [x] == [y]
  (False, False)
  ```
  
 Do cÃ¡c Ä‘á»‹nh danh cá»§a `x` vÃ  `y` khÃ¡c nhau, do Ä‘Ã³ giÃ¡ trá»‹ cá»§a chÃºng sáº½ Ä‘Æ°á»£c so sÃ¡nh, mÃ  giÃ¡ trá»‹ cá»§a chÃºng khÃ¡c nhau trong vÃ­ dá»¥ nÃ y; nÃªn káº¿t quáº£ tráº£ vá» lÃ  `False`. Cá»¥ thá»ƒ hÆ¡n, theo tiÃªu chuáº©n cá»§a IEEE thÃ¬ `x` f va `y` Ä‘á»ƒu cÃ³ giÃ¡ trá»‹ lÃ  `nan` khi Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i qua float, ` NaN != NaN` nÃªn `x != y`, nhÆ°ng khi Ä‘áº·t trong má»™t list thÃ¬ Ä‘á»‹nh danh sáº½ Ä‘c so sÃ¡nh trÆ°á»›c nÃªn `[x] == [y]`

- Äá»c thÃªm: [Reflexivity, and other pillars of civilization](https://bertrandmeyer.com/2010/02/06/reflexivity-and-other-pillars-of-civilization/)

---

### â–¶ Mutating the immutable!

<!-- Example ID: 15a9e782-1695-43ea-817a-a9208f6bb33d --->

VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y cÃ³ váº» táº§m thÆ°á»ng náº¿u báº¡n hiá»ƒu cÃ¡ch cÃ¡c tham chiáº¿u (references) hoáº¡t Ä‘Ã´ng trong Python.
```py
some_tuple = ("A", "tuple", "with", "values")
another_tuple = ([1, 2], [3, 4], [5, 6])
```

**Káº¿t quáº£:**
```py
>>> some_tuple[2] = "change this"
TypeError: 'tuple' object does not support item assignment (Lá»—i vá» kiá»ƒu: Ä‘á»‘i tÆ°á»£ng 'tuple' khÃ´ng há»— trá»£ phÃ©p gÃ¡n pháº§n tá»­)
>>> another_tuple[2].append(1000) # DÃ²ng nÃ y khÃ´ng bá»‹ lá»—i
>>> another_tuple
([1, 2], [3, 4], [5, 6, 1000])
>>> another_tuple[2] += [99, 999]
TypeError: 'tuple' object does not support item assignment (Lá»—i vá» kiá»ƒu: Ä‘á»‘i tÆ°á»£ng 'tuple' khÃ´ng há»— trá»£ phÃ©p gÃ¡n pháº§n tá»­)
>>> another_tuple
([1, 2], [3, 4], [5, 6, 1000, 99, 999])
```

TÃ´i Ä‘Ã£ nghÄ© ráº±ng cÃ¡c tuples thÃ¬ báº¥t biáº¿n (immutable) ...
#### ğŸ’¡ Giáº£i thÃ­ch:

* TrÃ­ch tá»« https://docs.python.org/2/reference/datamodel.html

    > CÃ¡c chuá»—i báº¥t biáº¿n
        Má»™t Ä‘á»‘i tÆ°á»£ng kiá»ƒu chuá»—i báº¥t biáº¿n khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a nÃ³ sau khi Ä‘Æ°á»£c táº¡o. (Náº¿u Ä‘á»‘i tÆ°á»£ng nÃ y chá»©a cÃ¡c tham chiáº¿u tá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c, nhá»¯ng Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c; tuy tháº¿, táº­p há»£p cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c trá» trá»±c tiáº¿p bá»Ÿi má»™t Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n khÃ´ng thá»ƒ thay Ä‘á»•i .)

* ToÃ¡n tá»­ `+=` thay Ä‘á»•i list táº¡i chá»—. PhÃ©p gÃ¡n pháº§n tá»­ khÃ´ng thá»±c hiá»‡n Ä‘Æ°á»£c, nhÆ°ng khi ngoáº¡i lá»‡ xáº£y ra, pháº§n tá»­ Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i ngay táº¡i chá»—.

---

### â–¶ The disappearing variable from outer scope
<!-- Example ID: 7f1e71b6-cb3e-44fb-aa47-87ef1b7decc8 --->

```py
e = 7
try:
    raise Exception()
except Exception as e:
    pass
```

**Káº¿t quáº£ (Python 2.x):**
```py
>>> print(e)
# KhÃ´ng in ra káº¿t quáº£ nÃ o cáº£
```

**Káº¿t quáº£ (Python 3.x):**
```py
>>> print(e)
NameError: name 'e' is not defined (Lá»—i tÃªn biáº¿n khÃ´ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a)
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* Source: https://docs.python.org/3/reference/compound_stmts.html#except

  Khi má»™t ngoáº¡i lá»‡ Ä‘Æ°á»£c gÃ¡n sá»­ dá»¥ng Ä‘Ã­ch Ä‘Æ°á»£c Ä‘á»‹nh nghia bá»Ÿi `as`, ngoáº¡i lá»‡ nÃ y Ä‘Æ°á»£c dá»n dáº¹p á»Ÿ cuá»‘i cÃ¢u `except`. NhÆ° váº­y thÃ¬

  ```py
  except E as N:
      foo
  ```

  sáº½ Ä‘Æ°á»£c hiá»ƒu nhÆ° sau

  ```py
  except E as N:
      try:
          foo
      finally:
          del N
  ```

  
    Äiá»u nÃ y cÃ³ nghÄ©a la ngoáº¡i lá»‡ pháº£i Ä‘Æ°á»£c gÃ¡n cho má»™t cÃ¡i tÃªn khÃ¡c Ä‘á»ƒ ta cÃ³ thá»ƒ tÃ¬m tháº¥y nÃ³ sau cÃ¢u except. CÃ¡c ngoáº¡i lá»‡ Ä‘Æ°á»£c dá»n dáº¹p bá»Ÿi vÃ¬ vá»›i truy lá»—i (traceback) Ä‘Æ°á»£c gÃ¡n cho chÃºng, chÃºng hÃ¬nh thÃ nh nÃªn má»™t vÃ²ng tham chiáº¿u bÃªn trong khung ngÄƒn xáº¿p (stack frame), giá»¯ táº¥t cáº£ cÃ¡c biáº¿n cá»¥c bá»™ khÃ´ng bá»‹ xoÃ¡ Ä‘i cho Ä‘áº¿n khi viá»‡c thu tháº­p rÃ¡c tiáº¿p theo tiáº¿p diá»…n.

* CÃ¡c cÃ¢u nÃ y khÃ´ng Ä‘Æ°á»£c tÃ­nh pháº¡m vi trong Python. Má»i thÆ° trong vÃ­ dá»¥ nay Ä‘á»u nÃ m trong cÃ¹ng má»™t pháº¡m vi, vÃ  biáº¿n `e` bá»‹ xoÃ¡ Ä‘i bá»Ÿi vÃ¬ ngoáº¡i lá»‡ `except`. Äiá»u tÆ°Æ¡ng tá»± nhÆ° váº­y khÃ´ng Ä‘Ãºng vá»›i cÃ¡c hÃ m cÃ³ cÃ¡c ná»™i pháº¡m vi (inner-scopes) riÃªng biá»‡t. VÃ­ dá»¥ sau sáº½ cho ta tháº¥y:

     ```py
     def f(x):
         del(x)
         print(x)

     x = 5
     y = [5, 4, 3]
     ```

     **Káº¿t quáº£:**
     ```py
     >>>f(x)
     UnboundLocalError: local variable 'x' referenced before assignment
     >>>f(y)
     UnboundLocalError: local variable 'x' referenced before assignment
     >>> x
     5
     >>> y
     [5, 4, 3]
     ```

* Trong Python 2.x, biáº¿n `e` Ä‘Æ°á»£c gÃ¡n cho má»™t hiá»‡n thá»±c `Exception()`, khi báº¡n in ra biáº¿n nÃ y, nÃ³ khÃ´ng hiá»ƒn thá»‹ gÃ¬ cáº£

    **Káº¿t quáº£ (Python 2.x):**
    ```py
    >>> e
    Exception()
    >>> print e
    # KhÃ´ng in ra gÃ¬ cáº£!
    ```

---


### â–¶ The mysterious key type conversion
<!-- Example ID: 00f42dd0-b9ef-408d-9e39-1bc209ce3f36 --->
```py
class SomeClass(str):
    pass

some_dict = {'s': 42}
```

**Káº¿t quáº£:**
```py
>>> type(list(some_dict.keys())[0])
str
>>> s = SomeClass('s')
>>> some_dict[s] = 40
>>> some_dict # GiÃ¡ trá»‹ mong Ä‘á»£i: Hai cáº·p khoÃ¡ vÃ  giÃ¡ trá»‹ khÃ¡c nhau
{'s': 40}
>>> type(list(some_dict.keys())[0])
str
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* Cáº£ Ä‘á»‘i tÆ°á»£ng `s` vÃ  string `"s"` khi Ä‘Æ°á»£c bÄƒm (hash) sáº½ cho ra cÃ¹ng má»™t giÃ¡ trá»‹ á»Ÿi `SomeClass` thá»«a káº¿ phÆ°Æ¡ng thá»©c `__hash__` cá»§a lá»›p `str`.
* `SomeClass("s") == "s"`  báº±ng `True` bá»Ÿi vÃ¬ `SomeClass` cÅ©ng thá»«a káº¿ phÆ°Æ¡ng thá»©c `__eq__` tá»« lá»›p `str` .
* Bá»Ÿi vÃ¬ cáº£ hai Ä‘á»‘i tÆ°á»£ng nÃ y khi bÄƒm cho ra cÃ¹ng giÃ¡ trá»‹ vÃ  báº±ng nhau nÃªn chÃºng Ä‘Æ°á»£c biá»ƒu diá»…n bá»Ÿi cÃ¹ng má»™t khoÃ¡ trong tá»« Ä‘iá»ƒn.
* Äá»ƒ cÃ³ Ä‘Æ°á»£c káº¿t quáº£ nhÆ° mong muá»‘n vá»›i hai cáº·p giÃ¡ khoÃ¡ vÃ  giÃ¡ trá»‹ khÃ¡c nhau, chÃºng ta cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c `__eq__` trong `SomeClass`

  ```py
  class SomeClass(str):
    def __eq__(self, other):
        return (
            type(self) is SomeClass
            and type(other) is SomeClass
            and super().__eq__(other)
        )

    # Khi chÃºng ta ta Ä‘á»‹nh nghÄ©a má»™t phÆ°Æ¡ng thá»©c __eq__ tuá»³ chá»‰nh, Python tá»± Ä‘á»™ng dá»«ng viá»‡c thá»«a káº¿
    # vÃ  chÃºng ta cÅ©ng cáº§n Ä‘á»‹nh nghÄ©a phÆ°Æ¡n thá»©c __hash__ ,
    __hash__ = str.__hash__

  some_dict = {'s':42}
  ```

  **Káº¿t quáº£:**
  ```py
  >>> s = SomeClass('s')
  >>> some_dict[s] = 40
  >>> some_dict
  {'s': 40, 's': 42}
  >>> keys = list(some_dict.keys())
  >>> type(keys[0]), type(keys[1])
  (__main__.SomeClass, str)
  ```

---

### â–¶ Let's see if you can guess this?
<!-- Example ID: 81aa9fbe-bd63-4283-b56d-6fdd14c9105e --->
```py
a, b = a[b] = {}, 5
```

**Káº¿t quáº£:**
```py
>>> a
{5: ({...}, 5)}
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* Dá»±a trÃªn [nguá»“n tham kháº£o ngÃ´n ngá»¯ Python](https://docs.python.org/2/reference/simple_stmts.html#assignment-statements), cÃ¡c cÃ¢u lá»‡nh gÃ¡n sáº½ cÃ³ cÃ¡ch khai bÃ¡o nhÆ° sau
  ```
  (target_list "=")+ (expression_list | yield_expression)
  ```
  vÃ 
Má»™t cÃ¢u lá»‡nh gÃ¡n Ä‘Ã¡nh giÃ¡ má»™t danh sÃ¡ch biá»ƒu diá»…n(nhá»› ráº±ng Ä‘Ã¢y cÃ³ thá»ƒ lÃ  má»™t biá»ƒu diá»…n Ä‘Æ¡n láº» hoáº·c má»™t danh sÃ¡ch cÃ¡c biá»ƒu diá»…n Ä‘Æ°á»£c phÃ¢n cÃ¡ch bá»Ÿi dáº¥u pháº©y, Ä‘á»‘i vá»›i trÆ°á»ng há»£p phÃ­a sau thÃ¬ sainh ra má»™t tuple) vÃ  gÃ¡n Ä‘á»‘i tÆ°á»£ng káº¿t quáº£ Ä‘Æ¡n cho má»—i má»™t danh sÃ¡ch má»¥c tiÃªu, tá»« trÃ¡i sang pháº£i. 


* ToÃ¡n tá»­ `+` trong `(target_list "=")+` cÃ³ nghÄ©a lÃ  cÃ³ thá»ƒ cÃ³ **má»™t hay nhiá»u** danh sÃ¡ch má»¥c tiÃªu (target lists). Trong trÆ°á»ng há»£p nÃ y, cÃ¡c danh sÃ¡ch má»¥c tiÃªu lÃ  `a, b` vÃ  `a[b]` (chÃº Ã½ lÃ  danh sÃ¡ch biá»ƒu diá»…n chá»‰ cÃ³ chÃ­nh xÃ¡c má»™t, trong trÆ°á»ng há»£p cá»§a chÃºng ta lÃ  `{}, 5`)


* Sau khi biá»ƒu diá»…n danh sÃ¡ch Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡, giÃ¡ trá»‹ cá»§a nÃ³ Ä‘Æ°á»£c giáº£i nÃ©n thÃ nh cÃ¡c danh sÃ¡ch Ä‘Æ°á»£c giáº£i nÃ©n thÃ nh cÃ¡c danh sÃ¡ch má»¥c tiÃªu tá»« **trÃ¡i sang pháº£i**. Do Ä‘Ã³, trong trÆ°á»ng há»£p cá»§a chÃºng ta, Ä‘áº§u tiÃªn tuple `{}, 5` Ä‘Æ°á»£c giáº£i nÃ©n ra `a, b` vÃ  chÃºng ta cÃ³ `a = {}` vÃ  `b = 5`.

* `a` Ä‘Æ°á»£c gÃ¡n cho `{}`, Ä‘Ã¢y lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c giÃ¡ trá»‹ (mutable object).

* Danh sÃ¡ch má»¥c tiÃªu thá»© hai lÃ  `a[b]` (báº¡n cÃ³ thá»ƒ cÃ³ thá»ƒ nghÄ© ta sáº½ gáº·p má»™t lá»—i bá»Ÿi vÃ¬ cáº£ `a` vÃ  `b` Ä‘á»u chÆ°a Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong cÃ¡c cÃ¢u lá»‡nh trÆ°á»›c Ä‘Ã³. NhÆ°ng nhá»› ráº±ng, chÃºng ta Ä‘Ã£ gÃ¡n `a` báº±ng `{}` vÃ  `b` báº±ng `5`).

* BÃ¢y giá», chÃºng ta thiáº¿t láº­p khoÃ¡ `5` trong tá»« Ä‘iá»ƒn vá»›i giÃ¡ trá»‹ lÃ  tuple `({}, 5)` táº¡o ra má»™t tham chiáº¿u vÃ²ng trÃ²n (`{...}` trong káº¿t quáº£ trá» tá»›i cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng mÃ  `a` Ä‘Ã£ Ä‘ang tham chiáº¿u). Má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n hÆ¡n vá» tham chiáº¿u vÃ²ng trÃ²n lÃ 
  ```py
  >>> some_list = some_list[0] = [0]
  >>> some_list
  [[...]]
  >>> some_list[0]
  [[...]]
  >>> some_list is some_list[0]
  True
  >>> some_list[0][0][0][0][0][0] == some_list
  True
  ```
 TÆ°Æ¡ng tá»± lÃ  trong vÃ­ dá»¥ cá»§a chÃºng ta (`a[b][0]` lÃ  cÃ¹ng Ä‘á»‘i tÆ°á»£ng vá»›i `a`)

* Tá»•ng káº¿t láº¡i, báº¡n cÃ³ thá»ƒ chia vÃ­ dá»¥ nÃ y ra
  ```py
  a, b = {}, 5
  a[b] = a, b
  ```
  VÃ  tham chiáº¿u vÃ²ng cÃ³ thá»ƒ Ä‘Æ°á»£c biá»‡n há»™ bá»Ÿi má»™t Ä‘iá»u lÃ  `a[b][0]` lÃ  Ä‘á»‘i tÆ°á»£ng giá»‘ng  `a`
  ```py
  >>> a[b][0] is a
  True
  ```

---
---

## Section: Slippery Slopes

### â–¶ Modifying a dictionary while iterating over it
<!-- Example ID: b4e5cdfb-c3a8-4112-bd38-e2356d801c41 --->
```py
x = {0: None}

for i in x:
    del x[i]
    x[i+1] = None
    print(i)
```

**Káº¿t quáº£ (Ãp dá»¥ng cho cÃ¡c phiÃªn báº£n Python 2.7- Python 3.5):**

```
0
1
2
3
4
5
6
7
```

VÃ²ng láº·p cháº¡y Ä‘Ãºng *tÃ¡m* láº§n rá»“i dá»«ng láº¡i

#### ğŸ’¡ Giáº£i thÃ­ch:

* Viá»‡c láº·p vÃ  chá»‰nh sá»­a má»™t tá»« Ä‘iá»ƒn cÃ¹ng má»™t lÃºc khÃ´ng Ä‘Æ°á»£c há»— trá»£.
* CÃ³ tÃ¡m láº§n cháº¡y bá»Ÿi vÃ¬ táº¡i thá»i Ä‘iá»ƒm dá»«ng Ä‘Ã³ lÃ  lÃºc tá»« Ä‘iá»ƒn Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c Ä‘á»ƒ giá»¯ thÃªm nhiá»u khoÃ¡ hÆ¡n (chÃºng ta cÃ³ tÃ¡m pháº§n tá»« xoÃ¡, do Ä‘Ã³ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c lÃ  cáº§n thiáº¿t). ÄÃ¢y thá»±c sá»± lÃ  má»™t chi tiáº¿t trong triá»ƒn khai.
* CÃ¡ch cÃ¡c khoÃ¡ bá»‹ xoÃ¡ Ä‘Æ°á»£c xá»­ lÃ½ vÃ  khi nao thÃ¬ viá»‡c Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c diá»…n ra sáº½ khÃ¡c biá»‡t Ä‘á»‘i vá»›i cÃ¡c phiÃªn báº£n Python khÃ¡c nhau
* Do Ä‘Ã³ cÃ¡c phiÃªn báº£n Python lá»›n hÆ¡n 2.7 vÃ  nhá» hÆ¡n 3.5, sá»‘ lÆ°á»£ng cÃ¡ khoÃ¡ cÃ³ thá»ƒ giá»¯ dao Ä‘á»™ng tá»« 8 (nhÆ°ng khi báº¡n cháº¡y thÃ¬ con sá»‘ nÃ y sáº½ khÃ´ng thay Ä‘á»•i giá»¯a cÃ¡c láº§n cháº¡y). Báº¡n cÃ³ thá»ƒ xem thÃªm cÃ¡c tháº£o luáº­n khÃ¡c á»Ÿ [Ä‘Ã¢y](https://github.com/satwikkansal/wtfpython/issues/53) hoáº·c trÃªn Stackoverflow táº¡i [Ä‘Ã¢y](https://stackoverflow.com/questions/44763802/bug-in-python-dict)
* Tá»« phiÃªn báº£n 3.7.6 trá»Ÿ Ä‘i, báº¡n sáº½ gáº·p ngoáº¡i lá»‡ `RuntimeError: dictionary keys changed during iteration` khi báº¡n cá»‘ gáº¯ng thá»­ vÃ­ dá»¥ trÃªn.
---

### â–¶ Stubborn `del` operation
<!-- Example ID: 777ed4fd-3a2d-466f-95e7-c4058e61d78e --->
<!-- read-only -->

```py
class SomeClass:
    def __del__(self):
        print("Deleted!")
```

**Káº¿t quáº£:**
1\.
```py
>>> x = SomeClass()
>>> y = x
>>> del x # this should print "Deleted!"
>>> del y
Deleted!
```


CÃ³ thá»ƒ báº¡n Ä‘oÃ¡n Ä‘Æ°á»£c lÃ m sao mÃ  `__del__` khÃ´ng Ä‘Æ°á»£c gá»i khi ta cá»‘ gáº¯ng xoÃ¡ `x` trong láº§n Ä‘áº§u tiÃªn. HÃ£y thá»­ thÃªm 
2\.
```py
>>> x = SomeClass()
>>> y = x
>>> del x
>>> y # check if y exists Kiá»ƒm tra y cÃ³ tá»“n táº¡i
<__main__.SomeClass instance at 0x7f98a1a67fc8>
>>> del y # NhÆ° láº§n trÆ°á»›c, Ä‘Ã¡ng láº½ káº¿t quáº£ nÃªn lÃ  in ra "Deleted!"
>>> globals() # nhÆ°ng khÃ´ng, ta khÃ´ng cÃ³ Ä‘Æ°á»£c káº¿t quáº£ nhÆ° mong muá»‘n. CÃ¹ng kiá»ƒm tra táº¥t cáº£ cÃ¡c biáº¿n toÃ n cá»¥c vÃ  xÃ¡c nháº­n 
Deleted!
{'__builtins__': <module '__builtin__' (built-in)>, 'SomeClass': <class __main__.SomeClass at 0x7f98a1a5f668>, '__package__': None, '__name__': '__main__', '__doc__': None}
```

Ok giá» thÃ¬ nÃ³ Ä‘Ã£ Ä‘Æ°á»£c xoÃ¡ :confused:

#### ğŸ’¡ Giáº£i thÃ­ch:
+ `del x` khÃ´ng gá»i trá»±c tiáº¿p `x.__del__()`.
+ Khi `del x` Ä‘Æ°á»£c cháº¡y, Python xoÃ¡  tÃªn  `x` khá»i pháº¡m vi hiá»‡n hÃ nh vÃ  giáº£m biáº¿n Ä‘áº¿m tham chiáº¿u cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘i 1. `__del__()` Ä‘Æ°á»£c gá»i chá»‰ khi biáº¿n Ä‘áº¿m nÃ y giáº£m xuá»‘ng 0.
+ Tron Ä‘oáº¡n mÃ£ thá»© hai, `__del__()` khÃ´ng Ä‘Æ°á»£c gá»i bá»Ÿi vÃ¬ cÃ¢u lá»‡nh trÆ°á»›c Ä‘Ã³ (`>>> y`) táº¡o má»™t tham chiáº¿u khÃ¡c tá»›i cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng (cá»¥ thá»ƒ lÃ , biáº¿n `_` trá» tá»›i giÃ¡ trá»‹ káº¿t quáº£ cá»§a má»™t biá»ƒu diá»…n khÃ´ng pháº£i `None` tron REPL), do Ä‘Ã³ ngÄƒn biáº¿n Ä‘áº¿m tham chiáº¿u giáº£m vá» 0 khi thá»±c hiá»‡n `del y`
+ Gá»i `globals` (thá»±c ra thÃ¬ thá»±c hiá»‡n báº¥t cá»© thá»© gÃ¬ táº¡o ra káº¿t quáº£ khÃ´ng pháº£i lÃ  `None`) lÃ m cho `_` tham chiáº¿u tá»›i káº¿t quáº£ má»›i, bá» Ä‘i tham chiáº¿u hiá»‡n tá»“n táº¡i. BÃ¢y giá» thÃ¬ biáº¿n Ä‘áº¿m tham chiáº¿u giáº£m ve 0 vÃ  báº¡n cÃ³ thá»ƒ tá»« "Deleted!" Ä‘Æ°á»£c hiá»ƒn thá»‹.
---

### â–¶ The out of scope variable
<!-- Example ID: 75c03015-7be9-4289-9e22-4f5fdda056f7 --->
```py
a = 1
def some_func():
    return a

def another_func():
    a += 1
    return a
```

**Káº¿t quáº£:**
```py
>>> some_func()
1
>>> another_func()
UnboundLocalError: local variable 'a' referenced before assignment (tham chiáº¿u tá»›i 'a' trÆ°á»›c khi gÃ¡n giÃ¡ trá»‹)
```

#### ğŸ’¡ Giáº£i thÃ­ch:
* Khi báº¡n gÃ¡n giÃ¡ trá»‹ cho má»™t biáº¿n trong má»™t pháº¡m vi, thÃ¬ biáº¿n nÃ y trá»Ÿ thÃ nh cá»¥c bá»™ cho pháº¡m vi Ä‘Ã³. Do Ä‘Ã³ `a` trá»Ÿ thÃ nh cá»¥c bá»™ Ä‘á»‘i vá»›i `another_func`, nhÆ°ng nÃ³ chÆ°a Ä‘Æ°á»£c khá»Ÿi táº¡o trong cÃ¹ng pháº¡m vi, nÃªn ta gáº·p lá»—i vá» tham chiáº¿u phÃ­a trÃªn.
* Äá»c [bÃ i nÃ y](http://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html) Ä‘á»ƒ há»c vá» cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a cÃ¡c khÃ´ng gian tÃªn (namespaces) vÃ  viá»‡c phÃ¢n giáº£i pháº¡m vi trong Python.
* Äá»ƒ thay Ä‘á»•i biÃªn bÃªn ngoÃ i pháº¡m vi `a` bÃªn trong hÃ m `another_func`, sá»­ dá»¥ng tá»« khoÃ¡ `global`
  ```py
  def another_func()
      global a
      a += 1
      return a
  ```

  **Káº¿t quáº£:**
  ```py
  >>> another_func()
  2
  ```

---

### â–¶ Deleting a list item while iterating
<!-- Example ID: 4cc52d4e-d42b-4e09-b25f-fbf5699b7d4e --->
```py
list_1 = [1, 2, 3, 4]
list_2 = [1, 2, 3, 4]
list_3 = [1, 2, 3, 4]
list_4 = [1, 2, 3, 4]

for idx, item in enumerate(list_1):
    del item

for idx, item in enumerate(list_2):
    list_2.remove(item)

for idx, item in enumerate(list_3[:]):
    list_3.remove(item)

for idx, item in enumerate(list_4):
    list_4.pop(idx)
```

**Káº¿t quáº£:**
```py
>>> list_1
[1, 2, 3, 4]
>>> list_2
[2, 4]
>>> list_3
[]
>>> list_4
[2, 4]
```

VÃ¬ sao láº¡i cÃ³ káº¿t quáº£ lÃ  `[2, 4]`?
#### ğŸ’¡ Giáº£i thÃ­ch:

* Thay Ä‘á»•i Ä‘á»‘i tÆ°á»£ng trong khi láº·p khÃ´ng pháº£i lÃ  má»™t cÃ¡ch lÃ m hay. CÃ¡ch thá»±c hiá»‡n Ä‘Ãºng lÃ  láº·p qua má»™t báº£n sao cá»§a chÃ­nh Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ nhÆ° trÆ°á»ng há»£p sá»­ dá»¥ng `list_3[:]`

     ```py
     >>> some_list = [1, 2, 3, 4]
     >>> id(some_list)
     139798789457608
     >>> id(some_list[:]) # ChÃº Ã½ ráº±ng Python táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i sinh ra tá»« viá»‡c cáº¯t (slice) list.
     139798779601192
     ```

**Sá»± khÃ¡c biá»‡t giá»¯a `del`, `remove`, vÃ  `pop`:**
* `del var_name` chá»‰ loáº¡i bá» sá»± cÃ³ mÄƒt cá»§a `var_name` khá»i khÃ´ gian tÃªn cá»¥c bá»™ vÃ  toÃ n cá»¥c (Ä‘Ã³ la lÃ½ do táº¡i sao `list_1` khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng ) 
* `remove` loáº¡i bá» giÃ¡ trá»‹ Ä‘Æ°á»£c khá»›p Ä‘áº§u tiÃªn, khÃ´ng pháº£i táº¡i má»™t chá»‰ sá»‘ cá»¥ thá»ƒ, ngoáº¡i lá»‡ `ValueError` sáº½ xáº£y ra náº¿u giÃ¡ trá»‹ muá»‘n loáº¡i bá» khÃ´ng tá»“n táº¡i.
* `pop` loáº¡i bá» pháº§n tá»­ cá»§a danh sÃ¡ch á»Ÿ má»—i chá»‰ sá»‘ cá»¥ thá»ƒ vÃ  tráº£ vá» pháº§n tá»« Ä‘Ã³, `pop` sáº½ khá»Ÿi lÃªn `IndexError` náº¿u nÃ³ nháº­n má»™t chá»‰ sá»‘ khÃ´ng há»£p lá»‡

**Táº¡i sao káº¿t quáº£ láº¡i ra `[2, 4]`?**
- Viá»‡c láº·p qua danh sÃ¡ch Ä‘Æ°á»£c thá»±c hiá»‡n theo tá»«ng chá»‰ sá»‘ má»™t, vÃ  khi chÃºng ta loáº¡i bá» `1` khá»i `list_2` hay `list_4`, cÃ¡c danh sÃ¡ch nÃ y sáº½ cÃ²n láº¡i `[2, 3, 4]`. CÃ¡c pháº§n tá»­ cÃ²n láº¡i trong list Ä‘Æ°á»£c dá»‹ch chuyá»ƒn sang trÃ¡i, vÃ­ dá»¥ nhÆ° `2` sáº½ cÃ³ chá»‰ sá»‘ lÃ  0, vÃ  `3` cÃ³ chá»‰ sá»‘ lÃ  1. Do láº§n láº·p tiáº¿p theo sáº½ xá»­ lÃ½ pháº§n tá»­ cÃ³ chá»‰ sá»‘ lÃ  1 (`3`), nÃªn pháº§n tá»­ táº¡i chá»‰ sá»‘ 0 (`2`) sáº½ bá»‹ bá» qua. 

* Xem thÃªm táº¡i StackOverflow [thread](https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it) explaining the example
* VÃ  xem thÃªm á»Ÿ Ä‘Ã¢y Ä‘á»ƒ cÃ³ cÃ¡c vÃ­ dá»¥ liÃªn quan tá»›i cÃ¡c tá»« Ä‘iá»ƒn [thread](https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items).

---


### â–¶ Lossy zip of iterators *
<!-- Example ID: c28ed154-e59f-4070-8eb6-8967a4acac6d --->

```py
>>> numbers = list(range(7))
>>> numbers
[0, 1, 2, 3, 4, 5, 6]
>>> first_three, remaining = numbers[:3], numbers[3:]
>>> first_three, remaining
([0, 1, 2], [3, 4, 5, 6])
>>> numbers_iter = iter(numbers)
>>> list(zip(numbers_iter, first_three)) 
[(0, 0), (1, 1), (2, 2)]
# so far so good, let's zip the remaining
>>> list(zip(numbers_iter, remaining))
[(4, 3), (5, 4), (6, 5)]
```
Pháº§n tá»­  `3` trong `numbers` Ä‘Ã¢u?
#### ğŸ’¡ Giáº£i thÃ­ch:

- Theo tÃ i liá»‡u cá»§a Python [docs](https://docs.python.org/3.3/library/functions.html#zip), triá»ƒn khai gáº§n nháº¥t cá»§a hÃ m zip nhÆ° sau,
    ```py
    def zip(*iterables):
        sentinel = object()
        iterators = [iter(it) for it in iterables]
        while iterators:
            result = []
            for it in iterators:
                elem = next(it, sentinel)
                if elem is sentinel: return
                result.append(elem)
            yield tuple(result)
    ```
- HÃ m nÃ y nháº­n vÃ o má»™t sá»‘ tuá»³ Ã½ cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p (iterable objects), thÃªm má»—i pháº§n tá»­ cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y vÃ o danh sÃ¡ch `result` thÃ´ng qua viá»‡c gá»i hÃ m `next` trÃªn Ä‘á»‘i tÆ°á»£ng nÃ y, vÃ  dÆ°ng láº¡i khi Ä‘Ã´i tÆ°á»£ng nÃ y háº¿t cÃ¡c pháº§n tá»­ Ä‘á»ƒ láº·p   
- ChÃº Ã½ lÃ  khi báº¥t cá»© Ä‘á»‘i tÆ°á»£ng láº·p nÃ o cáº¡n kiá»‡t Ä‘á»‘i tÆ°á»£ng láº·p, cÃ¡c pháº§n tá»­ tá»“n táº¡i trong danh sÃ¡ch `result` Ä‘Æ°á»£c bá» qua. ÄÃ³ lÃ  nhá»¯ng gÃ¬ xáº£y vá»›i `3` trong `numbers_iter`
- Äá»ƒ thá»±c hiá»‡n Ä‘Ãºng, ta cáº§n lÃ m nhÆ° sau
    ```py
    >>> numbers = list(range(7))
    >>> numbers_iter = iter(numbers)
    >>> list(zip(first_three, numbers_iter))
    [(0, 0), (1, 1), (2, 2)]
    >>> list(zip(remaining, numbers_iter))
    [(3, 3), (4, 4), (5, 5), (6, 6)]
    ```
    Tham sá»‘ Ä‘áº§u tiÃªn cá»§a zip nÃªn lÃ  Ä‘á»‘i tÆ°á»£ng cÃ³ sá»‘ lÆ°á»£ng cÃ¡c pháº§n tá»­ Ã­t nháº¥t.

---

### â–¶ Loop variables leaking out!
<!-- Example ID: ccec7bf6-7679-4963-907a-1cd8587be9ea --->
1\.
```py
for x in range(7):
    if x == 6:
        print(x, ': for x inside loop')
print(x, ': x in global')
```

**Káº¿t quáº£:**
```py
6 : for x inside loop
6 : x in global
```

NhÆ°ng mÃ  `x` chÆ°a bao giá» Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bÃªn ngoÃ i vÃ²ng láº·p...
2\.
```py
# Láº§n nÃ y khá»Ÿi táº¡o x trÆ°á»›c
x = -1
for x in range(7):
    if x == 6:
        print(x, ': for x inside loop')
print(x, ': x in global')
```

**Káº¿t quáº£:**
```py
6 : for x inside loop
6 : x in global
```

3\.

**Káº¿t quáº£ (Python 2.x):**
```py
>>> x = 1
>>> print([x for x in range(5)])
[0, 1, 2, 3, 4]
>>> print(x)
4
```

**Káº¿t quáº£ (Python 3.x):**
```py
>>> x = 1
>>> print([x for x in range(5)])
[0, 1, 2, 3, 4]
>>> print(x)
1
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- Trong Python, vÃ²ng láº·p for sá»­ dá»¥ng pháº¡m vi mÃ  chÃºng tá»“n táº¡i bÃªn trong vÃ  Ä‘á»ƒ biáº¿n láº·p (loop-variable) Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a cá»§a chÃºng Ä‘áº±ng sau. Äiá»u nÃ y cÅ©ng Ã¡p dá»¥ng khi chÃºng ta Ä‘á»‹nh nghÄ©a rÃµ biáº¿n láº·p trong khÃ´ng gian tÃªn toÃ n cá»¥c trÆ°á»›c Ä‘Ã³. Trong trÆ°á»ng há»£p nÃ y vÃ²ng láº·p sáº½ gáº¯n láº¡i biáº¿n Ä‘Ã£ tá»“n táº¡i. 

- Sá»± khÃ¡c nhau giá»¯a káº¿t quáº£ cá»§a trÃ¬nh thÃ´ng dá»‹ch Python 2.x vÃ  Python 3.x liÃªn quan tá»›i vÃ­ dá»¥ list comprehension cÃ³ thá»ƒ Ä‘Æ°á»£c giáº£i thÃ­ch báº±ng tÃ i liá»‡u [Nhá»¯ng Ä‘iá»u má»›i trong Python 3.0](https://docs.python.org/3/whatsnew/3.0.html):

    > "List comprehensions khÃ´ng cÃ²n há»— trá»£ dáº¡ng cÃº phÃ¡p `[... for var in item1, item2, ...]`. HÃ£y Sá»­ dá»¥ng `[... for var in (item1, item2, ...)]`. CÃ²n ná»¯a, chÃº Ã½ ráº±ng list comprehensions cÃ³ cÃ¡c ngá»¯ nghÄ©a khÃ¡c nhau: chÃºng khÃ¡ gáº§n vá»›i cÃº phÃ¡p Ä‘áº·c biá»‡t cá»§a má»™t biá»ƒu diá»…n generator bÃªn trong hÃ m xÃ¢y dá»±ng `list()` , vÃ  cá»¥ thá»ƒ lÃ ,  cÃ¡c biáº¿n Ä‘iá»u khiá»ƒn vÃ²ng láº·p khÃ´ng cÃ²n bá»‹ rÃ² rá»‰ (leaked) trong pháº¡m vi xung quanh"

---

### â–¶ Beware of default mutable arguments!
<!-- Example ID: 7d42dade-e20d-4a7b-9ed7-16fb58505fe9 --->

```py
def some_func(default_arg=[]):
    default_arg.append("some_string")
    return default_arg
```

**Káº¿t quáº£:**
```py
>>> some_func()
['some_string']
>>> some_func()
['some_string', 'some_string']
>>> some_func([])
['some_string']
>>> some_func()
['some_string', 'some_string', 'some_string']
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- CÃ¡c tham sá»‘ máº·c Ä‘á»‹nh cÃ³ kiá»ƒu giÃ¡ trá»‹ thay Ä‘á»•i Ä‘Æ°á»£c (mutable) cá»§a cÃ¡c hÃ m trong Python khÃ´ng thá»±c sá»± Ä‘Æ°á»£c khá»Ÿi táº¡o má»—i láº§n ta gá»i hÃ m. Thay vÃ o Ä‘Ã³ giÃ¡ trá»‹ trá»‹ má»›i Ä‘Æ°á»£c gÃ¡n cho chÃºng Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i vai trÃ²  giÃ¡ trá»‹ máº·c Ä‘á»‹nh. Khi ta truyá»n vÃ o hÃ m `some_func` giÃ¡ trá»‹ `[]`, giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a biáº¿n `default_arg` khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng, do Ä‘Ã³ hÃ m tráº£ vá» káº¿t quáº£ nhÆ°  mong Ä‘á»£i

    ```py
    def some_func(default_arg=[]):
        default_arg.append("some_string")
        return default_arg
    ```

    **Káº¿t quáº£:**
    ```py
    >>> some_func.__defaults__ # Thuá»™c tÃ­nh nÃ y sáº½ cho ta tháº¥y cÃ¡c giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a tham sá»‘ truyá»n vÃ o hÃ m 
    ([],)
    >>> some_func()
    >>> some_func.__defaults__
    (['some_string'],)
    >>> some_func()
    >>> some_func.__defaults__
    (['some_string', 'some_string'],)
    >>> some_func([])
    >>> some_func.__defaults__
    (['some_string', 'some_string'],)
    ```

- Äá»ƒ trÃ¡nh cÃ¡c bugs liÃªn quan tá»›i cÃ¡c tham sá»‘ cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹, ta cÃ³ thá»ƒ gÃ¡n cho chÃºng giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  `None` vÃ  sau Ä‘Ã³ viáº¿t mÃ£ kiá»ƒm tra xem giÃ¡ trá»‹ truyá»n vÃ o hÃ m cÃ³ tÆ°Æ¡ng á»©ng vá»›i tham sá»‘ Ä‘Ã³ hay khÃ´ng. VÃ­ dá»¥:

    ```py
    def some_func(default_arg=None):
        if default_arg is None:
            default_arg = []
        default_arg.append("some_string")
        return default_arg
    ```

---

### â–¶ Catching the Exceptions
<!-- Example ID: b5ca5e6a-47b9-4f69-9375-cda0f8c6755d --->
```py
some_list = [1, 2, 3]
try:
    # CÃ¢u lá»‡nh sau sáº½ gÃ¢y ra ngoáº¡i lá»‡ ``IndexError``
    print(some_list[4])
except IndexError, ValueError:
    print("Caught!")

try:
    # CÃ¢u lá»‡nh sau sáº½ gÃ¢y ra ngoáº¡i lá»‡ ``ValueError``
    some_list.remove(4)
except IndexError, ValueError:
    print("Caught again!")
```

**Káº¿t quáº£ (Python 2.x):**
```py
Caught!

ValueError: list.remove(x): x not in list
```

**Káº¿t quáº£ (Python 3.x):**
```py
  File "<input>", line 3
    except IndexError, ValueError:
                     ^
SyntaxError: invalid syntax
```

#### ğŸ’¡ Giáº£i thÃ­ch

* Äá»ƒ thÃªm nhiá»u ngoáº¡i lá»‡ trÃªn cÃ¹ng má»™t dÃ²ng except, báº¡n cáº§n truyá»n vÃ o má»™t tuple vá»›i cÃ¡c ngoáº¡i lá»‡ Ä‘Æ°á»£c liá»‡t kÃª bÃªn trong hai dáº¥u ngoáº·c Ä‘Æ¡n. VÃ­ dá»¥,
  ```py
  some_list = [1, 2, 3]
  try:
     # This should raise a ``ValueError``
     some_list.remove(4)
  except (IndexError, ValueError), e:
     print("Caught again!")
     print(e)
  ```
  **Káº¿t quáº£ (Python 2.x):**
  ```
  Caught again!
  list.remove(x): x not in list
  ```
  **Káº¿t quáº£ (Python 3.x):**
  ```py
    File "<input>", line 4
      except (IndexError, ValueError), e:
                                       ^
  IndentationError: unindent does not match any outer indentation level
  ```

* TÃ¡ch biá»‡t ngoáº¡i lá»‡ vá»›i biáº¿n dÃ¹ng dáº¥u pháº©y Ä‘Ã£ khÃ´n cÃ²n Ä‘Æ°á»£c Ã¡p dá»¥ng ná»¯a vÃ  khi viáº¿t nhÆ° váº­y thi code sáº½ khÃ´ng cháº¡y trong Python 3; CÃ¡ch lÃ m Ä‘Ãºng lÃ  sá»­ dá»¥ng `as`. VÃ­ dá»¥, 
  ```py
  some_list = [1, 2, 3]
  try:
      some_list.remove(4)

  except (IndexError, ValueError) as e:
      print("Caught again!")
      print(e)
  ```
  **Káº¿t quáº£:**
  ```
  Caught again!
  list.remove(x): x not in list
  ```

---

### â–¶ Same operands, different story!
<!-- Example ID: ca052cdf-dd2d-4105-b936-65c28adc18a0 --->
1\.
```py
a = [1, 2, 3, 4]
b = a
a = a + [5, 6, 7, 8]
```

**Káº¿t quáº£:**
```py
>>> a
[1, 2, 3, 4, 5, 6, 7, 8]
>>> b
[1, 2, 3, 4]
```

2\.
```py
a = [1, 2, 3, 4]
b = a
a += [5, 6, 7, 8]
```

**Káº¿t quáº£:**
```py
>>> a
[1, 2, 3, 4, 5, 6, 7, 8]
>>> b
[1, 2, 3, 4, 5, 6, 7, 8]
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* `a += b` khÃ´ng pháº£i luÃ´n luÃ´n cho ra káº¿t quáº£ giá»‘ng nhÆ° `a = a + b`. CÃ¡c lÆ¡p *cÃ³ thá»ƒ* triá»ƒn khai phÃ©p *`op=`* khÃ¡c nhau.

* Biá»ƒu diá»…n `a = a + [5,6,7,8]` sinh ra má»™t danh sÃ¡ch má»›i vÃ  tham chiáº¿u cá»§a `a` trá» tá»›i danh sÃ¡ch má»›i, vÃ  Ä‘á»ƒ cho `b` khÃ´ng Ä‘á»•i.
* Biá»ƒn diá»…n `a += [5,6,7,8]` thá»±c sá»± tÆ°Æ¡ng Ä‘Æ°Æ¡ng vÆ¡i hÃ m "má»Ÿ rá»™ng" Ã¡p dá»¥ng cho danh sÃ¡ch Æ¡ Ä‘Ã³ `a` vÃ  `b` váº«n trá» vá» cÃ¹ng má»™t danh sÃ¡ch Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i ngay táº¡i chá»—.

---

### â–¶ Name resolution ignoring class scope
<!-- Example ID: 03f73d96-151c-4929-b0a8-f74430788324 --->
1\.
```py
x = 5
class SomeClass:
    x = 17
    y = (x for i in range(10))
```

**Káº¿t quáº£:**
```py
>>> list(SomeClass.y)[0]
5
```

2\.
```py
x = 5
class SomeClass:
    x = 17
    y = [x for i in range(10)]
```

**Káº¿t quáº£ (Python 2.x):**
```py
>>> SomeClass.y[0]
17
```

**Káº¿t quáº£ (Python 3.x):**
```py
>>> SomeClass.y[0]
5
```

#### ğŸ’¡ Giáº£i thÃ­ch
- CÃ¡c pháº¡m vi Ä‘Æ°á»£c lá»“ng bÃªn trong Ä‘á»‹nh nghÄ©a cá»§a lá»›p lá» Ä‘i cÃ¡c tÃªn (biáº¿n) Ä‘Æ°á»£c khai bÃ¡o á»Ÿ má»©c lá»›p (biáº¿n gÃ¡n vá»›i lá»›p)
- Biá»…n diá»…n bá»™ sinh (generator) cÃ³ pháº¡m vi riÃªng cá»§a chÃºng
- Báº¯t Ä‘áº§u tá»« Python 3.X, cÃ¡c list comprehensions cÅ©ng cÃ³ pháº¡m riÃªng cá»§a chÃºng

---

### â–¶ Needles in a Haystack *

<!-- Example ID: 52a199b1-989a-4b28-8910-dff562cebba9 --->

TÃ´i chÆ°a bao giá» gáº·p má»™t láº­p trÃ¬nh viÃªn Python kinh nghiá»‡m nÃ o mÃ  chÆ°a gáº·p pháº£i má»™t trong nhá»¯ng tÃ¬nh huá»‘ng Ã©o le dÆ°á»›i Ä‘Ã¢y
1\.

```py
x, y = (0, 1) if True else None, None
```

**Káº¿t qá»§a:**

```py
>>> x, y  # Káº¿t quáº£ mong Ä‘á»£i (0, 1)
((0, 1), None)
```

2\.

```py
t = ('one', 'two')
for i in t:
    print(i)

t = ('one')
for i in t:
    print(i)

t = ()
print(t)
```

**Káº¿t quáº£:**

```py
one
two
o
n
e
tuple()
```

3\.

```
ten_words_list = [
    "some",
    "very",
    "big",
    "list",
    "that"
    "consists",
    "of",
    "exactly",
    "ten",
    "words"
]
```

**Káº¿t quáº£**

```py
>>> len(ten_words_list)
9
```

4\. Not asserting strongly enough

```py
a = "python"
b = "javascript"
```

**Káº¿t quáº£:**

```py
# Gá»i má»™t cÃ¢u lá»‡nh assert vá»›i má»™t thÃ´ng Ä‘iá»‡p chá»‰ rÃµ lÃ½ do bá»‹ lá»—i
>>> assert(a == b, "Both languages are different")
# KhÃ´ng tháº¥y má»™t ngoáº¡i lá»‡ lá»—i AssertionError 
```

5\.

```py
some_list = [1, 2, 3]
some_dict = {
  "key_1": 1,
  "key_2": 2,
  "key_3": 3
}

some_list = some_list.append(4) 
some_dict = some_dict.update({"key_4": 4})
```

**Káº¿t quáº£:**

```py
>>> print(some_list)
None
>>> print(some_dict)
None
```

6\.

```py
def some_recursive_func(a):
    if a[0] == 0:
        return 
    a[0] -= 1
    some_recursive_func(a)
    return a

def similar_recursive_func(a):
        if a == 0:
                return a
        a -= 1
        similar_recursive_func(a)
        return a
```

**Káº¿t quáº£:**

```py
>>> some_recursive_func([5, 0])
[0, 0]
>>> similar_recursive_func(5)
4
```

#### ğŸ’¡ Giáº£i thÃ­ch:

* TrÆ°á»ng há»£p thá»© nháº¥t cÃ¡ch viáº¿t Ä‘á»ƒ cÃ³ káº¿t quáº£ nhÆ° mong Ä‘á»£i lÃ  `x, y = (0, 1) if True else (None, None)`.

* Trong trÆ°á»ng há»£p thá»© hai cÃ¡ch viáº¿t Ä‘Ãºng pháº£i lÃ  `t = ('one',)` hoáº·c `t = 'one',` (cÃ³ thÃªm dáº¥u pháº©y phÃ­a sau) náº¿u khÃ´ng trÃ¬nh thÃ´ng dá»‹ch sáº½ xem `t` nhÆ° lÃ  má»™t `str` vÃ  láº·p qua tá»«ng kÃ­ tá»± cá»§a string nÃ y.

* `()` lÃ  má»™t cáº·p kÃ­ hiá»‡u Ä‘áº·c biá»‡t Ä‘á»‹nh nghÄ©a má»™t `tuple` rá»—ng. 

* Trong vÃ­ dá»¥ thá»© ba, báº¡n cÃ³ thá»ƒ Ä‘á»ƒ Ã½ tháº¥y thiáº¿u má»™t dáº¥u pháº©y Ä‘áº±ng sau pháº§n tá»­ thá»© 5 (`"that"`) cá»§a danh sÃ¡ch. Do Ä‘Ã³, Python ngáº§m ná»‘i hai string liá»n ká»,
  ```py
  >>> ten_words_list
  ['some', 'very', 'big', 'list', 'thatconsists', 'of', 'exactly', 'ten', 'words']
  ```

* KhÃ´ng cÃ³ ngoáº¡i lá»‡ `AssertionError` trong vÃ­ dá»¥ thá»© tÆ° bá»Ÿi vÃ¬ thay vÃ¬ kiá»ƒm tra tÃ­nh Ä‘Ãºng sai cá»§a biá»ƒu diá»…n `a == b`, chÃºng ta kiá»ƒm tra má»™t tuple. VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y lÃ m rÃµ hÆ¡n Ä‘iá»u nÃ y,
  ```py
  >>> a = "python"
  >>> b = "javascript"
  >>> assert a == b
  Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
  AssertionError
  
  >>> assert (a == b, "Values are not equal")
  <stdin>:1: SyntaxWarning: assertion is always true, perhaps remove parentheses?
  
  >>> assert a == b, "Values are not equal"
  Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
  AssertionError: Values are not equal
  ```

* Trong vÃ­ dá»¥ thá»© nÄƒm, háº§u háº¿t cÃ¡c phÆ°Æ¡ng thá»©c thay Ä‘á»•i cÃ¡c pháº§n tá»­ cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng chuá»—i (sequence) hay Ã¡nh xáº¡ nhÆ° `list.append`, `dict.update`,`list.sort`, vÃ  vÃ¢n vÃ¢n. thay Ä‘á»•i ngay táº¡i chá»— (in-place) cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y vÃ  tráº£ vá»  `None`. NguyÃªn nhÃ¢n sÃ¢u xa lÃ  nháº±m tÄƒng hiá»‡u nÄƒng thÃ´ng qua viá»‡c trÃ¡nh táº¡o báº£n sao cá»§a Ä‘á»‘i tÆ°á»£ng náº¿u hÃ nh Ä‘á»™ng Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn Ä‘á»‘i tÆ°á»£ng mang tÃ­nh "ngay táº¡i chá»—" (Tham kháº£o thÃªm táº¡i [Ä‘Ã¢y](http://docs.python.org/2/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list)).
* TrÆ°á»ng há»£p cuá»‘i cÃ¹ng dÆ°á»ng nhÆ° khÃ¡ rÃµ ráº±ng, Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ (nhÆ° `list` ) cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i trong hÃ m, vÃ  viá»‡c gÃ¡n biáº¿n nÃ y láº¡i cho má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ ()`a -= 1` khÃ´ng lÃ m thay Ä‘á»•i giÃ¡ trá»‹.
* LÆ°u Ã½ Ä‘áº¿n nhá»¯ng Ä‘iá»u ká»ƒ trÃªn cÃ³ thá»ƒ giÃºp báº¡n tiáº¿t kiá»‡m Ä‘Æ°á»£c nhiá»u thá»i gian cho viá»‡c tÃ¬m sá»­a lá»—i trong cÃ¡c chÆ°Æ¡ng trÃ¬nh lá»›n.
---


### â–¶ Splitsies *
<!-- Example ID: ec3168ba-a81a-4482-afb0-691f1cc8d65a --->
```py
# thá»±c hiá»‡n cÃ¢u lá»‡nh nÃ y
>>> 'a'.split()
['a']

# cÅ©ng giá»‘ng nhÆ°
>>> 'a'.split(' ')
['a']

# nhÆ°ng khi cháº¡y
>>> len(''.split())
0

# láº¡i cho káº¿t quáº£ khÃ´ng giá»‘ng nhau
>>> len(''.split(' '))
1
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- Ta dÆ°á»ng nhÆ° tháº¥y ngay lÃ  kÃ­ tá»± phÃ¢n cÃ¡ch máº·c Ä‘á»‹nh dÃ¹ng cho split lÃ  má»™t khoáº£ng cÃ¡ch Ä‘Æ¡n (single space) `' '`, nhÆ°ng trong tÃ i liá»‡u [docs] (https://docs.python.org/2.7/library/stdtypes.html#str.split)
    >  Náº¿u kÃ­ tá»± phÃ¢n cÃ¡ch khÃ´ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh hoáº·c lÃ   `None`, má»™t giáº£i thuáº­t chia tÃ¡ch khÃ¡c Ä‘Æ°á»£c Ã¡p dá»¥ng: cÃ¡c khoáº£ng tráº¯ng liÃªn tá»¥c Ä‘Æ°á»£c xem nhÆ° lÃ  má»™t phÃ¢n cÃ¡ch Ä‘Æ¡n, vÃ  káº¿t quáº£ sáº½ chá»©a cÃ¡c strings khÃ¡c rá»—ng táº¡i pháº§n Ä‘áº§u hoáº·c cuá»‘i náº¿u string cÃ³ cÃ¡c khoáº£ng tráº¯ng á»Ÿ pháº§n Ä‘áº§u vÃ  Ä‘uÃ´i. Do váº­y, phÃ¢n tÃ¡ch má»™t string rá»—ng hoáº·c má»™t string chá»©a chá»‰ khoáº£ng tráº¯ng vá»›i má»™t phÃ¢n tÃ¡ch None sáº½ tráº£ vá» `[]`.
    > Náº¿u cÃ³ kÃ­ tá»± phÃ¢n cÃ¡ch, cÃ¡c dáº¥u phÃ¢n cÃ¡ch liÃªn tá»¥c khÃ´ng Ä‘Æ°á»£c nhÃ³m láº¡i cÃ¹ng nhau vÃ  Ä‘Æ°á»£c coi lÃ  Ä‘á»ƒ phÃ¢n Ä‘á»‹nh cÃ¡c strings rá»—ng (vÃ­ dá»¥, `'1,,2'.split(',')` tráº£ vá» `['1', '', '2']`). PhÃ¢n tÃ¡ch má»™t string rá»—ng vá»›i má»™t kÃ­ tá»± phÃ¢n tÃ¡ch chá»‰ Ä‘á»‹nh tráº£ vá»  `['']`.
- VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y chá»‰ ra cÃ¡ch cÃ¡c khoáº£ng tráº¯ng Ä‘Æ°á»£c xá»­ lÃ½,
    ```py
    >>> ' a '.split(' ')
    ['', 'a', '']
    >>> ' a '.split()
    ['a']
    >>> ''.split(' ')
    ['']
    ```

---

### â–¶ Wild imports *
<!-- Example ID: 83deb561-bd55-4461-bb5e-77dd7f411e1c --->
<!-- read-only -->

```py
# File: module.py

def some_weird_name_func_():
    print("works!")

def _another_weird_name_func():
    print("works!")

```

**Káº¿t quáº£**

```py
>>> from module import *
>>> some_weird_name_func_()
"works!"
>>> _another_weird_name_func()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '_another_weird_name_func' is not defined
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- ChÃºng ta Ä‘Æ°á»£c khuyÃªn lÃ  trÃ¡nh sá»­ dá»¥ng cÃ¡c wildcard imports. VÃ¬ vá»›i chÃºng, cÃ¡c tÃªn (vÃ­ dá»¥ hÃ m) vá»›i dáº¥u gáº¡ch chÃ¢n phÃ­a trÆ°á»›c sáº½ khÃ´ng Ä‘Æ°á»£c import. Äiá»u nÃ y gÃ¢y ra lá»—i trong lÃºc code cháº¡y
- Khi chÃºng ta dÃ¹ng `from ... import a, b, c`, lá»—i `NameError` sáº½ khÃ´n xáº£y ra ná»¯a.
    ```py
    >>> from module import some_weird_name_func_, _another_weird_name_func
    >>> _another_weird_name_func()
    works!
    ```
- Náº¿u báº¡n thá»±c sá»± muá»‘n sá»­ dá»¥ng wildcard imports, báº¡n se pháº£i Ä‘á»‹nh nghÄ©a biáº¿n `__all__` trong module cá»§a báº¡n, biáº¿n nÃ y sáº½ chÆ°a má»™t danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ´ng cá»™ng Ä‘Æ°á»£c import khi sá»­ dá»¥ng wildcard imports.
    ```py
    __all__ = ['_another_weird_name_func']

    def some_weird_name_func_():
        print("works!")

    def _another_weird_name_func():
        print("works!")
    ```
    **Káº¿t quáº£**

    ```py
    >>> _another_weird_name_func()
    "works!"
    >>> some_weird_name_func_()
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    NameError: name 'some_weird_name_func_' is not defined (hÃ m "some_weird_name_func_" khÃ´ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a)
    ```

---

### â–¶ All sorted? *

<!-- Example ID: e5ff1eaf-8823-4738-b4ce-b73f7c9d5511 -->

```py
>>> x = 7, 8, 9
>>> sorted(x) == x
False
>>> sorted(x) == sorted(x)
True

>>> y = reversed(x)
>>> sorted(y) == sorted(y)
False
```

#### ğŸ’¡ Giáº£i thÃ­ch:

- PhÆ°Æ¡ng thá»©c `sorted` luÃ´n luÃ´n tráº£ vá» má»™t list, vÃ  trong Python so sÃ¡nh giá»¯a lists vÃ  tuples luÃ´n luÃ´n cho ra káº¿t quáº£ `False`.
- ```py
  >>> [] == tuple()
  False
  >>> x = 7, 8, 9
  >>> type(x), type(sorted(x))
  (tuple, list)
  ```

- KhÃ¡c vá»›i `sorted`, phÆ°Æ¡ng thá»©c `reversed` tráº£ vá» má»™t iterator. Táº¡i sao? Bá»Ÿi vÃ¬ viá»‡c sáº¯p xáº¿p yÃªu cáº§u iterator cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i ngay táº¡i chá»— (in-place) hoáº·c sá»­ dá»¥ng má»™t bá»™ chá»©a bá»• sung (má»™t list), trÃ¡i láº¡i viá»‡c Ä‘áº£o chiá»u (reversing) cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng Ä‘Æ¡n giáº£n lÃ  láº·p tá»« chá»‰ sá»‘ cuá»‘i vá» pháº§n tá»­ Ä‘áº§u
- Do Ä‘Ã³ khi so sÃ¡nh `sorted(y) == sorted(y)`, lá»i gá»i Ä‘áº§u tiÃªn `sorted()` sáº½ tiÃªu thá»¥ iterator `y`, vÃ  lá»i gá»i tiáº¿p theo sáº½ tráº£ vá» má»™t list rá»—ng. 

  ```py
  >>> x = 7, 8, 9
  >>> y = reversed(x)
  >>> sorted(y), sorted(y)
  ([7, 8, 9], [])
  ```

---

### â–¶ Midnight time doesn't exist?
<!-- Example ID: 1bce8294-5619-4d70-8ce3-fe0bade690d1 --->
```py
from datetime import datetime

midnight = datetime(2018, 1, 1, 0, 0)
midnight_time = midnight.time()

noon = datetime(2018, 1, 1, 12, 0)
noon_time = noon.time()

if midnight_time:
    print("Time at midnight is", midnight_time)

if noon_time:
    print("Time at noon is", noon_time)
```

**Káº¿t quáº£ (< 3.5):**

```py
('Time at noon is', datetime.time(12, 0))
```
Thá»i gian ná»­a Ä‘Ãªm khÃ´ng Ä‘Æ°á»£c hiá»ƒn thá»‹
#### ğŸ’¡ Giáº£i thÃªm:

TrÆ°á»›c Python 3.5, giÃ¡ trá»‹ luáº­n lÃ½ cho Ä‘á»‘i tÆ°á»£ng `datetime.time` Ä‘Æ°á»£c xem nhÆ° lÃ  `False` náº¿u Ä‘á»‘i tÆ°á»£ng nÃ y biá»ƒu diá»…n ná»­a Ä‘Ãªm trong UTC. Code dá»… sai khi sá»­ dá»¥ng cÃº phÃ¡p `if obj:` Ä‘á»ƒ kiá»ƒm tra `obj` lÃ  null hay nhá»¯ng giÃ¡ trá»‹ tÆ°Æ¡ng tÆ°Æ¡ng vá»›i "rá»—ng".

---
---



## Section: The Hidden treasures!

Pháº§n nÃ y bao gá»“m nhá»¯ng Ä‘iá»u Ã­t Ä‘Æ°á»£c biáº¿t tá»›i vá» Python, nhá»¯ng Ä‘iá»u háº¥p dáº«n nÃ y háº§u háº¿t nhá»¯ng ngÆ°á»i má»›i báº¯t Ä‘áº§u nhÆ° tÃ´i Ä‘á»u khÃ´ng biáº¿t

### â–¶ Okay Python, Can you make me fly?
<!-- Example ID: a92f3645-1899-4d50-9721-0031be4aec3f --->
HÃ£y báº¯t Ä‘áº§u nÃ o

```py
import antigravity
```

**Káº¿t quáº£:**
Sshh... Má»™t bÃ­ máº­t lá»›n.

#### ğŸ’¡ Giáº£i thÃ­ch:
+ `antigravity` lÃ  má»™t trong vÃ i quáº£ trá»©ng phá»¥c sinh Ä‘Æ°á»£c táº¡o ra bá»Ÿi cÃ¡c láº­p trÃ¬nh viÃªn Python 
+ `import antigravity` má»Ÿ trang web [truyá»‡n hÃ i XKCD ](http://xkcd.com/353/) trong má»™t trÃ¬nh duyá»‡t.
+ CÃ²n nhiá»u hÆ¡n tháº¿ ná»¯a. CÃ³ cÃ¡c **quáº£ trá»©ng phá»¥c sinh khÃ¡c bÃªn trong quáº£ trá»©ng phá»¥c sinh**. Náº¿u báº¡n xem Ä‘oáº¡n [mÃ£] (https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17), cÃ³ má»™t hÃ m Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a Ä‘á»ƒ triá»ƒn khai [Giáº£i thuáº­t geohashing cá»§a XKCD] 

---

### â–¶ `goto`, but why?
<!-- Example ID: 2aff961e-7fa5-4986-a18a-9e5894bd89fe --->

```py
from goto import goto, label
for i in range(9):
    for j in range(9):
        for k in range(9):
            print("I am trapped, please rescue!")
            if k == 2:
                goto .breakout # breaking out from a deeply nested loop
label .breakout
print("Freedom!")
```

**Káº¿t quáº£ (Python 2.3):**
```py
I am trapped, please rescue!
I am trapped, please rescue!
Freedom!
```

#### ğŸ’¡ Giáº£i thÃ­ch:
- Má»™t phiÃªn báº£n Python cá»§a `goto` Ä‘Æ°á»£c  [cÃ´ng bá»‘](https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html) trong ngÃ y cÃ¡ thÃ¡ng tÆ° nÄƒm 2004 nhÆ° lÃ  má»™t lá»i Ä‘Ã¹a.
- CÃ¡c phiÃªn báº£n Python hiá»‡n hÃ nh khÃ´ng cÃ³ module nÃ y.
- Máº·c dÃ¹ triá»ƒn khai `goto` cháº¡y Ä‘Æ°á»£c, nhÆ°ng Ä‘á»«ng sá»­ dá»¥ng nÃ³. [LÃ½ do](https://docs.python.org/3/faq/design.html#why-is-there-no-goto) táº¡i sao Python khÃ´ng cÃ³ `goto`.

---

### â–¶ Brace yourself!
<!-- Example ID: 5c0c75f2-ddd9-4da3-ba49-c4be7ec39acf --->
Náº¿u báº¡n khÃ´ng thÃ­ch sá»­ dá»¥ng khoáº£ng tráº¯ng Ä‘á»ƒ biá»ƒu thá»‹ cÃ¡c pháº¡m vi, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phonng cÃ¡ch nhÆ° trong ngÃ´n ngá»¯ C {} báº±ng cÃ¡ch import
```py
from __future__ import braces
```

**Káº¿t quáº£:**
```py
  File "some_file.py", line 1
    from __future__ import braces
SyntaxError: not a chance
```

CÃ¡c dáº¥u ngoáº·c nhá»n? KhÃ´ng Ä‘Æ°á»£c Ä‘Ã¢u! Náº¿u báº¡n nghÄ© ráº±ng Ä‘iá»u gÃ¢y tháº¥t vá»ng, sá»­ dá»¥ng Java. CÃ²n má»™t Ä‘iá»u ngáº¡c nhiÃªn ná»¯a Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y ngoáº¡i lá»‡ `SyntaxError` Ä‘Æ°á»£c khá»Ÿi lÃªn á»Ÿ Ä‘Ã¢u trong module `__future__` hay khÃ´ng (https://github.com/python/cpython/blob/master/Lib/__future__.py)?

#### ğŸ’¡ Giáº£i thÃ­ch:
+ Module `__future__` thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ cung cáº¥p cÃ¡c tÃ­nh nÄƒng Ä‘áº¿n tá»« cÃ¡c phiÃªn báº£n má»›i cá»§a Python. Tuy nhiÃªn "tÆ°Æ¡ng lai" ("feature") trong hoÃ n cáº£nh nÃ y cÃ³ váº» hÆ¡i má»‰a mai.
+ CÃ³ má»™t quáº£ trá»©ng phá»¥c sinh liÃªn quan Ä‘áº¿n tÃ¢m tráº¡ng cá»§a cá»™ng Ä‘á»“ng Python vá» váº¥n Ä‘á» nÃ y. 
+ Äoáº¡n mÃ£ Ä‘Æ°á»£c tÃ¬m tháº¥y [á»Ÿ Ä‘Ã¢y](https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49) trong file `future.c`.
+ Khi trÃ¬nh biÃªn dá»‹ch Cpython gáº·p má»™t [cÃ¢u lá»‡nh future](https://docs.python.org/3.3/reference/simple_stmts.html#future-statements),  NÃ³ cháº¡y Ä‘oáº¡n mÃ£ tÆ°Æ¡ng á»©ng trong  `future.c` trÆ°á»›c khi thá»±c hiá»‡n cÃ¢u lá»‡nh import thÃ´ng thÆ°á»ng.

---

### â–¶ Let's meet Friendly Language Uncle For Life
<!-- Example ID: 6427fae6-e959-462d-85da-ce4c94ce41be --->
**Output (Python 3.x)**
```py
>>> from __future__ import barry_as_FLUFL
>>> "Ruby" != "Python" # cháº£ cÃ³ gÃ¬ pháº£i nghi ngá» vá» cÃ¢u lá»‡nh so sÃ¡nh nÃ y cáº£
  File "some_file.py", line 1
    "Ruby" != "Python"
              ^
SyntaxError: invalid syntax

>>> "Ruby" <> "Python"
True
```

Rá»“i! cÃ³ thá»© Ä‘á»ƒ xem.


#### ğŸ’¡ Giáº£i thÃ­ch:
- Äiá»u ta muá»‘n tÃ¬m hiá»ƒu liÃªn quan tá»›i [PEP-401](https://www.python.org/dev/peps/pep-0401/), PEP nÃ y Ä‘Æ°á»£c xuáº¥t báº£n vÃ o ngÃ y má»™t thÃ¡ng tÆ° nÄƒm 2009 (lÃ  gÃ¬ thÃ¬ báº¡n biáº¿t rá»“i Ä‘Ã³).
- Äoáº¡n dÆ°á»›i Ä‘Ã¢y Ä‘Æ°á»£c trÃ­ch ra tá»« PEP-401
  
  > Nháº­n ra ráº±ng kÃ­ hiá»‡u toÃ¡n tá»­ so sÃ¡nh khÃ´ng báº±ng != trong Python 3.0 tháº¥y gá»›m, gÃµ tháº­t khÃ³, FLUFL khÃ´i phá»¥c láº¡i kÃ­ hiá»‡u hÃ¬nh kim cÆ°Æ¡ng <>.
- Báº¡n nhiá»u thá»© Ä‘Ã¡ng xem trong PEP nÃ y; báº¡n cÃ³ thá»ƒ Ä‘á»c chÃºng [á»Ÿ Ä‘Ã¢y]
(https://www.python.org/dev/peps/pep-0401/).
- ToÃ¡n tá»­ hÃ¬nh kim cÆ°Æ¡ng nÃ y hoáº¡t Ä‘á»™ng tá»‘t trong mÃ´i trÆ°á»ng tÆ°Æ¡ng tÃ¡c, nhÆ°ng láº¡i gÃ¢y ra ngoáº¡i lá»‡ `SyntaxError` khi cháº¡y qua file python (hÃ£y xem [váº¥n Ä‘á»](https://github.com/satwikkansal/wtfpython/issues/94)). Tuy nhiÃªn báº¡n cÃ³ thá»ƒ gÃ³i cÃ¢u lá»‡nh nÃ y vÃ o trong hÃ m `eval` hoáº·c `compile` Ä‘á»ƒ cháº¡y Ä‘Æ°á»£c.
    ```py
    from __future__ import barry_as_FLUFL
    print(eval('"Ruby" <> "Python"'))
    ```

---

### â–¶ Even Python understands that love is complicated
<!-- Example ID: b93cad9e-d341-45d1-999c-fcdce65bed25 --->
```py
import this
```

NÃ o, **this** lÃ  gÃ¬ tháº¿? `this` lÃ  tÃ¬nh yÃªu :heart:

**Káº¿t quáº£:**
```
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
```

`this` lÃ  Thiá»n cá»§a Python!

```py
>>> love = this
>>> this is love
True
>>> love is True
False
>>> love is False
False
>>> love is not True or False
True
>>> love is not True or False; love is love  # TÃ¬nh yÃªu tháº­t phá»©c táº¡p
True
```

#### ğŸ’¡ Giáº£i thÃ­ch:
* Module `this` trong Python lÃ  má»™t quáº£ trá»©ng phá»¥c sinh cho Thiá»n cá»§a Python ([PEP 20](https://www.python.org/dev/peps/pep-0020)).
* VÃ  náº¿u báº¡n tháº¥y nÃ³ há»©ng thÃº, hÃ£y xem mÃ£ triá»ƒn khai cá»§a [this.py](https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py). Háº¥p dáº«n thay, **mÃ£ cá»§a Thiá»n láº¡i vi pháº¡m chÃ­nh quy táº¯c thiá»n**
* NÃ³i vá» cÃ¢u `love is not True or False; love is love`, má»‰a mai thay cÃ¢u nay tá»± tháº¥y nÃ³ co nghÄ©a (náº¿u khÃ´ng, hay xnhinf cÃ¡ vÃ­ dá»¥ liÃªn quan tá»›i `is` vÃ  `is not`)
---

### â–¶ Yes, it exists!
<!-- Example ID: 4286db3d-1ea7-47c9-8fb6-a9a04cac6e49 --->
** Khá»‘i `else` cá»§a cÃ¡c vÃ²ng láº·p .** DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh:

```py
  def does_exists_num(l, to_find):
      for num in l:
          if num == to_find:
              print("Exists!")
              break
      else:
          print("Does not exist")
```

**Káº¿t quáº£:**
```py
>>> some_list = [1, 2, 3, 4, 5]
>>> does_exists_num(some_list, 4)
Exists! (Tá»“n táº¡i)
>>> does_exists_num(some_list, -1)
Does not exist (KhÃ´ng tá»“n táº¡i)
```

**Khá»‘i `else` trong xá»­ lÃ½ ngoáº¡i lá»‡.** Má»™t vÃ­ dá»¥,

```py
try:
    pass
except:
    print("Exception occurred!!!")
else:
    print("Try block executed successfully...")
```

**Káº¿t quáº£:**
```py
Try block executed successfully...
```

#### ğŸ’¡ Giáº£i thÃ­ch:
- Khá»‘i `else` sau má»™t vÃ²ng láº·p Ä‘Æ°á»£c thá»±c hiá»‡n chá»‰ khi trong quÃ¡ trÃ¬nh láº·p khÃ´ng cÃ³ má»™t `break` nÃ o. Báº¡n cÃ³ thá»ƒ nghÄ© nÃ³ nhÆ° lÃ  má»™t khá»‘i "khÃ´ng ngáº¯t" ("nobreak")
- Khá»‘i `else` sau má»™t khá»‘i try cÃ²n Ä‘Æ°á»£c gá»i la "khá»‘i hoÃ n táº¥t" Ä‘Ã³ khi cÃ¡c cÃ¢u lá»‡nh trong khá»‘i nÃ y sáº½ Ä‘Æ°á»£c thá»±c thi khi khá»‘i try hoÃ n thÃ nh trá»n váº¹n cÃ´ng viá»‡c cá»§a mÃ¬nh.

---
### â–¶ Ellipsis *
<!-- Example ID: 969b7100-ab3d-4a7d-ad7d-a6be16181b2b --->
```py
def some_func():
    Ellipsis
```

**Káº¿t quáº£**
```py
>>> some_func()
# No output, No Error

>>> SomeRandomString
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'SomeRandomString' is not defined

>>> Ellipsis
Ellipsis
```

#### ğŸ’¡ Giáº£i thÃ­ch
- Trong Python, `Ellipsis` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ sáºµn, toÃ n cá»¥c tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i  `...`.
    ```py
    >>> ...
    Ellipsis
    ```
- Eliipsis cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c má»¥c Ä‘Ã­ch sau
    + LÃ  má»™t Ä‘á»‘i tÆ°á»£ng "xÃ­ chá»—" cho mÃ£ chÆ°a Ä‘Æ°á»£c viáº¿t (nhÆ° cÃ¢u lá»‡nh `pass`)
    + Trong cÃº phÃ¡p lÃ¡t cáº¯t (slicing syntax), nÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ biá»ƒu diá»…n cÃ¡c lÃ¡t cáº¯t Ä‘áº§y Ä‘á»§ theo hÆ°á»›ng cÃ²n láº¡i
    + In slicing syntax to represent the full slices in remaining direction
    ```py
    >>> import numpy as np
    >>> three_dimensional_array = np.arange(8).reshape(2, 2, 2)
    array([
        [
            [0, 1],
            [2, 3]
        ],

        [
            [4, 5],
            [6, 7]
        ]
    ])
    ```
    `three_dimensional_array` lÃ  má»™t máº£ng cá»§a máº£ng cá»§a cÃ¡c máº£ng. NÃ o, chÃºng ta muá»‘n in ra pháº§n tá»­ thá»© hai (chá»‰ sá»‘ `1`) cá»§a táº¥t cáº£ cÃ¡c máº£ng phÃ­a trong cÃ¹ng, chugns ta cÃ³ thá»ƒ sá»­ dá»¥ng Ellipsis Ä‘á»ƒ "chÆ¡i chiÃªu qua máº·t" (bypass) táº¥t cáº£ cÃ¡c chiá»u (dimensions) phÃ­a trÆ°á»›c Ä‘Ã³.
    ```py
    >>> three_dimensional_array[:,:,1]
    array([[1, 3],
       [5, 7]])
    >>> three_dimensional_array[..., 1] # using Ellipsis.
    array([[1, 3],
       [5, 7]])
    ```
    ChÃº Ã½ ráº±ng: cÃ¡ch trÃªn cÃ³ thá»ƒ thá»±c trÃªn báº¥t cá»© máº£ng vá»›i sá»‘ lÆ°á»£ng chiá»u nÃ o. Báº¡n cÃ³ thá»ƒ lá»±a trÃªn lÃ¡t cáº¯t (slice) trÆ°á»›c vÃ  chiá»u cuá»‘i cÃ¹ng vÃ  lá» Ä‘i cÃ¡c chiá»u náº±m á»Ÿ giá»¯a (`n_dimensional_array[firs_dim_slice, ..., last_dim_slice]`)
    + Trong [Gá»£i Ã½ kiá»ƒu](https://docs.python.org/3/library/typing.html), Ellipsis Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chá»‰ ra má»™t pháº§n cá»§a kiá»ƒu (nhÆ° lÃ  `(Callable[..., int]` hay `Tuple[str, ...]`))
    + Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Ellipsis nhÆ° lÃ  má»™t tham sá»‘ hÃ m máº·c Ä‘á»‹nh (trong nhá»¯ng trÆ°á»ng há»£p báº¡n muá»‘n phÃ¢n biá»‡t giá»¯a hai tÃ­nh huá»‘ng "khÃ´ng cÃ³ tham sá»‘ Ä‘Æ°á»£c truyá»n vÃ o") vÃ  "giÃ¡ trá»‹ None Ä‘Æ°á»£c truyá»n vÃ o"

---

### â–¶ Inpinity
<!-- Example ID: ff473ea8-a3b1-4876-a6f0-4378aff790c1 --->
Viá»‡c viáº¿t sai chÃ­nh táº£ lÃ  chá»§ Ã½.
**Káº¿t quáº£ (Python 3.x):**
```py
>>> infinity = float('infinity')
>>> hash(infinity)
314159
>>> hash(float('-inf'))
-314159
```

#### ğŸ’¡ Giáº£i thÃ­ch:
- MÃ£ bÄƒm cá»§a vÃ´ cá»±c lÃ  10âµ x Ï€.
- ThÃº vá»‹ lÃ  á»Ÿ chá»— trong Python 3 mÃ£ bÄƒm cá»§a `float('-inf')` lÃ  "-10âµ x Ï€", trÃ¡i láº¡i trong Python lÃ  "-10âµ x e"
---

### â–¶ Let's mangle
<!-- Example ID: 37146d2d-9e67-43a9-8729-3c17934b910c --->
1\.
```py
class Yo(object):
    def __init__(self):
        self.__honey = True
        self.bro = True
```

**Káº¿t quáº£:**
```py
>>> Yo().bro
True
>>> Yo().__honey
AttributeError: 'Yo' object has no attribute '__honey' (Äá»‘i tÆ°á»£ng 'Yo' khÃ´ng cÃ³ thuá»™c tÃ­nh '__honey')
>>> Yo()._Yo__honey
True
```

2\.
```py
class Yo(object):
    def __init__(self):
        # Let's try something symmetrical this time
        self.__honey__ = True
        self.bro = True
```

**Káº¿t quáº£:**
```py
>>> Yo().bro
True

>>> Yo()._Yo__honey__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Yo' object has no attribute '_Yo__honey__' (Äá»‘i tÆ°á»£ng 'Yo' khÃ´ng cÃ³ thuá»™c tÃ­nh '_Yo__honey__')
```

Táº¡i sao `Yo()._Yo__honey` láº¡i gÃ¢y ra lá»—i?

3\.

```py
_A__variable = "Some value"

class A(object):
    def some_func(self):
        return __variable # (biáº¿n nÃ y chÆ°a Ä‘Æ°á»£c khá»Ÿi táº¡o)
```

**Káº¿t quáº£:**
```py
>>> A().__variable
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'A' object has no attribute '__variable' (Äá»‘i tÆ°á»£ng 'A' khÃ´ng cÃ³ thuá»™c tÃ­nh '__variable')

>>> A().some_func()
'Some value'
```


#### ğŸ’¡ Giáº£i thÃ­ch:

* [Name Mangling](https://en.wikipedia.org/wiki/Name_mangling) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ trÃ¡nh viá»‡c Ä‘á»¥ng Ä‘á»™ vá» tÃªn (names) giá»¯a cÃ¡c khÃ´ng gian tÃªn (namespaces).
* Trong Python, trÃ¬nh thÃ´ng dá»‹ch thay Ä‘á»•i (mangles) tÃªn cá»§a cÃ¡c thÃ nh viÃªn cá»§a má»™t lá»›p mÃ  báº¯t Ä‘áº§u vá»›i `__` (hai dáº¥u gáº¡ch chÃ¢n liá»n nhau hay cÃ²n gá»i lÃ  "dunder") vÃ  cÃ¡c tÃªn khÃ´ng thÃºc vá»›i nhiá»u hÆ¡n má»™t dáº¥u gáº¡ch chÃ¢n báº±ng viá»‡c thÃªm vÃ o `_TÃªnCá»§aLá»›p` vÃ o trÆ°á»›c Ä‘Ã³
* VÃ¬ váº­y, Ä‘á»ƒ truy cáº­p vÃ o thuá»™c tÃ­nh `__honey` trong Ä‘oáº¡n mÃ£ Ä‘áº§u tiÃªn, báº¡n pháº£i ná»‘i `_Yo` vÃ o phÃ­a trÆ°á»›c, Ä‘á»ƒ ngÄƒn viá»‡c xung Ä‘á»™t vá»›i thuá»™c tÃ­nh cÃ³ cÃ¹ng tÃªn trong lá»›p khÃ¡c.
* NhÆ°ng táº¡i sao trong Ä‘oáº¡n mÃ£ thá»© hai máº·c dÃ¹ Ä‘Ã£ dung tÃªn Ä‘Ãºng nhÆ°ng ta váº«n khÃ´ng truy cáº­p Ä‘Æ°á»£c vÃ o thuá»™c tÃ­nh? Bá»Ÿi vÃ¬ cÃ¡ch thá»©c mangling nÃ y khÃ´ng Ã¡p dá»¥ng Ä‘á»‘i vá»›i cÃ¡c tÃªn biáº¿n káº¿t thÃºc vá»›i hai dáº¥u gáº¡ch chÃ¢n.
* Äoáº¡n mÃ£ thá»© ba cÅ©ng lÃ  káº¿t quáº£ cá»§a viá»‡c mangling. TÃªn `__variable` trong cÃ¢u lá»‡nh `return __variable` Ä‘Æ°á»£c chuyá»ƒn thÃ nh `_A__variable`, vÃ  láº¡i vÃ´ tÃ¬nh trÃ¹ng vá»›i tÃªn biáº¿n Ä‘Æ°á»£c khai bÃ¡o phÃ­a bÃªn ngoÃ i
* CÃ²n ná»¯a, náº¿u tÃªn bá»‹ mangle nhiá»u hÆ¡n 255 kÃ­ tá»±, viá»‡c cáº¯t gá»n tÃªn sáº½ diÃªn ra.

---
---

## Section: Appearances are deceptive!

### â–¶ Skipping lines?
<!-- Example ID: d50bbde1-fb9d-4735-9633-3444b9d2f417 --->
**Káº¿t quáº£:**
```py
>>> value = 11
>>> valuĞµ = 32
>>> value
11
```

CÃ¡i quÃ¡i gÃ¬ tháº¿?

**ChÃº Ã½:** Äá»ƒ lÃ m ra káº¿t quáº£ nhÆ° trÃªn báº¡n chá»‰ cáº§n sao cháº¿p cÃ¡c cÃ¢u lá»‡nh vÃ  dÃ¡n nÃ³ vÃ o file hay shell.

#### ğŸ’¡ Giáº£i thÃ­ch

Má»™t vÃ i kÃ­ tá»± khÃ´ng pháº£i lÃ  kÃ­ tá»± phÆ°Æ¡ng tÃ¢y trÃ´ng giá»‘ng nhÆ° cÃ¡c kÃ­ tá»± trong báº£ng chá»¯ cÃ¡i tiáº¿ng Anh nhÆ°ng láº¡i Ä‘Æ°á»£c diá»…n giáº£i khÃ¡c bá»Ÿi trÃ¬nh thÃ´ng idhcj
```py
>>> ord('Ğµ') # KÃ­ tá»± cyrillic 'e' (Ye)
1077
>>> ord('e') # KÃ­ tá»± latin 'e', Ä‘Æ°á»£c sá»­ dá»¥ng trong tiáº¿ng Anh vÃ  trÃªn cÃ¡c bÃ n phÃ­m chuáº©n
101
>>> 'Ğµ' == 'e'
False

>>> value = 42 # latin e
>>> valuĞµ = 23 # cyrillic 'e', Python 2.x interpreter would raise a `SyntaxError` here
>>> value
42
```


HÃ m tÃ­ch há»£p sáºµn `ord()` tráº£ vá» mÃ£ Unicode cá»§a má»™t kÃ­ tá»± [code point](https://en.wikipedia.org/wiki/Code_point), vÃ  báº¡n cÃ³ thá»ƒ tháº¥y cÃ¡c mÃ£ khÃ¡c nhau cho kÃ­ tá»±  Cyrillic 'e' vÃ  kÃ­ tá»± Latin 'e' .

---

### â–¶ Teleportation

<!-- Example ID: edafe923-0c20-4315-b6e1-0c31abfc38f5 --->

```py
# CÃ i Ä‘áº·t thÆ° viÃªn numpy sá»­ dá»¥ng `pip install numpy` trÆ°á»›c
import numpy as np

def energy_send(x):
    # Khá»Ÿi táº¡o má»™t máº£ng numpy
    np.array([float(x)])

def energy_receive():
    # Tráº£ vá» má»™t mang numpy rá»—ng
    return np.empty((), dtype=np.float).tolist()
```

**Káº¿t quáº£:**
```py
>>> energy_send(123.456)
>>> energy_receive()
123.456
```

CÃ³ gÃ¬ má»›i á»Ÿ Ä‘Ã¢y nÃ o ?

#### ğŸ’¡ Giáº£i thÃ­ch:

* ChÃº Ã½ ráº±ng máº£ng numpy Ä‘Æ°á»£c táº¡o trong hÃ m `energy_send` khÃ´ng cÃ³ Ä‘Æ°á»£c tráº£ vÃ¬, vÃ¬ váº­y khÃ´ng gian bá»™ nhá»› Ä‘Æ°á»£c giáº£i phÃ³ng.
* `numpy.empty()` tráº£ vá» pháº§n bá»™ nhÆ¡ tá»± do tiáº¿p theo mÃ  khÃ´ng khá»Ÿi táº¡o láº¡i nÃ³. PhÃ¢n bá»™ nhá»› nay láº¡i vÃ´ tÃ¬nh trung vá»›i pháº§n bá»™ nhá»› trÆ°á»›c Ä‘Ã³ Ä‘Æ°á»£c giáº£i phÃ³ng (thÆ°á»ng xáº£y ra, nhÆ°ng khÃ´ng pháº£i lÃ  luÃ´n luÃ´n)

---


### â–¶ Well, something is fishy...
<!-- Example ID: cb6a37c5-74f7-44ca-b58c-3b902419b362 --->
```py
def square(x):
    """
    A simple function to calculate the square of a number by addition.
    """
    sum_so_far = 0
    for counter in range(x):
        sum_so_far = sum_so_far + x
  return sum_so_far
```

**Káº¿t quáº£ (Python 2.x):**

```py
>>> square(10)
10
```

Sao káº¿t quáº£ láº¡i ra 100?

**ChÃº Ã½:** Náº¿u báº¡n khÃ´ng thá»±c hiá»‡n láº¡i Ä‘Æ°á»£c vÃ­ dá»¥ trÃªn, cháº¡y thá»­ file [mixed_tabs_and_spaces.py](/mixed_tabs_and_spaces.py) thÃ´ng qua shell.
#### ğŸ’¡ Explanation

* **Äá»«ng trá»™n láº«n tabs vÃ  cÃ¡c khoáº£ng tráº¯ng (spaces)!** KÃ­ tá»± náº±m phÃ­a trÆ°á»›c lá»‡nh return lÃ  má»™t "tab", vÃ  Ä‘oáº¡n mÃ£ á»Ÿ Ä‘Ã¢u Ä‘Ã³ trong code Ä‘Æ°á»£c thá»¥t lÃ¹i theo bá»™i sá»‘ cá»§a "4 khoáº£ng tráº¯ng"
* This is how Python handles tabs:
* ÄÃ¢y lÃ  cÃ¡ch Python xá»­ lÃ½ tabs:  
  > Äáº§u tiÃªn, tabs Ä‘Æ°á»£c thay tháº¿ (tá»« trÃ¡i sang pháº£i) báº±ng tá»« má»™t tá»›i tÃ¡m khoáº£ng tráº¯ng Ä‘á»ƒ cho tá»•ng sá»‘ lÆ°á»£ng cÃ¡c kÃ­ tá»± (bao gá»“m cáº£ kÃ­ tá»± thay tháº¿) cÃ³ giÃ¡ trá»‹ lÃ  bá»™i sá»‘ cá»§a tÃ¡m <...>
* Do Ä‘Ã³ "tab" náº±m á»Ÿ dÃ²ng cuá»‘i cá»§a hÃ m `square` Ä‘Æ°á»£c thay tháº¿ báº±ng tÃ¡m khoáº£ng tráº¯ng, vÃ  nÃ³ Ä‘i vÃ o náº±m trong vÃ²ng láº·p.
* Python 3 sáº½ vÄƒng ra má»™t lá»—i khi nÃ³ gáº·p pháº£i cÃ¡c lá»—i liÃªn quan tá»›i tabs vÃ  khoáº£ng tráº¯ng.
    **Káº¿t quáº£ (Python 3.x):**
    ```py
    TabError: inconsistent use of tabs and spaces in indentation
    ```

---
---

## Section: Miscellaneous


### â–¶ `+=` cháº¡y nhanh hÆ¡n
<!-- Example ID: bfd19c60-a807-4a26-9598-4912b86ddb36 --->

```py
# Sá»­ dá»¥ng "+" Ä‘á»ƒ cá»™ng 3 strings:
>>> timeit.timeit("s1 = s1 + s2 + s3", setup="s1 = ' ' * 100000; s2 = ' ' * 100000; s3 = ' ' * 100000", number=100)
0.25748300552368164
# Sá»­ dá»¥ng "+=" Ä‘á»ƒ cá»™ng 3 strings:
>>> timeit.timeit("s1 += s2 + s3", setup="s1 = ' ' * 100000; s2 = ' ' * 100000; s3 = ' ' * 100000", number=100)
0.012188911437988281
```

#### ğŸ’¡ Giáº£i thÃ­ch:
+ `+=` nhanh hÆ¡n `+` khi ná»‘i nhiá»u hÆ¡n 2 strings bá»Ÿi vÃ¬ string Ä‘áº§u tiÃªn (vÃ­ dá»¥, `s1` trong `s1 += s2 + s3`) khÃ´ng bá»‹ huá»· Ä‘i khi táº¡o ra chuá»—i káº¿t quáº£ cuá»‘i cÃ¹ng
---

### â–¶ Let's make a giant string!
<!-- Example ID: c7a07424-63fe-4504-9842-8f3d334f28fc --->
```py
def add_string_with_plus(iters):
    s = ""
    for i in range(iters):
        s += "xyz"
    assert len(s) == 3*iters

def add_bytes_with_plus(iters):
    s = b""
    for i in range(iters):
        s += b"xyz"
    assert len(s) == 3*iters

def add_string_with_format(iters):
    fs = "{}"*iters
    s = fs.format(*(["xyz"]*iters))
    assert len(s) == 3*iters

def add_string_with_join(iters):
    l = []
    for i in range(iters):
        l.append("xyz")
    s = "".join(l)
    assert len(s) == 3*iters

def convert_list_to_string(l, iters):
    s = "".join(l)
    assert len(s) == 3*iters
```

**Káº¿t quáº£:**

```py
# Cháº¡y cÃ¡c Ä‘oáº¡n lá»‡nh trong ipython shell sá»­ dung %timeit Ä‘á»ƒ cÃ³ káº¿t quáº£ dá»… Ä‘á»c hÆ¡n
# Báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng module timeit trong python shell bÃ¬nh thÆ°á»ng, nhÆ° vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y
# timeit.timeit('add_string_with_plus(10000)', number=1000, globals=globals())

>>> NUM_ITERS = 1000
>>> %timeit -n1000 add_string_with_plus(NUM_ITERS)
124 Âµs Â± 4.73 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)
>>> %timeit -n1000 add_bytes_with_plus(NUM_ITERS)
211 Âµs Â± 10.5 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_format(NUM_ITERS)
61 Âµs Â± 2.18 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_join(NUM_ITERS)
117 Âµs Â± 3.21 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> l = ["xyz"]*NUM_ITERS
>>> %timeit -n1000 convert_list_to_string(l, NUM_ITERS)
10.1 Âµs Â± 1.06 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
```

BÃ¢y giá» tÄƒng sá»‘ vÃ²ng láº·p lÃªn 10 láº§n
```py
>>> NUM_ITERS = 10000
>>> %timeit -n1000 add_string_with_plus(NUM_ITERS) # Linear increase in execution time
1.26 ms Â± 76.8 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_bytes_with_plus(NUM_ITERS) # Quadratic increase
6.82 ms Â± 134 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_format(NUM_ITERS) # Linear increase
645 Âµs Â± 24.5 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> %timeit -n1000 add_string_with_join(NUM_ITERS) # Linear increase
1.17 ms Â± 7.25 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
>>> l = ["xyz"]*NUM_ITERS
>>> %timeit -n1000 convert_list_to_string(l, NUM_ITERS) # Linear increase
86.3 Âµs Â± 2 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
```

#### ğŸ’¡ Giáº£i thÃ­ch
- Báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm vá» [timeit] (https://docs.python.org/3/library/timeit.html) or [%timeit](https://ipython.org/ipython-doc/dev/interactive/magics.html#magic-timeit). Module nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘o thá»i gian cháº¡y cá»§a cÃ¡c Ä‘oáº¡n code.
- Äá»«ng dÃ¹ng `+` Ä‘á»ƒ sinh ra cÃ¡c strings dÃ i. Trong Python, `str` khÃ´ng thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c giÃ¡ trá»‹, do Ä‘Ã³ cÃ¡c strings phÃ­a bÃªn trÃ¡i vÃ  pháº£i pháº£i Ä‘Æ°á»£c chÃ©p vÃ o string má»›i cho má»—i cáº·p ghÃ©p string. Náº¿u báº¡n ná»‘i strings cÃ³ Ä‘á»™ dÃ i lÃ  10, báº¡n sáº½ chÃ©p + ((10+10)+10) + (((10+10)+10)+10) = 90 kÃ­ tá»± thay vÃ¬ chá»‰ 40 kÃ­ tá»±. Sáº½ tá»‡ hÆ¡n ná»¯a khi sá»‘ lÆ°á»£ng vÃ  kÃ­ch thÆ°á»›c cá»§a string tÄƒng (nhÆ° báº¡n cÃ³ thá»ƒ tháº¥y á»Ÿ hÃ m `add_bytes_with_plus` )
- Do Ä‘Ã³, bÃªn nÃªn dÃ¹ng `.format.` hay `%` (máº·c dÃ¹ cÃ¡c cÃ¡ch sá»­ dá»¥ng nÃ y sáº½ cháº­m hÆ¡n `+` Ä‘á»‘i vá»›i cÃ¡c strings nhá» )
- Hay tá»‘t hÆ¡n ná»¯a, náº¿u báº¡n Ä‘Ã£ cÃ³ sáºµn nhá»¯ng ná»™i dung á»Ÿ dáº¡ng má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p, khi Ä‘Ã³ sá»­ dá»¥ng `''.join(iterable_object)` sáº½ nhanh hÆ¡n. 
- KhÃ´ng giá»‘ng nhÆ° `add_bytes_with_plus` vá»›i cÃ¡c tá»‘i Æ°u Ä‘áº¿n tá»« `+=` nhÆ° Ä‘Ã£ tháº£o luáº­n á»Ÿ vÃ­ dá»¥ trÆ°á»›c Ä‘Ã³, `add_string_with_plus` khÃ´ng cho tháº¥y sá»± tÄƒng cáº¥p báº­c hai vá» thá»i gian thÆ°ucj thi. Sá»­ dá»¥ng `s = s + "x" + "y" + "z"` thay vÃ¬ `s += "xyz"` sáº½ lÃ m tÄƒng thá»i gian cháº¡y lÃªn hai láº§n..
  ```py
  def add_string_with_plus(iters):
      s = ""
      for i in range(iters):
          s = s + "x" + "y" + "z"
      assert len(s) == 3*iters

  >>> %timeit -n100 add_string_with_plus(1000)
  388 Âµs Â± 22.4 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)
  >>> %timeit -n100 add_string_with_plus(10000) # Quadratic increase in execution time
  9 ms Â± 298 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)
  ```
  
- CÃ³ nhiá»u cÃ¡ch Ä‘á»ƒ Ä‘á»‹nh dáº¡ng vÃ  táº¡o má»™t string khá»•ng lá»“, trÃ¡i ngÆ°á»£c vá»›i Ä‘iá»u trong [Zen of Python](https://www.python.org/dev/peps/pep-0020/), nhÆ° sau  
    > Chá»‰ nÃªn cÃ³ má»™t -- vÃ  tá»‘t hÆ¡n lÃ  chá»‰ má»™t -- cÃ¡ch rÃµ rÃ ng Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y.
---

 
### â–¶ Minor Ones *
<!-- Example ID: f885cb82-f1e4-4daa-9ff3-972b14cb1324 --->
* `join()` lÃ  má»™t hÃ m dÃ nh cho string thay vÃ¬ dÃ nh cho list. (náº¿u nhÃ¬n vÃ o thÃ¬ ta cÃ³ thá»ƒ tháº¥y nÃ³ hÆ¡i ngÆ°á»£c ngÆ°á»£c)
  **ğŸ’¡ Giáº£i thÃ­ch:** Náº¿u `join()` lÃ  má»™t phÆ°Æ¡ng thá»©c hoáº¡t Ä‘á»™ng vá»›i má»™t string, khi Ä‘Ã³ nÃ³ cÅ©ng cÃ³ thá»ƒ lÃ m viá»‡c Ä‘Æ°á»£c vá»›i báº¥t cá»© Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p khÃ¡c (nhÆ° list, tuple, iterators). Náº¿u nÃ³ lÃ  má»™t phÆ°Æ¡ng thá»©c hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c trÃªn list, thÃ¬ nÃ³ pháº£i Ä‘Æ°á»£c triá»ƒn khai má»™t cÃ¡ch tÃ¡ch biá»‡t vá»›i má»i kiá»ƒu. CÃ²n ná»¯a, sáº½ lÃ  khÃ´ng há»£p lÃ½ Ä‘á»ƒ Ä‘áº·t má»™t phÆ°Æ¡ng thá»©c chá»‰ dÃ nh riÃªng cho string lÃªn má»™t Ä‘á»‘i tÆ°á»£ng tá»•ng quÃ¡t `list`.
  
* CÃ¡c cÃ¢u lá»‡nh dÆ°á»›i Ä‘Ã¢y nhÃ¬n cÃ³ váº» láº¡, nhÆ°ng Ä‘Ãºng vá» ngá»¯ nghÄ©a:
  + `[] = ()` váº«n Ä‘Ãºng vá» máº·t ngá»¯ nghÄ©a (Giáº£i nÃ©n má»™t `tuple` rá»—ng sáº½ táº¡o ra má»™t `list` rá»—ng)
  + `'a'[0][0][0][0][0]` cÅ©ng Ä‘Ãºng vá» ngá»¯ nghÄ©a bá»Ÿi cÃ¡c strings lÃ  cÃ¡c [chuá»—i](https://docs.python.org/3/glossary.html#term-sequence) (cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p há»— trá»£ truy cáº­p vÃ  cÃ¡c pháº§n tá»­ nÃ³ chá»©a sá»­ dá»¥ng cÃ¡c chá»‰ sá»‘ sá»‘ nguyÃªn) trong Python.
  + Cáº£ `3 --0-- 5 == 8` vÃ  `--5 == 5` Ä‘á»u Ä‘Ãºng vá» ngá»¯ nghÄ©a vÃ  cho ra káº¿t quáº£ lÃ  `True`.

* Vá»›i `a` lÃ  má»™t sá»‘, `++a` vÃ  `--a` Ä‘á»u lÃ  cÃ¡c cÃ¢u lá»‡nh Python há»£p lá»‡ nhÆ°ng chÃºng khÃ´ng cháº¡y giá»‘ng nhÆ° cÃ¡c cÃ¢u lá»‡nh tÆ°Æ¡ng tá»± trong cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhÆ° C, C++, hay Java.
  ```py
  >>> a = 5
  >>> a
  5
  >>> ++a
  5
  >>> --a
  5
  ```

  **ğŸ’¡ Giáº£i thÃ­ch:**
  + Trong Python, khÃ´ng cÃ³ phÃ©p `++`. Thá»±c ra nÃ³ chá»‰ lÃ  hai phÃ©p tÃ­nh  `+`.
  + `++a` Ä‘Æ°á»£c phÃ¢n tÃ­ch nhÆ°  `+(+a)` vÃ  Ä‘Æ°á»£c dá»‹ch ra lÃ  `a`. TÆ°Æ¡ng tá»± lÃ  `--a`.
  + [BÃ i Ä‘Äƒng](https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python) trÃªn StackOverflow tháº£o luáº­n lÃ½ do táº¡i sao khÃ´ng cÃ³ cÃ¡c phÃ©p tÃ­nh tÄƒng vÃ  giáº£m trong Python.

* Báº¡n pháº£i biáº¿t vá» kÃ­ hiá»‡u con hÃ  mÃ£ trong Python. NhÆ°ng báº¡n cÃ³ bao giá» nghe tá»›i *kÃ­ hiá»‡u xÃ¢m lÆ°á»£c khÃ´ng gian*?
  ```py
  >>> a = 42
  >>> a -=- 1
  >>> a
  43
  ```
  NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° phÃ©p tÃ­nh tÄƒng, nhÆ° vá»›i má»™t vÃ­ dá»¥ khÃ¡c sau Ä‘Ã¢y
  ```py
  >>> a +=+ 1
  >>> a
  >>> 44
  ```
  **ğŸ’¡ Giáº£i thÃ­ch:** TrÃ² chÆ¡i khÄƒm nÃ y xuáº¥t phÃ¡t tá»« [Raymond Hettinger's tweet](https://twitter.com/raymondh/status/1131103570856632321?lang=en). KÃ­ hiá»‡u xÃ¢m lÆ°á»£c khÃ´ng gian chá»‰ Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng khÃ¡c Ä‘i lÃ  `a -= (-1)`. TÆ°Æ¡ng tá»± vá»›i `a = a - (- 1)`. TÆ°Æ¡ng tá»± vá»›i trÆ°á»ng há»£p `a += (+ 1)`.
  
* Python cÃ³ má»™t tÃ i liá»‡u vá» phÃ©p [hÃ m Ã½ Ä‘áº£o ngÆ°á»£c](https://en.wikipedia.org/wiki/Converse_implication). 
     
     ```py
     >>> False ** False == True
     True
     >>> False ** True == False
     True
     >>> True ** False == True
     True
     >>> True ** True == True
     True
     ```

     **ğŸ’¡ Giáº£i thÃ­ch:** Náº¿u báº¡n thay tháº¿ `False` vÃ  `True` báº±ng 0 vÃ  1 vÃ  sau Ä‘Ã³ lÃ m cÃ¡c phÃ©p toÃ¡n, báº£ng chÃ¢n trá»‹ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i phÃ©p Ã¡m chá»‰ ngÆ°á»£c. ([Nguá»“n](https://github.com/cosmologicon/pywat/blob/master/explanation.md#the-undocumented-converse-implication-operator))
     
* Do chÃºng ta Ä‘ang bÃ n vá» cÃ¡c phÃ©p tÃ­nh, cÅ©ng cÃ³ phÃ©p `@` dÃ nh cho viá»‡c nhÃ¢n ma tráº­n (Ä‘á»«ng lo, Ä‘Ã¢y lÃ  phÃ©p tÃ­nh thá»±c sá»±)
     ```py
     >>> import numpy as np
     >>> np.array([2, 2, 2]) @ np.array([7, 8, 8])
     46
     ```

     **ğŸ’¡ Giáº£i thÃ­ch:** PhÃ©p tÃ­nh `@` Ä‘Æ°á»£c thÃªm vÃ o Python 3.5 vá»›i sá»± chÃº Ã½ dÃ nh cho cá»™ng Ä‘á»“ng khoa há»c. Báº¥t cá»© Ä‘á»‘i tÆ°á»£ng nÃ o cÅ©ng cÃ³ thá»ƒ ghi Ä‘Ã¨ lÃªn phÆ°Æ¡ng thá»©c ma thuáº­t (magic method)  `__matmul__` Ä‘á»ƒ Ä‘á»‹nh nghÄ©a hÃ nh vi cho phÃ©p tÃ­nh..

* Tá»« Python 3.8 trá»Ÿ Ä‘i báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃº phÃ¡p f-string nhÆ° `f'{some_var=}` Ä‘á»ƒ debugging cho dá»…. VÃ­ dá»¥
    ```py
    >>> some_string = "wtfpython"
    >>> f'{some_string=}'
    "some_string='wtfpython'"
    ``` 

* Python sá»­ dá»¥ng 2 bytes cho lÆ°u trá»¯ biáº¿n cá»¥ bá»™ trong cÃ¡c hÃ m. Vá» máº·t lÃ½ thuyáº¿t, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  chá»‰ cÃ³ 65536 biáº¿n cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong má»™t hÃ m. Tuy nhiÃªn, Python cÃ³ má»™t giáº£i phÃ¡p khÃ©o lÃ©o, tÃ­ch há»£p sáºµn Ä‘á»ƒ lÆ°u nhiá»u hÆ¡n 2^16 tÃªn biáº¿n. Äoáº¡n code phÃ­a dÆ°á»›i cho ta tháº¥y Ä‘iá»u gÃ¬ xáº£y ra trong stack khi cÃ³ nhiá»u hÆ¡n 65536 biáº¿n cá»¥c bá»™ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a (Cáº£nh bÃ¡o: Ä‘oáº¡n mÃ£ nÃ y in ra 2^18 dÃ²ng vÄƒn báº£n, háº£y chuáº©n bá»‹!):
     
     ```py
     import dis
    exec("""
    def f():
        """ + """
        """.join(["X" + str(x) + "=" + str(x) for x in range(65539)]))

    f()

    print(dis.dis(f))
    ```
     
* Nhiá»u Python threads sáº½ khÃ´ng cháº¡y *Python code* Ä‘á»“ng thá»i. Ã³ váº» tá»± nhiÃªn khi sinh ra má»™t sá»‘ luá»“ng vÃ  Ä‘á»ƒ nÃ³ cháº¡y code Python cá»§a báº¡n Ä‘á»“ng thá»i, nhÆ°ng bá»Ÿi vÃ¬ [KhoÃ¡ trÃ¬nh thÃ´ng dá»‹ch toÃ n cá»¥c](https://wiki.python.org/moin/GlobalInterpreterLock) trong Python, táº¥t cáº£ nhá»¯ng gÃ¬ báº¡n lÃ m lÃ  lÃ m cho cÃ¡c luá»“ng cá»§a báº¡n thá»±c thi trÃªn cÃ¹ng má»™t core theo thá»© tá»±. CÃ¡c luá»“ng Python ráº¥t tá»‘t cho cÃ¡c tÃ¡c vá»‹ liÃªn quan tá»›i IO, nhÆ°ng Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c viá»‡c xá»­ lÃ½ song song trong Python cho cÃ¡c tÃ¡c vá»¥ gáº¯n vá»›i CPY, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng module [multiprocessing](https://docs.python.org/2/library/multiprocessing.html) 

     ```py
     # File some_file.py
     import time
     
     print("wtfpython", end="_")
     time.sleep(3)
     ```

    Äoáº¡n mÃ£ trÃªn in ra `wtfpython` sau 3 seconds bá»Ÿi vÃ¬ tham sá»‘ `end` bá»™ Ä‘á»‡m káº¿t quáº£ Ä‘Æ°á»£c dá»n sáº¡ch sau khi gÄƒp `\n` hoáº·c khi chÆ°Æ¡ng trÃ¬nh káº¿t thÃºc thá»±c thi. Báº¡n cÃ³ thá»ƒ báº¯t dá»n sáº¡ch bá»™ Ä‘á»‡m thÃ´ng qua viá»‡c gá»­i vÃ o tham sá»‘ `flush=True`..
 
* Cáº¯t danh sÃ¡ch vá»›i cÃ¡c chá»‰ sá»‘ náº±m ngoÃ i pháº¡m vá»‹ sáº½ khÃ´ng tráº£ vá» lá»—i
* 
  ```py
  >>> some_list = [1, 2, 3, 4, 5]
  >>> some_list[111:]
  []
  ```
* Cáº¯t má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ láº·p khÃ´ng pháº£i lÃºc nÃ o cÅ©ng táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i. VÃ­ dá»¥,
    ```py
    >>> some_str = "wtfpython"
    >>> some_list = ['w', 't', 'f', 'p', 'y', 't', 'h', 'o', 'n']
    >>> some_list is some_list[:] # False lÃ  bá»Ÿi vÃ¬ má»™t Ä‘á»‘i tÆ°á»£ng má»›i Ä‘Æ°á»£c táº¡o
    False
    >>> some_str is some_str[:] # True lÃ  bá»Ÿi vÃ¬ cÃ¡c strings khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹, do váº­y khÃ´ng táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i khi cáº¯t.
    True
    ```

* `int('Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©')` tráº£ vá» `123456789` trong Python 3. Trong Python, cÃ¡c kÃ­ tá»± sá»‘ tháº­p phÃ¢n bao gá»“m cÃ¡c kÃ­ tá»± sá»‘, vÃ  táº¥t cáº£ cÃ¡c kÃ­ tá»± cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ táº¡o nÃªn cÃ³ sá»‘ cÆ¡ sá»‘ tháº­p phÃ¢n, vÃ­ dá»¥. U+0660, ARABIC-INDIC DIGIT ZERO. Äáº­y lÃ   [má»™t cÃ¢u chuyá»‡n háº¥p dÃ¢n](http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/) liÃªn quan 

* Báº¡n cÃ³ thá»ƒ ngÄƒn cÃ¡ch cÃ¡c sá»‘ Ä‘Æ¡n vá»›i dáº¥u gáº¡ch chÃ¢n (Ä‘á»ƒ Ä‘á»c dá»… hÆ¡n), tá»« Python 3 trá»Ÿ Ä‘i.

     ```py
     >>> six_million = 6_000_000
     >>> six_million
     6000000
     >>> hex_address = 0xF00D_CAFE
     >>> hex_address
     4027435774
     ```

* `'abc'.count('') == 4`. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t cÃ¡ch triá»ƒn khai gáº§n tÆ°Æ¡ng tá»± vá»›i phÆ°Æ¡ng thá»©c `count`, vÃ­ dá»¥ nÃ y sáº½ lÃ m má»i thá»© rÃµ rÃ ng hÆ¡n
  ```py
  def count(s, sub):
      result = 0
      for i in range(len(s) + 1 - len(sub)):
          result += (s[i:i + len(sub)] == sub)
      return result
  ```
  CÆ° xá»­ cá»§a hÃ m trÃªn lÃ  do viá»‡c so khá»›p cÃ¡c chuá»—i con (substring) rá»—ng vá»›i cÃ¡c lÃ¡t cáº¯t cÃ³ Ä‘á»™ dÃ i báº±ng 0 trong string gá»‘c. 
---
---

# ÄÃ³ng gÃ³p

Báº¡n cÃ³ thá»ƒ Ä‘Ã³ng gÃ³p cho wtfpython theo nhá»¯ng cÃ¡ch dÆ°á»›i Ä‘Ã¢y

- Cho chÃºng tÃ´i biáº¿t nhá»¯ng vÃ­ dá»¥ má»›i
- Dá»‹ch wtfpython sang cÃ¡c ngÃ´n gnuwx khÃ¡c (Xem táº¡i [issues labeled translation](https://github.com/satwikkansal/wtfpython/issues?q=is%3Aissue+is%3Aopen+label%3Atranslation))
- Minor corrections like pointing out outdated snippets, typos, formatting errors, etc.
- Sá»­a cÃ¡c lá»—i phá»¥ khÃ¡c nhÆ° cÃ¡c Ä‘oáº¡n mÃ£ bá»‹ lá»—i thá»i, cÃ¡c lá»—i cÃº phÃ¡p, lá»—i Ä‘á»‹nh dáº¡ng, vÃ¢n vÃ¢n.
- Identifying gaps (things like inadequate explanation, redundant examples, etc.)
- TÃ¬m nhá»¯ng thiáº¿u sÃ³t (vÃ­ dá»¥ nhÆ° giáº£i thÃ­ch chÆ°a cáº·n káº½, cÃ¡c vÃ­ dá»¥ khÃ´ng cáº§n thiáº¿t, vÃ¢n vÃ¢n.)
- Báº¥t cá»© Ä‘á» xuáº¥t sÃ¡ng táº¡o nÃ o cÅ©ng lÃ m cho wtfpython thÃº vá»‹ vÃ  há»¯u dá»¥ng hÆ¡n

Please see [CONTRIBUTING.md](/CONTRIBUTING.md) for more details. Feel free to create a new [issue](https://github.com/satwikkansal/wtfpython/issues/new) to discuss things.

PS: Please don't reach out with backlinking requests, no links will be added unless they're highly relevant to the project.

# Lá»i cÃ¡m Æ¡n

Ã tÆ°á»Ÿng vÃ  thiáº¿t káº¿ cá»§a wtfpython láº¥y cáº£m há»©ng tá»« dá»± Ã¡n tuyá»‡t vá»i cá»§a Denys Dovhan's [wtfjs](https://github.com/denysdovhan/wtfjs). CÃ¹ng vá»›i Ä‘Ã³ lÃ  sá»± há»— trá»£ tuyá»‡t vá»i cá»§a nhá»¯ng ngÆ°á»i yÃªu Python, giÃºp cho wtfpython cÃ³ Ä‘Æ°á»£c nhÆ° ngÃ y hÃ´m nay.

#### Má»™t vÃ i liÃªn káº¿t hay khÃ¡c!
* https://www.youtube.com/watch?v=sH4XF6pKKmk
* https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python
* https://sopython.com/wiki/Common_Gotchas_In_Python
* https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines
* https://stackoverflow.com/questions/1011431/common-pitfalls-in-python
* https://www.python.org/doc/humor/
* https://github.com/cosmologicon/pywat#the-undocumented-converse-implication-operator
* https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65
* https://github.com/wemake-services/wemake-python-styleguide/search?q=wtfpython&type=Issues
* WFTPython discussion threads on [Hacker News](https://news.ycombinator.com/item?id=21862073) and [Reddit](https://www.reddit.com/r/programming/comments/edsh3q/what_the_fck_python_30_exploring_and/).

# ğŸ“ License

[![WTFPL 2.0][license-image]][license-url]

&copy; [Satwik Kansal](https://satwikkansal.xyz)

[license-url]: http://www.wtfpl.net
[license-image]: https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square

## Chia sáº» cho báº¡n bÃ¨!

Náº¿u báº¡n thÃ­ch wtfpython, báº¡n cÃ³ thá»ƒ chia sáº» cÃ¡c liÃªn káº¿t dÆ°á»›i Ä‘Ã¢y cho báº¡n bÃ¨,

[Twitter](https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&text=If%20you%20really%20think%20you%20know%20Python,%20think%20once%20more!%20Check%20out%20wtfpython&hashtags=python,wtfpython) | [Linkedin](https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&title=What%20the%20f*ck%20Python!&summary=If%20you%20really%20thing%20you%20know%20Python,%20think%20once%20more!) | [Facebook](https://www.facebook.com/dialog/share?app_id=536779657179021&display=page&href=https%3A%2F%2Fgithub.com%2Fsatwikkansal%2Fwtfpython&quote=If%20you%20really%20think%20you%20know%20Python%2C%20think%20once%20more!)  

## Báº¡n cÃ³ cáº§n báº£n pdf cá»§a wtf hay khÃ´ng?

I've received a few requests for the pdf (and epub) version of wtfpython. You can add your details [here](https://satwikkansal.xyz/wtfpython-pdf/) to get them as soon as they are finished.

TÃ´i nháº­n Ä‘Æ°á»£c má»™t vÃ i yÃªu cáº§u cho phiÃªn báº£n pdf (vÃ  epub) cá»§a wtfpython. Náº¿u báº¡n muá»‘n, báº¡n cÃ³ thá»ƒ thÃªm thÃ´ng tin chi tiáº¿t cá»§a mÃ¬nh á»Ÿ Ä‘Ã¢y [here](https://satwikkansal.xyz/wtfpython-pdf/) Ä‘á»ƒ cÃ³ phiÃªn báº£n pdf sá»›m nháº¥t.

**That's all folks!** For upcoming content like this, you can add your email [here](https://www.satwikkansal.xyz/content-like-wtfpython/).

*PS: On a sidenote, consider donating a dollar to [plant a tree](https://teamtrees.org/).*
